var Po=(U=>(U[U.AE_ENABLE=1]="AE_ENABLE",U[U.AE_STATE=2]="AE_STATE",U[U.AE_METERING_MODE=3]="AE_METERING_MODE",U[U.AE_CONSTRAINT_MODE=4]="AE_CONSTRAINT_MODE",U[U.AE_EXPOSURE_MODE=5]="AE_EXPOSURE_MODE",U[U.EXPOSURE_VALUE=6]="EXPOSURE_VALUE",U[U.EXPOSURE_TIME=7]="EXPOSURE_TIME",U[U.EXPOSURE_TIME_MODE=8]="EXPOSURE_TIME_MODE",U[U.ANALOGUE_GAIN=9]="ANALOGUE_GAIN",U[U.ANALOGUE_GAIN_MODE=10]="ANALOGUE_GAIN_MODE",U[U.AE_FLICKER_MODE=11]="AE_FLICKER_MODE",U[U.AE_FLICKER_PERIOD=12]="AE_FLICKER_PERIOD",U[U.AE_FLICKER_DETECTED=13]="AE_FLICKER_DETECTED",U[U.BRIGHTNESS=14]="BRIGHTNESS",U[U.CONTRAST=15]="CONTRAST",U[U.LUX=16]="LUX",U[U.AWB_ENABLE=17]="AWB_ENABLE",U[U.AWB_MODE=18]="AWB_MODE",U[U.AWB_LOCKED=19]="AWB_LOCKED",U[U.COLOUR_GAINS=20]="COLOUR_GAINS",U[U.COLOUR_TEMPERATURE=21]="COLOUR_TEMPERATURE",U[U.SATURATION=22]="SATURATION",U[U.SENSOR_BLACK_LEVELS=23]="SENSOR_BLACK_LEVELS",U[U.SHARPNESS=24]="SHARPNESS",U[U.FOCUS_FO_M=25]="FOCUS_FO_M",U[U.COLOUR_CORRECTION_MATRIX=26]="COLOUR_CORRECTION_MATRIX",U[U.SCALER_CROP=27]="SCALER_CROP",U[U.DIGITAL_GAIN=28]="DIGITAL_GAIN",U[U.FRAME_DURATION=29]="FRAME_DURATION",U[U.FRAME_DURATION_LIMITS=30]="FRAME_DURATION_LIMITS",U[U.SENSOR_TEMPERATURE=31]="SENSOR_TEMPERATURE",U[U.SENSOR_TIMESTAMP=32]="SENSOR_TIMESTAMP",U[U.AF_MODE=33]="AF_MODE",U[U.AF_RANGE=34]="AF_RANGE",U[U.AF_SPEED=35]="AF_SPEED",U[U.AF_METERING=36]="AF_METERING",U[U.AF_WINDOWS=37]="AF_WINDOWS",U[U.AF_TRIGGER=38]="AF_TRIGGER",U[U.AF_PAUSE=39]="AF_PAUSE",U[U.LENS_POSITION=40]="LENS_POSITION",U[U.AF_STATE=41]="AF_STATE",U[U.AF_PAUSE_STATE=42]="AF_PAUSE_STATE",U[U.HDR_MODE=43]="HDR_MODE",U[U.HDR_CHANNEL=44]="HDR_CHANNEL",U[U.GAMMA=45]="GAMMA",U[U.DEBUG_METADATA_ENABLE=46]="DEBUG_METADATA_ENABLE",U[U.FRAME_WALL_CLOCK=47]="FRAME_WALL_CLOCK",U))(Po||{});var Kl={1:"Auto Exposure Enable",3:"AE Metering Mode",4:"AE Constraint Mode",5:"AE Exposure Mode",6:"Exposure Value",7:"Exposure Time",8:"Exposure Time Mode",9:"Analogue Gain",10:"Analogue Gain Mode",11:"AE Flicker Mode",12:"AE Flicker Period",13:"AE Flicker Detected",14:"Brightness",15:"Contrast",16:"Lux",17:"AWB Enable",18:"AWB Mode",19:"AWB Locked",20:"Colour Gains",21:"Colour Temperature",22:"Saturation",23:"Sensor Black Levels",24:"Sharpness",25:"Focus (FO_M)",26:"Colour Correction Matrix",27:"Scaler Crop",28:"Digital Gain",29:"Frame Duration",30:"Frame Duration Limits",31:"Sensor Temperature",32:"Sensor Timestamp",33:"Auto Focus Mode",34:"Auto Focus Range",35:"Auto Focus Speed",36:"Auto Focus Metering",37:"Auto Focus Windows",38:"Auto Focus Trigger",39:"Auto Focus Pause",40:"Lens Position",41:"Auto Focus State",42:"Auto Focus Pause State",43:"HDR Mode",44:"HDR Channel",45:"Gamma",46:"Debug Metadata Enable",47:"Frame Wall Clock",2:"AE State"},Jl={2:{0:"Idle",1:"Searching",2:"Converged"},3:{0:"Centre Weighted",1:"Spot",2:"Matrix",3:"Custom"},4:{0:"Normal",1:"Highlight",2:"Shadows",3:"Custom"},5:{0:"Normal",1:"Short",2:"Long",3:"Custom"},8:{0:"Auto",1:"Manual"},10:{0:"Auto",1:"Manual"},11:{0:"Off",1:"Manual",2:"Auto"},18:{0:"Auto",1:"Incandescent",2:"Tungsten",3:"Fluorescent",4:"Indoor",5:"Daylight",6:"Cloudy",7:"Custom"},33:{0:"Manual",1:"Auto",2:"Continuous"},34:{0:"Normal",1:"Macro",2:"Full"},35:{0:"Normal",1:"Fast"},36:{0:"Auto",1:"Windows"},38:{0:"Start",1:"Cancel"},39:{0:"Immediate",1:"Deferred",2:"Resume"},41:{0:"Idle",1:"Scanning",2:"Focused",3:"Failed"},42:{0:"Running",1:"Pausing",2:"Paused"},43:{0:"Off",1:"Multi-Exposure (Unmerged)",2:"Multi-Exposure",3:"Single Exposure",4:"Night"},44:{0:"None",1:"Short",2:"Medium",3:"Long"}};var Ye=class{constructor(n,t){this.type=n,this.message=typeof t=="string"?t:String(t)}ToString(){return JSON.stringify(this)}},Yt=class{constructor(n,t=""){this.command=n,this.message=t}ToString(){return JSON.stringify(this)}},vn=class{constructor(n,t){this.key=n,this.value=t}};var zl="H264",Yl=["H264","VP8","VP9","AV1"];function Ql(e,n){let t=o=>{let l=new RegExp("(a=rtpmap:(\\d*) "+n+"/90000\\r\\n)"),r=o.match(l);if(r==null||r.length<=2)return o;let i=r[2],s=o.replace(l,""),a=new RegExp("(a=rtcp-fb:"+i+`.*\r
)`,"g");s=s.replace(a,"");let c=new RegExp("(a=fmtp:"+i+`.*\r
)`,"g");s=s.replace(c,"");let u=new RegExp("(a=fmtp:(\\d*) apt="+i+"\\r\\n)"),d=s.match(u),m="";if(d!=null&&d.length>=3){m=d[2],s=s.replace(u,"");let g=new RegExp("(a=rtpmap:"+m+`.*\r
)`,"g");s=s.replace(g,"")}let b=/(m=video.*\r\n)/,y=s.match(b);if(y!=null){let T=y[0].substring(0,y[0].length-2).split(" "),k=T[0];T.forEach((v,_)=>{_!==0&&(v==i||v==m||(k+=" "+v))}),k+=`\r
`,s=s.replace(b,k)}return t(s)};return t(e)}function Oo(e,n=zl){let t=e;for(let o of Yl)o!==n&&(t=Ql(t,o));return t}function ln(e){return e.reduce((n,t)=>n+String.fromCharCode(t),"")}function Mo(e){return btoa(ln(e))}var Qt=e=>e.toString().padStart(2,"0");function No(e){let n="",t=0;for(;t<e.length;){let o=e[t++];if(o<128)n+=String.fromCharCode(o);else if(o<224){let l=e[t++];n+=String.fromCharCode((o&31)<<6|l&63)}else if(o<240){let l=e[t++],r=e[t++];n+=String.fromCharCode((o&15)<<12|(l&63)<<6|r&63)}else{let l=e[t++],r=e[t++],i=e[t++],s=(o&7)<<18|(l&63)<<12|(r&63)<<6|i&63;s-=65536,n+=String.fromCharCode((s>>10)+55296,(s&1023)+56320)}}return n}var Mt=class{constructor(n){this.onProgress=n.onProgress,this.onComplete=n.onComplete,this.fileBuffer=new Uint8Array,this.receivedLength=0,this.isFirstPacket=!0}receiveData(n){this.isFirstPacket?(this.fileBuffer=new Uint8Array(Number(ln(n))),this.isFirstPacket=!1):n.length===0?this.reset():(this.fileBuffer.set(n,this.receivedLength),this.receivedLength+=n.length,this.onProgress?.(this.receivedLength,this.fileBuffer.length),this.receivedLength===this.fileBuffer.length&&this.onComplete(this.fileBuffer))}reset(){this.fileBuffer=new Uint8Array,this.receivedLength=0,this.isFirstPacket=!0}};var wn=(o=>(o[o.Command=0]="Command",o[o.Lossy=1]="Lossy",o[o.Reliable=2]="Reliable",o))(wn||{}),Sn={0:"command",1:"_lossy",2:"_reliable"},Xl={command:0,_lossy:1,_reliable:2};var It=class{constructor(n){this.remoteStreamMap=new Map;this.pendingIceCandidates=[];this.channelReceivers={};this.createOffer=async n=>{let t=await this.peer.createOffer(n);return await this.peer.setLocalDescription(t),console.debug("createOffer: ",t),t};this.createAnswer=async n=>{await this.setRemoteDescription(n);let t=await this.peer.createAnswer();return await this.peer.setLocalDescription(t),console.debug("createAnswer: ",t),t};this.createlocalAudioStream=async()=>{this.localStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1}),this.localStream.getAudioTracks().forEach(n=>{this.peer.addTrack(n,this.localStream),n.enabled=this.options.isMicOn??!1})};this.setRemoteDescription=async n=>{await this.peer.setRemoteDescription(n),this.pendingIceCandidates.forEach(t=>{this.peer.addIceCandidate(t)}),this.pendingIceCandidates=[]};this.addIceCandidate=n=>{!this.peer.remoteDescription&&n?this.pendingIceCandidates.push(n):this.peer.addIceCandidate(n)};this.toggleMic=(n=!this.options.isMicOn)=>{this.options.isMicOn=n,this.toggleTrack(n,this.localStream)};this.toggleSpeaker=(n=!this.options.isSpeakerOn)=>{this.options.isSpeakerOn=n,this.remoteStreamMap.forEach(t=>{this.toggleTrack(n,t)})};this.toggleTrack=(n,t)=>{t?.getAudioTracks().forEach(o=>{o.enabled=n})};this.handleTrack=n=>{let[t]=n.streams[0].id.split("|"),o=this.remoteStreamMap.get(t);o||(o=new MediaStream,this.remoteStreamMap.set(t,o)),n.streams[0].getTracks().forEach(l=>{o?.addTrack(l),l.kind==="audio"&&(l.enabled=this.options.isSpeakerOn??!1),console.debug(`[${t}] get ${l.kind} tracks => label: ${l.label}, id: ${l.id}`)}),this.onStream?.(o),this.onSfuStream?.(t,o)};this.options=n.options,this.peer=new RTCPeerConnection(n),this.peer.ontrack=t=>this.handleTrack(t),this.peer.onicecandidate=t=>{t.candidate&&this.onIceCandidate?.(t)},this.peer.onconnectionstatechange=()=>{this.onConnectionStateChange?.(this.peer.connectionState)},this.peer.ondatachannel=t=>{let o=t.channel,l=o.label,r=Xl[l];(r===1&&n.options.ipcMode==="lossy"||r===2&&n.options.ipcMode==="reliable")&&(r===1?this.lossyChannel=o:r===2&&(this.reliableChannel=o),this.createReceivers(l),o.onmessage=i=>this.onDataChannelMessage(l,i))}}get connectionState(){return this.peer.connectionState}close(){for(let n in this.channelReceivers){let t=this.channelReceivers[n];t.snapshotReceiver.reset(),t.metadataReceiver.reset(),t.recordingReceiver.reset(),t.customReceiver.reset()}this.channelReceivers={},this.lossyChannel&&(this.lossyChannel.onmessage=null),this.reliableChannel&&(this.reliableChannel.onmessage=null),this.lossyChannel=void 0,this.reliableChannel=void 0,this.localStream?.getTracks().forEach(n=>{n.stop()}),this.localStream=void 0,this.remoteStreamMap.forEach(n=>{n.getTracks().forEach(t=>{t.stop()})}),this.remoteStreamMap.clear(),this.peer.close(),this.peer.ontrack=null,this.peer.onicecandidate=null,this.peer.onconnectionstatechange=null,this.onSnapshot=void 0,this.onMetadata=void 0,this.onProgress=void 0,this.onVideoDownloaded=void 0,this.onMessage=void 0,this.onStream=void 0,this.onIceCandidate=void 0,this.onConnectionStateChange=void 0,console.debug("webrtc peer is closed.")}createDataChannel(n,t){return this.peer.createDataChannel(Sn[n],t)}createReceivers(n){this.channelReceivers[n]={snapshotReceiver:new Mt({onProgress:(t,o)=>this.onProgress?.(t,o,1),onComplete:t=>this.onSnapshot?.("data:image/jpeg;base64,"+Mo(t))}),metadataReceiver:new Mt({onProgress:(t,o)=>this.onProgress?.(t,o,2),onComplete:t=>this.onMetadata?.(JSON.parse(ln(t)))}),recordingReceiver:new Mt({onProgress:(t,o)=>this.onProgress?.(t,o,3),onComplete:t=>this.onVideoDownloaded?.(t)}),customReceiver:new Mt({onProgress:(t,o)=>this.onProgress?.(t,o,6),onComplete:t=>this.onMessage?.(No(t))})}}onDataChannelMessage(n,t){let o=new Uint8Array(t.data);this.dispatchPayload(n,o)}dispatchPayload(n,t){let o=this.channelReceivers[n];if(!o){console.warn(`No receivers found for label: ${n}`);return}let l=new Uint8Array(t),r=l[0],i=l.slice(1);switch(r){case 1:o.snapshotReceiver.receiveData(i);break;case 2:o.metadataReceiver.receiveData(i);break;case 3:o.recordingReceiver.receiveData(i);break;case 6:o.customReceiver.receiveData(i);break}}};var to=Object.defineProperty,Zl=Object.getOwnPropertyDescriptor,ec=Object.getOwnPropertyNames,tc=Object.prototype.hasOwnProperty,je=(e,n)=>()=>(e&&(n=e(e=0)),n),de=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),Gt=(e,n)=>{for(var t in n)to(e,t,{get:n[t],enumerable:!0})},nc=(e,n,t,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of ec(n))!tc.call(e,l)&&l!==t&&to(e,l,{get:()=>n[l],enumerable:!(o=Zl(n,l))||o.enumerable});return e},Ce=e=>nc(to({},"__esModule",{value:!0}),e),re=je(()=>{}),we={};Gt(we,{_debugEnd:()=>pi,_debugProcess:()=>fi,_events:()=>Ci,_eventsCount:()=>Pi,_exiting:()=>Zr,_fatalExceptions:()=>ui,_getActiveHandles:()=>Rs,_getActiveRequests:()=>As,_kill:()=>ni,_linkedBinding:()=>Es,_maxListeners:()=>Ri,_preload_modules:()=>Ii,_rawDebug:()=>Yr,_startProfilerIdleNotifier:()=>mi,_stopProfilerIdleNotifier:()=>gi,_tickCallback:()=>di,abort:()=>_i,addListener:()=>Oi,allowedNodeEnvironmentFlags:()=>li,arch:()=>Br,argv:()=>jr,argv0:()=>Ei,assert:()=>Cs,binding:()=>Hr,chdir:()=>Jr,config:()=>ei,cpuUsage:()=>fn,cwd:()=>Kr,debugPort:()=>Si,default:()=>ro,dlopen:()=>Is,domain:()=>Xr,emit:()=>xi,emitWarning:()=>$r,env:()=>Fr,execArgv:()=>Wr,execPath:()=>wi,exit:()=>si,features:()=>ci,hasUncaughtExceptionCaptureCallback:()=>Ps,hrtime:()=>On,kill:()=>oi,listeners:()=>Ms,memoryUsage:()=>ii,moduleLoadList:()=>Qr,nextTick:()=>ws,off:()=>Ni,on:()=>ht,once:()=>Mi,openStdin:()=>ai,pid:()=>ki,platform:()=>Dr,ppid:()=>vi,prependListener:()=>Bi,prependOnceListener:()=>Di,reallyExit:()=>ti,release:()=>zr,removeAllListeners:()=>Li,removeListener:()=>Ui,resourceUsage:()=>ri,setSourceMapsEnabled:()=>Ai,setUncaughtExceptionCaptureCallback:()=>hi,stderr:()=>yi,stdin:()=>Ti,stdout:()=>bi,title:()=>xr,umask:()=>Gr,uptime:()=>Os,version:()=>qr,versions:()=>Vr});function no(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function rc(){!Vt||!Wt||(Vt=!1,Wt.length?ot=Wt.concat(ot):gn=-1,ot.length&&vs())}function vs(){if(!Vt){var e=setTimeout(rc,0);Vt=!0;for(var n=ot.length;n;){for(Wt=ot,ot=[];++gn<n;)Wt&&Wt[gn].run();gn=-1,n=ot.length}Wt=null,Vt=!1,clearTimeout(e)}}function ws(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];ot.push(new Ss(e,n)),ot.length===1&&!Vt&&setTimeout(vs,0)}function Ss(e,n){this.fun=e,this.array=n}function Ve(){}function Es(e){no("_linkedBinding")}function Is(e){no("dlopen")}function As(){return[]}function Rs(){return[]}function Cs(e,n){if(!e)throw new Error(n||"assertion error")}function Ps(){return!1}function Os(){return mt.now()/1e3}function On(e){var n=Math.floor((Date.now()-mt.now())*.001),t=mt.now()*.001,o=Math.floor(t)+n,l=Math.floor(t%1*1e9);return e&&(o=o-e[0],l=l-e[1],l<0&&(o--,l+=Mn)),[o,l]}function ht(){return ro}function Ms(e){return[]}var ot,Vt,Wt,gn,xr,Br,Dr,Fr,jr,Wr,qr,Vr,$r,Hr,Gr,Kr,Jr,zr,Yr,Qr,Xr,Zr,ei,ti,ni,fn,ri,ii,oi,si,ai,li,ci,ui,hi,di,fi,pi,mi,gi,bi,yi,Ti,_i,ki,vi,wi,Si,Ei,Ii,Ai,mt,vr,Mn,Ri,Ci,Pi,Oi,Mi,Ni,Ui,Li,xi,Bi,Di,ro,ic=je(()=>{re(),oe(),ie(),ot=[],Vt=!1,gn=-1,Ss.prototype.run=function(){this.fun.apply(null,this.array)},xr="browser",Br="x64",Dr="browser",Fr={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},jr=["/usr/bin/node"],Wr=[],qr="v16.8.0",Vr={},$r=function(e,n){console.warn((n?n+": ":"")+e)},Hr=function(e){no("binding")},Gr=function(e){return 0},Kr=function(){return"/"},Jr=function(e){},zr={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Yr=Ve,Qr=[],Xr={},Zr=!1,ei={},ti=Ve,ni=Ve,fn=function(){return{}},ri=fn,ii=fn,oi=Ve,si=Ve,ai=Ve,li={},ci={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},ui=Ve,hi=Ve,di=Ve,fi=Ve,pi=Ve,mi=Ve,gi=Ve,bi=void 0,yi=void 0,Ti=void 0,_i=Ve,ki=2,vi=1,wi="/bin/usr/node",Si=9229,Ei="node",Ii=[],Ai=Ve,mt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},mt.now===void 0&&(vr=Date.now(),mt.timing&&mt.timing.navigationStart&&(vr=mt.timing.navigationStart),mt.now=()=>Date.now()-vr),Mn=1e9,On.bigint=function(e){var n=On(e);return typeof BigInt>"u"?n[0]*Mn+n[1]:BigInt(n[0]*Mn)+BigInt(n[1])},Ri=10,Ci={},Pi=0,Oi=ht,Mi=ht,Ni=ht,Ui=ht,Li=ht,xi=Ve,Bi=ht,Di=ht,ro={version:qr,versions:Vr,arch:Br,platform:Dr,release:zr,_rawDebug:Yr,moduleLoadList:Qr,binding:Hr,_linkedBinding:Es,_events:Ci,_eventsCount:Pi,_maxListeners:Ri,on:ht,addListener:Oi,once:Mi,off:Ni,removeListener:Ui,removeAllListeners:Li,emit:xi,prependListener:Bi,prependOnceListener:Di,listeners:Ms,domain:Xr,_exiting:Zr,config:ei,dlopen:Is,uptime:Os,_getActiveRequests:As,_getActiveHandles:Rs,reallyExit:ti,_kill:ni,cpuUsage:fn,resourceUsage:ri,memoryUsage:ii,kill:oi,exit:si,openStdin:ai,allowedNodeEnvironmentFlags:li,assert:Cs,features:ci,_fatalExceptions:ui,setUncaughtExceptionCaptureCallback:hi,hasUncaughtExceptionCaptureCallback:Ps,emitWarning:$r,nextTick:ws,_tickCallback:di,_debugProcess:fi,_debugEnd:pi,_startProfilerIdleNotifier:mi,_stopProfilerIdleNotifier:gi,stdout:bi,stdin:Ti,stderr:yi,abort:_i,umask:Gr,chdir:Jr,cwd:Kr,env:Fr,title:xr,argv:jr,execArgv:Wr,pid:ki,ppid:vi,execPath:wi,debugPort:Si,hrtime:On,argv0:Ei,_preload_modules:Ii,setSourceMapsEnabled:Ai}}),ie=je(()=>{ic()}),We={};Gt(We,{Buffer:()=>Bn,INSPECT_MAX_BYTES:()=>Ns,default:()=>dt,kMaxLength:()=>Us});function oc(){if(Fi)return Zt;Fi=!0,Zt.byteLength=s,Zt.toByteArray=c,Zt.fromByteArray=m;for(var e=[],n=[],t=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,r=o.length;l<r;++l)e[l]=o[l],n[o.charCodeAt(l)]=l;n[45]=62,n[95]=63;function i(b){var y=b.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=b.indexOf("=");g===-1&&(g=y);var T=g===y?0:4-g%4;return[g,T]}function s(b){var y=i(b),g=y[0],T=y[1];return(g+T)*3/4-T}function a(b,y,g){return(y+g)*3/4-g}function c(b){var y,g=i(b),T=g[0],k=g[1],v=new t(a(b,T,k)),_=0,A=k>0?T-4:T,L;for(L=0;L<A;L+=4)y=n[b.charCodeAt(L)]<<18|n[b.charCodeAt(L+1)]<<12|n[b.charCodeAt(L+2)]<<6|n[b.charCodeAt(L+3)],v[_++]=y>>16&255,v[_++]=y>>8&255,v[_++]=y&255;return k===2&&(y=n[b.charCodeAt(L)]<<2|n[b.charCodeAt(L+1)]>>4,v[_++]=y&255),k===1&&(y=n[b.charCodeAt(L)]<<10|n[b.charCodeAt(L+1)]<<4|n[b.charCodeAt(L+2)]>>2,v[_++]=y>>8&255,v[_++]=y&255),v}function u(b){return e[b>>18&63]+e[b>>12&63]+e[b>>6&63]+e[b&63]}function d(b,y,g){for(var T,k=[],v=y;v<g;v+=3)T=(b[v]<<16&16711680)+(b[v+1]<<8&65280)+(b[v+2]&255),k.push(u(T));return k.join("")}function m(b){for(var y,g=b.length,T=g%3,k=[],v=16383,_=0,A=g-T;_<A;_+=v)k.push(d(b,_,_+v>A?A:_+v));return T===1?(y=b[g-1],k.push(e[y>>2]+e[y<<4&63]+"==")):T===2&&(y=(b[g-2]<<8)+b[g-1],k.push(e[y>>10]+e[y>>4&63]+e[y<<2&63]+"=")),k.join("")}return Zt}function sc(){return ji?pn:(ji=!0,pn.read=function(e,n,t,o,l){var r,i,s=l*8-o-1,a=(1<<s)-1,c=a>>1,u=-7,d=t?l-1:0,m=t?-1:1,b=e[n+d];for(d+=m,r=b&(1<<-u)-1,b>>=-u,u+=s;u>0;r=r*256+e[n+d],d+=m,u-=8);for(i=r&(1<<-u)-1,r>>=-u,u+=o;u>0;i=i*256+e[n+d],d+=m,u-=8);if(r===0)r=1-c;else{if(r===a)return i?NaN:(b?-1:1)*(1/0);i=i+Math.pow(2,o),r=r-c}return(b?-1:1)*i*Math.pow(2,r-o)},pn.write=function(e,n,t,o,l,r){var i,s,a,c=r*8-l-1,u=(1<<c)-1,d=u>>1,m=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=o?0:r-1,y=o?1:-1,g=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(s=isNaN(n)?1:0,i=u):(i=Math.floor(Math.log(n)/Math.LN2),n*(a=Math.pow(2,-i))<1&&(i--,a*=2),i+d>=1?n+=m/a:n+=m*Math.pow(2,1-d),n*a>=2&&(i++,a/=2),i+d>=u?(s=0,i=u):i+d>=1?(s=(n*a-1)*Math.pow(2,l),i=i+d):(s=n*Math.pow(2,d-1)*Math.pow(2,l),i=0));l>=8;e[t+b]=s&255,b+=y,s/=256,l-=8);for(i=i<<l|s,c+=l;c>0;e[t+b]=i&255,b+=y,i/=256,c-=8);e[t+b-y]|=g*128},pn)}function ac(){if(Wi)return At;Wi=!0;let e=oc(),n=sc(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;At.Buffer=i,At.SlowBuffer=k,At.INSPECT_MAX_BYTES=50;let o=2147483647;At.kMaxLength=o,i.TYPED_ARRAY_SUPPORT=l(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{let f=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(f,h),f.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function r(f){if(f>o)throw new RangeError('The value "'+f+'" is invalid for option "size"');let h=new Uint8Array(f);return Object.setPrototypeOf(h,i.prototype),h}function i(f,h,p){if(typeof f=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(f)}return s(f,h,p)}i.poolSize=8192;function s(f,h,p){if(typeof f=="string")return d(f,h);if(ArrayBuffer.isView(f))return b(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(K(f,ArrayBuffer)||f&&K(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(K(f,SharedArrayBuffer)||f&&K(f.buffer,SharedArrayBuffer)))return y(f,h,p);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let w=f.valueOf&&f.valueOf();if(w!=null&&w!==f)return i.from(w,h,p);let O=g(f);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return i.from(f[Symbol.toPrimitive]("string"),h,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}i.from=function(f,h,p){return s(f,h,p)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function a(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function c(f,h,p){return a(f),f<=0?r(f):h!==void 0?typeof p=="string"?r(f).fill(h,p):r(f).fill(h):r(f)}i.alloc=function(f,h,p){return c(f,h,p)};function u(f){return a(f),r(f<0?0:T(f)|0)}i.allocUnsafe=function(f){return u(f)},i.allocUnsafeSlow=function(f){return u(f)};function d(f,h){if((typeof h!="string"||h==="")&&(h="utf8"),!i.isEncoding(h))throw new TypeError("Unknown encoding: "+h);let p=v(f,h)|0,w=r(p),O=w.write(f,h);return O!==p&&(w=w.slice(0,O)),w}function m(f){let h=f.length<0?0:T(f.length)|0,p=r(h);for(let w=0;w<h;w+=1)p[w]=f[w]&255;return p}function b(f){if(K(f,Uint8Array)){let h=new Uint8Array(f);return y(h.buffer,h.byteOffset,h.byteLength)}return m(f)}function y(f,h,p){if(h<0||f.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<h+(p||0))throw new RangeError('"length" is outside of buffer bounds');let w;return h===void 0&&p===void 0?w=new Uint8Array(f):p===void 0?w=new Uint8Array(f,h):w=new Uint8Array(f,h,p),Object.setPrototypeOf(w,i.prototype),w}function g(f){if(i.isBuffer(f)){let h=T(f.length)|0,p=r(h);return p.length===0||f.copy(p,0,0,h),p}if(f.length!==void 0)return typeof f.length!="number"||X(f.length)?r(0):m(f);if(f.type==="Buffer"&&Array.isArray(f.data))return m(f.data)}function T(f){if(f>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return f|0}function k(f){return+f!=f&&(f=0),i.alloc(+f)}i.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==i.prototype},i.compare=function(f,h){if(K(f,Uint8Array)&&(f=i.from(f,f.offset,f.byteLength)),K(h,Uint8Array)&&(h=i.from(h,h.offset,h.byteLength)),!i.isBuffer(f)||!i.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===h)return 0;let p=f.length,w=h.length;for(let O=0,F=Math.min(p,w);O<F;++O)if(f[O]!==h[O]){p=f[O],w=h[O];break}return p<w?-1:w<p?1:0},i.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(f,h){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return i.alloc(0);let p;if(h===void 0)for(h=0,p=0;p<f.length;++p)h+=f[p].length;let w=i.allocUnsafe(h),O=0;for(p=0;p<f.length;++p){let F=f[p];if(K(F,Uint8Array))O+F.length>w.length?(i.isBuffer(F)||(F=i.from(F)),F.copy(w,O)):Uint8Array.prototype.set.call(w,F,O);else if(i.isBuffer(F))F.copy(w,O);else throw new TypeError('"list" argument must be an Array of Buffers');O+=F.length}return w};function v(f,h){if(i.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||K(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);let p=f.length,w=arguments.length>2&&arguments[2]===!0;if(!w&&p===0)return 0;let O=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return B(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return z(f).length;default:if(O)return w?-1:B(f).length;h=(""+h).toLowerCase(),O=!0}}i.byteLength=v;function _(f,h,p){let w=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,h>>>=0,p<=h))return"";for(f||(f="utf8");;)switch(f){case"hex":return j(this,h,p);case"utf8":case"utf-8":return W(this,h,p);case"ascii":return ae(this,h,p);case"latin1":case"binary":return ne(this,h,p);case"base64":return C(this,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,h,p);default:if(w)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),w=!0}}i.prototype._isBuffer=!0;function A(f,h,p){let w=f[h];f[h]=f[p],f[p]=w}i.prototype.swap16=function(){let f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<f;h+=2)A(this,h,h+1);return this},i.prototype.swap32=function(){let f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<f;h+=4)A(this,h,h+3),A(this,h+1,h+2);return this},i.prototype.swap64=function(){let f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<f;h+=8)A(this,h,h+7),A(this,h+1,h+6),A(this,h+2,h+5),A(this,h+3,h+4);return this},i.prototype.toString=function(){let f=this.length;return f===0?"":arguments.length===0?W(this,0,f):_.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(f){if(!i.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:i.compare(this,f)===0},i.prototype.inspect=function(){let f="",h=At.INSPECT_MAX_BYTES;return f=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(f+=" ... "),"<Buffer "+f+">"},t&&(i.prototype[t]=i.prototype.inspect),i.prototype.compare=function(f,h,p,w,O){if(K(f,Uint8Array)&&(f=i.from(f,f.offset,f.byteLength)),!i.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(h===void 0&&(h=0),p===void 0&&(p=f?f.length:0),w===void 0&&(w=0),O===void 0&&(O=this.length),h<0||p>f.length||w<0||O>this.length)throw new RangeError("out of range index");if(w>=O&&h>=p)return 0;if(w>=O)return-1;if(h>=p)return 1;if(h>>>=0,p>>>=0,w>>>=0,O>>>=0,this===f)return 0;let F=O-w,ue=p-h,_e=Math.min(F,ue),Pe=this.slice(w,O),Re=f.slice(h,p);for(let Se=0;Se<_e;++Se)if(Pe[Se]!==Re[Se]){F=Pe[Se],ue=Re[Se];break}return F<ue?-1:ue<F?1:0};function L(f,h,p,w,O){if(f.length===0)return-1;if(typeof p=="string"?(w=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,X(p)&&(p=O?0:f.length-1),p<0&&(p=f.length+p),p>=f.length){if(O)return-1;p=f.length-1}else if(p<0)if(O)p=0;else return-1;if(typeof h=="string"&&(h=i.from(h,w)),i.isBuffer(h))return h.length===0?-1:S(f,h,p,w,O);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(f,h,p):Uint8Array.prototype.lastIndexOf.call(f,h,p):S(f,[h],p,w,O);throw new TypeError("val must be string, number or Buffer")}function S(f,h,p,w,O){let F=1,ue=f.length,_e=h.length;if(w!==void 0&&(w=String(w).toLowerCase(),w==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(f.length<2||h.length<2)return-1;F=2,ue/=2,_e/=2,p/=2}function Pe(Se,Ne){return F===1?Se[Ne]:Se.readUInt16BE(Ne*F)}let Re;if(O){let Se=-1;for(Re=p;Re<ue;Re++)if(Pe(f,Re)===Pe(h,Se===-1?0:Re-Se)){if(Se===-1&&(Se=Re),Re-Se+1===_e)return Se*F}else Se!==-1&&(Re-=Re-Se),Se=-1}else for(p+_e>ue&&(p=ue-_e),Re=p;Re>=0;Re--){let Se=!0;for(let Ne=0;Ne<_e;Ne++)if(Pe(f,Re+Ne)!==Pe(h,Ne)){Se=!1;break}if(Se)return Re}return-1}i.prototype.includes=function(f,h,p){return this.indexOf(f,h,p)!==-1},i.prototype.indexOf=function(f,h,p){return L(this,f,h,p,!0)},i.prototype.lastIndexOf=function(f,h,p){return L(this,f,h,p,!1)};function R(f,h,p,w){p=Number(p)||0;let O=f.length-p;w?(w=Number(w),w>O&&(w=O)):w=O;let F=h.length;w>F/2&&(w=F/2);let ue;for(ue=0;ue<w;++ue){let _e=parseInt(h.substr(ue*2,2),16);if(X(_e))return ue;f[p+ue]=_e}return ue}function N(f,h,p,w){return x(B(h,f.length-p),f,p,w)}function q(f,h,p,w){return x(D(h),f,p,w)}function G(f,h,p,w){return x(z(h),f,p,w)}function Q(f,h,p,w){return x(te(h,f.length-p),f,p,w)}i.prototype.write=function(f,h,p,w){if(h===void 0)w="utf8",p=this.length,h=0;else if(p===void 0&&typeof h=="string")w=h,p=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(p)?(p=p>>>0,w===void 0&&(w="utf8")):(w=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let O=this.length-h;if((p===void 0||p>O)&&(p=O),f.length>0&&(p<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");let F=!1;for(;;)switch(w){case"hex":return R(this,f,h,p);case"utf8":case"utf-8":return N(this,f,h,p);case"ascii":case"latin1":case"binary":return q(this,f,h,p);case"base64":return G(this,f,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,f,h,p);default:if(F)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),F=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(f,h,p){return h===0&&p===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(h,p))}function W(f,h,p){p=Math.min(f.length,p);let w=[],O=h;for(;O<p;){let F=f[O],ue=null,_e=F>239?4:F>223?3:F>191?2:1;if(O+_e<=p){let Pe,Re,Se,Ne;switch(_e){case 1:F<128&&(ue=F);break;case 2:Pe=f[O+1],(Pe&192)===128&&(Ne=(F&31)<<6|Pe&63,Ne>127&&(ue=Ne));break;case 3:Pe=f[O+1],Re=f[O+2],(Pe&192)===128&&(Re&192)===128&&(Ne=(F&15)<<12|(Pe&63)<<6|Re&63,Ne>2047&&(Ne<55296||Ne>57343)&&(ue=Ne));break;case 4:Pe=f[O+1],Re=f[O+2],Se=f[O+3],(Pe&192)===128&&(Re&192)===128&&(Se&192)===128&&(Ne=(F&15)<<18|(Pe&63)<<12|(Re&63)<<6|Se&63,Ne>65535&&Ne<1114112&&(ue=Ne))}}ue===null?(ue=65533,_e=1):ue>65535&&(ue-=65536,w.push(ue>>>10&1023|55296),ue=56320|ue&1023),w.push(ue),O+=_e}return V(w)}let Y=4096;function V(f){let h=f.length;if(h<=Y)return String.fromCharCode.apply(String,f);let p="",w=0;for(;w<h;)p+=String.fromCharCode.apply(String,f.slice(w,w+=Y));return p}function ae(f,h,p){let w="";p=Math.min(f.length,p);for(let O=h;O<p;++O)w+=String.fromCharCode(f[O]&127);return w}function ne(f,h,p){let w="";p=Math.min(f.length,p);for(let O=h;O<p;++O)w+=String.fromCharCode(f[O]);return w}function j(f,h,p){let w=f.length;(!h||h<0)&&(h=0),(!p||p<0||p>w)&&(p=w);let O="";for(let F=h;F<p;++F)O+=ye[f[F]];return O}function fe(f,h,p){let w=f.slice(h,p),O="";for(let F=0;F<w.length-1;F+=2)O+=String.fromCharCode(w[F]+w[F+1]*256);return O}i.prototype.slice=function(f,h){let p=this.length;f=~~f,h=h===void 0?p:~~h,f<0?(f+=p,f<0&&(f=0)):f>p&&(f=p),h<0?(h+=p,h<0&&(h=0)):h>p&&(h=p),h<f&&(h=f);let w=this.subarray(f,h);return Object.setPrototypeOf(w,i.prototype),w};function ee(f,h,p){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+h>p)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(f,h,p){f=f>>>0,h=h>>>0,p||ee(f,h,this.length);let w=this[f],O=1,F=0;for(;++F<h&&(O*=256);)w+=this[f+F]*O;return w},i.prototype.readUintBE=i.prototype.readUIntBE=function(f,h,p){f=f>>>0,h=h>>>0,p||ee(f,h,this.length);let w=this[f+--h],O=1;for(;h>0&&(O*=256);)w+=this[f+--h]*O;return w},i.prototype.readUint8=i.prototype.readUInt8=function(f,h){return f=f>>>0,h||ee(f,1,this.length),this[f]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(f,h){return f=f>>>0,h||ee(f,2,this.length),this[f]|this[f+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(f,h){return f=f>>>0,h||ee(f,2,this.length),this[f]<<8|this[f+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(f,h){return f=f>>>0,h||ee(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(f,h){return f=f>>>0,h||ee(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},i.prototype.readBigUInt64LE=Te(function(f){f=f>>>0,J(f,"offset");let h=this[f],p=this[f+7];(h===void 0||p===void 0)&&pe(f,this.length-8);let w=h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,O=this[++f]+this[++f]*2**8+this[++f]*2**16+p*2**24;return BigInt(w)+(BigInt(O)<<BigInt(32))}),i.prototype.readBigUInt64BE=Te(function(f){f=f>>>0,J(f,"offset");let h=this[f],p=this[f+7];(h===void 0||p===void 0)&&pe(f,this.length-8);let w=h*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],O=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+p;return(BigInt(w)<<BigInt(32))+BigInt(O)}),i.prototype.readIntLE=function(f,h,p){f=f>>>0,h=h>>>0,p||ee(f,h,this.length);let w=this[f],O=1,F=0;for(;++F<h&&(O*=256);)w+=this[f+F]*O;return O*=128,w>=O&&(w-=Math.pow(2,8*h)),w},i.prototype.readIntBE=function(f,h,p){f=f>>>0,h=h>>>0,p||ee(f,h,this.length);let w=h,O=1,F=this[f+--w];for(;w>0&&(O*=256);)F+=this[f+--w]*O;return O*=128,F>=O&&(F-=Math.pow(2,8*h)),F},i.prototype.readInt8=function(f,h){return f=f>>>0,h||ee(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},i.prototype.readInt16LE=function(f,h){f=f>>>0,h||ee(f,2,this.length);let p=this[f]|this[f+1]<<8;return p&32768?p|4294901760:p},i.prototype.readInt16BE=function(f,h){f=f>>>0,h||ee(f,2,this.length);let p=this[f+1]|this[f]<<8;return p&32768?p|4294901760:p},i.prototype.readInt32LE=function(f,h){return f=f>>>0,h||ee(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},i.prototype.readInt32BE=function(f,h){return f=f>>>0,h||ee(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},i.prototype.readBigInt64LE=Te(function(f){f=f>>>0,J(f,"offset");let h=this[f],p=this[f+7];(h===void 0||p===void 0)&&pe(f,this.length-8);let w=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(p<<24);return(BigInt(w)<<BigInt(32))+BigInt(h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),i.prototype.readBigInt64BE=Te(function(f){f=f>>>0,J(f,"offset");let h=this[f],p=this[f+7];(h===void 0||p===void 0)&&pe(f,this.length-8);let w=(h<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(w)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+p)}),i.prototype.readFloatLE=function(f,h){return f=f>>>0,h||ee(f,4,this.length),n.read(this,f,!0,23,4)},i.prototype.readFloatBE=function(f,h){return f=f>>>0,h||ee(f,4,this.length),n.read(this,f,!1,23,4)},i.prototype.readDoubleLE=function(f,h){return f=f>>>0,h||ee(f,8,this.length),n.read(this,f,!0,52,8)},i.prototype.readDoubleBE=function(f,h){return f=f>>>0,h||ee(f,8,this.length),n.read(this,f,!1,52,8)};function ge(f,h,p,w,O,F){if(!i.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>O||h<F)throw new RangeError('"value" argument is out of bounds');if(p+w>f.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(f,h,p,w){if(f=+f,h=h>>>0,p=p>>>0,!w){let ue=Math.pow(2,8*p)-1;ge(this,f,h,p,ue,0)}let O=1,F=0;for(this[h]=f&255;++F<p&&(O*=256);)this[h+F]=f/O&255;return h+p},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(f,h,p,w){if(f=+f,h=h>>>0,p=p>>>0,!w){let ue=Math.pow(2,8*p)-1;ge(this,f,h,p,ue,0)}let O=p-1,F=1;for(this[h+O]=f&255;--O>=0&&(F*=256);)this[h+O]=f/F&255;return h+p},i.prototype.writeUint8=i.prototype.writeUInt8=function(f,h,p){return f=+f,h=h>>>0,p||ge(this,f,h,1,255,0),this[h]=f&255,h+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(f,h,p){return f=+f,h=h>>>0,p||ge(this,f,h,2,65535,0),this[h]=f&255,this[h+1]=f>>>8,h+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(f,h,p){return f=+f,h=h>>>0,p||ge(this,f,h,2,65535,0),this[h]=f>>>8,this[h+1]=f&255,h+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(f,h,p){return f=+f,h=h>>>0,p||ge(this,f,h,4,4294967295,0),this[h+3]=f>>>24,this[h+2]=f>>>16,this[h+1]=f>>>8,this[h]=f&255,h+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(f,h,p){return f=+f,h=h>>>0,p||ge(this,f,h,4,4294967295,0),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4};function E(f,h,p,w,O){U(h,w,O,f,p,7);let F=Number(h&BigInt(4294967295));f[p++]=F,F=F>>8,f[p++]=F,F=F>>8,f[p++]=F,F=F>>8,f[p++]=F;let ue=Number(h>>BigInt(32)&BigInt(4294967295));return f[p++]=ue,ue=ue>>8,f[p++]=ue,ue=ue>>8,f[p++]=ue,ue=ue>>8,f[p++]=ue,p}function H(f,h,p,w,O){U(h,w,O,f,p,7);let F=Number(h&BigInt(4294967295));f[p+7]=F,F=F>>8,f[p+6]=F,F=F>>8,f[p+5]=F,F=F>>8,f[p+4]=F;let ue=Number(h>>BigInt(32)&BigInt(4294967295));return f[p+3]=ue,ue=ue>>8,f[p+2]=ue,ue=ue>>8,f[p+1]=ue,ue=ue>>8,f[p]=ue,p+8}i.prototype.writeBigUInt64LE=Te(function(f,h=0){return E(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=Te(function(f,h=0){return H(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(f,h,p,w){if(f=+f,h=h>>>0,!w){let _e=Math.pow(2,8*p-1);ge(this,f,h,p,_e-1,-_e)}let O=0,F=1,ue=0;for(this[h]=f&255;++O<p&&(F*=256);)f<0&&ue===0&&this[h+O-1]!==0&&(ue=1),this[h+O]=(f/F>>0)-ue&255;return h+p},i.prototype.writeIntBE=function(f,h,p,w){if(f=+f,h=h>>>0,!w){let _e=Math.pow(2,8*p-1);ge(this,f,h,p,_e-1,-_e)}let O=p-1,F=1,ue=0;for(this[h+O]=f&255;--O>=0&&(F*=256);)f<0&&ue===0&&this[h+O+1]!==0&&(ue=1),this[h+O]=(f/F>>0)-ue&255;return h+p},i.prototype.writeInt8=function(f,h,p){return f=+f,h=h>>>0,p||ge(this,f,h,1,127,-128),f<0&&(f=255+f+1),this[h]=f&255,h+1},i.prototype.writeInt16LE=function(f,h,p){return f=+f,h=h>>>0,p||ge(this,f,h,2,32767,-32768),this[h]=f&255,this[h+1]=f>>>8,h+2},i.prototype.writeInt16BE=function(f,h,p){return f=+f,h=h>>>0,p||ge(this,f,h,2,32767,-32768),this[h]=f>>>8,this[h+1]=f&255,h+2},i.prototype.writeInt32LE=function(f,h,p){return f=+f,h=h>>>0,p||ge(this,f,h,4,2147483647,-2147483648),this[h]=f&255,this[h+1]=f>>>8,this[h+2]=f>>>16,this[h+3]=f>>>24,h+4},i.prototype.writeInt32BE=function(f,h,p){return f=+f,h=h>>>0,p||ge(this,f,h,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4},i.prototype.writeBigInt64LE=Te(function(f,h=0){return E(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=Te(function(f,h=0){return H(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function me(f,h,p,w,O,F){if(p+w>f.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function be(f,h,p,w,O){return h=+h,p=p>>>0,O||me(f,h,p,4),n.write(f,h,p,w,23,4),p+4}i.prototype.writeFloatLE=function(f,h,p){return be(this,f,h,!0,p)},i.prototype.writeFloatBE=function(f,h,p){return be(this,f,h,!1,p)};function he(f,h,p,w,O){return h=+h,p=p>>>0,O||me(f,h,p,8),n.write(f,h,p,w,52,8),p+8}i.prototype.writeDoubleLE=function(f,h,p){return he(this,f,h,!0,p)},i.prototype.writeDoubleBE=function(f,h,p){return he(this,f,h,!1,p)},i.prototype.copy=function(f,h,p,w){if(!i.isBuffer(f))throw new TypeError("argument should be a Buffer");if(p||(p=0),!w&&w!==0&&(w=this.length),h>=f.length&&(h=f.length),h||(h=0),w>0&&w<p&&(w=p),w===p||f.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),f.length-h<w-p&&(w=f.length-h+p);let O=w-p;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,p,w):Uint8Array.prototype.set.call(f,this.subarray(p,w),h),O},i.prototype.fill=function(f,h,p,w){if(typeof f=="string"){if(typeof h=="string"?(w=h,h=0,p=this.length):typeof p=="string"&&(w=p,p=this.length),w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!i.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(f.length===1){let F=f.charCodeAt(0);(w==="utf8"&&F<128||w==="latin1")&&(f=F)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(h<0||this.length<h||this.length<p)throw new RangeError("Out of range index");if(p<=h)return this;h=h>>>0,p=p===void 0?this.length:p>>>0,f||(f=0);let O;if(typeof f=="number")for(O=h;O<p;++O)this[O]=f;else{let F=i.isBuffer(f)?f:i.from(f,w),ue=F.length;if(ue===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(O=0;O<p-h;++O)this[O+h]=F[O%ue]}return this};let M={};function I(f,h,p){M[f]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(w){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:w,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}I("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),I("ERR_INVALID_ARG_TYPE",function(f,h){return`The "${f}" argument must be of type number. Received type ${typeof h}`},TypeError),I("ERR_OUT_OF_RANGE",function(f,h,p){let w=`The value of "${f}" is out of range.`,O=p;return Number.isInteger(p)&&Math.abs(p)>2**32?O=$(String(p)):typeof p=="bigint"&&(O=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(O=$(O)),O+="n"),w+=` It must be ${h}. Received ${O}`,w},RangeError);function $(f){let h="",p=f.length,w=f[0]==="-"?1:0;for(;p>=w+4;p-=3)h=`_${f.slice(p-3,p)}${h}`;return`${f.slice(0,p)}${h}`}function se(f,h,p){J(h,"offset"),(f[h]===void 0||f[h+p]===void 0)&&pe(h,f.length-(p+1))}function U(f,h,p,w,O,F){if(f>p||f<h){let ue=typeof h=="bigint"?"n":"",_e;throw F>3?h===0||h===BigInt(0)?_e=`>= 0${ue} and < 2${ue} ** ${(F+1)*8}${ue}`:_e=`>= -(2${ue} ** ${(F+1)*8-1}${ue}) and < 2 ** ${(F+1)*8-1}${ue}`:_e=`>= ${h}${ue} and <= ${p}${ue}`,new M.ERR_OUT_OF_RANGE("value",_e,f)}se(w,O,F)}function J(f,h){if(typeof f!="number")throw new M.ERR_INVALID_ARG_TYPE(h,"number",f)}function pe(f,h,p){throw Math.floor(f)!==f?(J(f,p),new M.ERR_OUT_OF_RANGE(p||"offset","an integer",f)):h<0?new M.ERR_BUFFER_OUT_OF_BOUNDS:new M.ERR_OUT_OF_RANGE(p||"offset",`>= ${p?1:0} and <= ${h}`,f)}let le=/[^+/0-9A-Za-z-_]/g;function P(f){if(f=f.split("=")[0],f=f.trim().replace(le,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function B(f,h){h=h||1/0;let p,w=f.length,O=null,F=[];for(let ue=0;ue<w;++ue){if(p=f.charCodeAt(ue),p>55295&&p<57344){if(!O){if(p>56319){(h-=3)>-1&&F.push(239,191,189);continue}else if(ue+1===w){(h-=3)>-1&&F.push(239,191,189);continue}O=p;continue}if(p<56320){(h-=3)>-1&&F.push(239,191,189),O=p;continue}p=(O-55296<<10|p-56320)+65536}else O&&(h-=3)>-1&&F.push(239,191,189);if(O=null,p<128){if((h-=1)<0)break;F.push(p)}else if(p<2048){if((h-=2)<0)break;F.push(p>>6|192,p&63|128)}else if(p<65536){if((h-=3)<0)break;F.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((h-=4)<0)break;F.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return F}function D(f){let h=[];for(let p=0;p<f.length;++p)h.push(f.charCodeAt(p)&255);return h}function te(f,h){let p,w,O,F=[];for(let ue=0;ue<f.length&&!((h-=2)<0);++ue)p=f.charCodeAt(ue),w=p>>8,O=p%256,F.push(O),F.push(w);return F}function z(f){return e.toByteArray(P(f))}function x(f,h,p,w){let O;for(O=0;O<w&&!(O+p>=h.length||O>=f.length);++O)h[O+p]=f[O];return O}function K(f,h){return f instanceof h||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===h.name}function X(f){return f!==f}let ye=function(){let f="0123456789abcdef",h=new Array(256);for(let p=0;p<16;++p){let w=p*16;for(let O=0;O<16;++O)h[w+O]=f[p]+f[O]}return h}();function Te(f){return typeof BigInt>"u"?ke:f}function ke(){throw new Error("BigInt not supported")}return At}var Zt,Fi,pn,ji,At,Wi,dt,Bn,Ns,Us,qe=je(()=>{re(),oe(),ie(),Zt={},Fi=!1,pn={},ji=!1,At={},Wi=!1,dt=ac(),dt.Buffer,dt.SlowBuffer,dt.INSPECT_MAX_BYTES,dt.kMaxLength,Bn=dt.Buffer,Ns=dt.INSPECT_MAX_BYTES,Us=dt.kMaxLength}),oe=je(()=>{qe()}),lc=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0});var n=class{constructor(t){this.aliasToTopic={},this.max=t}put(t,o){return o===0||o>this.max?!1:(this.aliasToTopic[o]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};e.default=n}),De=de((e,n)=>{"use strict";re(),oe(),ie(),n.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,o){return t.includes(o)},ArrayPrototypeIndexOf(t,o){return t.indexOf(o)},ArrayPrototypeJoin(t,o){return t.join(o)},ArrayPrototypeMap(t,o){return t.map(o)},ArrayPrototypePop(t,o){return t.pop(o)},ArrayPrototypePush(t,o){return t.push(o)},ArrayPrototypeSlice(t,o,l){return t.slice(o,l)},Error,FunctionPrototypeCall(t,o,...l){return t.call(o,...l)},FunctionPrototypeSymbolHasInstance(t,o){return Function.prototype[Symbol.hasInstance].call(t,o)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,o){return Object.defineProperties(t,o)},ObjectDefineProperty(t,o,l){return Object.defineProperty(t,o,l)},ObjectGetOwnPropertyDescriptor(t,o){return Object.getOwnPropertyDescriptor(t,o)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,o){return Object.setPrototypeOf(t,o)},Promise,PromisePrototypeCatch(t,o){return t.catch(o)},PromisePrototypeThen(t,o,l){return t.then(o,l)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,o){return t.test(o)},SafeSet:Set,String,StringPrototypeSlice(t,o,l){return t.slice(o,l)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,o,l){return t.set(o,l)},Uint8Array}}),yt=de((e,n)=>{"use strict";re(),oe(),ie();var t=(qe(),Ce(We)),o=Object.getPrototypeOf(async function(){}).constructor,l=globalThis.Blob||t.Blob,r=typeof l<"u"?function(s){return s instanceof l}:function(s){return!1},i=class extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);let a="";for(let c=0;c<s.length;c++)a+=`    ${s[c].stack}
`;super(a),this.name="AggregateError",this.errors=s}};n.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(s){let a=!1;return function(...c){a||(a=!0,s.apply(this,c))}},createDeferredPromise:function(){let s,a;return{promise:new Promise((c,u)=>{s=c,a=u}),resolve:s,reject:a}},promisify(s){return new Promise((a,c)=>{s((u,...d)=>u?c(u):a(...d))})},debuglog(){return function(){}},format(s,...a){return s.replace(/%([sdifj])/g,function(...[c,u]){let d=a.shift();return u==="f"?d.toFixed(6):u==="j"?JSON.stringify(d):u==="s"&&typeof d=="object"?`${d.constructor!==Object?d.constructor.name:""} {}`.trim():d.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}},types:{isAsyncFunction(s){return s instanceof o},isArrayBufferView(s){return ArrayBuffer.isView(s)}},isBlob:r},n.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),io=de((e,n)=>{"use strict";re(),oe(),ie();var{AbortController:t,AbortSignal:o}=typeof self<"u"?self:typeof window<"u"?window:void 0;n.exports=t,n.exports.AbortSignal=o,n.exports.default=t}),He=de((e,n)=>{"use strict";re(),oe(),ie();var{format:t,inspect:o,AggregateError:l}=yt(),r=globalThis.AggregateError||l,i=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,c="__node_internal_",u={};function d(v,_){if(!v)throw new u.ERR_INTERNAL_ASSERTION(_)}function m(v){let _="",A=v.length,L=v[0]==="-"?1:0;for(;A>=L+4;A-=3)_=`_${v.slice(A-3,A)}${_}`;return`${v.slice(0,A)}${_}`}function b(v,_,A){if(typeof _=="function")return d(_.length<=A.length,`Code: ${v}; The provided arguments length (${A.length}) does not match the required ones (${_.length}).`),_(...A);let L=(_.match(/%[dfijoOs]/g)||[]).length;return d(L===A.length,`Code: ${v}; The provided arguments length (${A.length}) does not match the required ones (${L}).`),A.length===0?_:t(_,...A)}function y(v,_,A){A||(A=Error);class L extends A{constructor(...R){super(b(v,_,R))}toString(){return`${this.name} [${v}]: ${this.message}`}}Object.defineProperties(L.prototype,{name:{value:A.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${v}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),L.prototype.code=v,L.prototype[i]=!0,u[v]=L}function g(v){let _=c+v.name;return Object.defineProperty(v,"name",{value:_}),v}function T(v,_){if(v&&_&&v!==_){if(Array.isArray(_.errors))return _.errors.push(v),_;let A=new r([_,v],_.message);return A.code=_.code,A}return v||_}var k=class extends Error{constructor(v="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",_);super(v,_),this.code="ABORT_ERR",this.name="AbortError"}};y("ERR_ASSERTION","%s",Error),y("ERR_INVALID_ARG_TYPE",(v,_,A)=>{d(typeof v=="string","'name' must be a string"),Array.isArray(_)||(_=[_]);let L="The ";v.endsWith(" argument")?L+=`${v} `:L+=`"${v}" ${v.includes(".")?"property":"argument"} `,L+="must be ";let S=[],R=[],N=[];for(let G of _)d(typeof G=="string","All expected entries have to be of type string"),s.includes(G)?S.push(G.toLowerCase()):a.test(G)?R.push(G):(d(G!=="object",'The value "object" should be written as "Object"'),N.push(G));if(R.length>0){let G=S.indexOf("object");G!==-1&&(S.splice(S,G,1),R.push("Object"))}if(S.length>0){switch(S.length){case 1:L+=`of type ${S[0]}`;break;case 2:L+=`one of type ${S[0]} or ${S[1]}`;break;default:{let G=S.pop();L+=`one of type ${S.join(", ")}, or ${G}`}}(R.length>0||N.length>0)&&(L+=" or ")}if(R.length>0){switch(R.length){case 1:L+=`an instance of ${R[0]}`;break;case 2:L+=`an instance of ${R[0]} or ${R[1]}`;break;default:{let G=R.pop();L+=`an instance of ${R.join(", ")}, or ${G}`}}N.length>0&&(L+=" or ")}switch(N.length){case 0:break;case 1:N[0].toLowerCase()!==N[0]&&(L+="an "),L+=`${N[0]}`;break;case 2:L+=`one of ${N[0]} or ${N[1]}`;break;default:{let G=N.pop();L+=`one of ${N.join(", ")}, or ${G}`}}if(A==null)L+=`. Received ${A}`;else if(typeof A=="function"&&A.name)L+=`. Received function ${A.name}`;else if(typeof A=="object"){var q;if((q=A.constructor)!==null&&q!==void 0&&q.name)L+=`. Received an instance of ${A.constructor.name}`;else{let G=o(A,{depth:-1});L+=`. Received ${G}`}}else{let G=o(A,{colors:!1});G.length>25&&(G=`${G.slice(0,25)}...`),L+=`. Received type ${typeof A} (${G})`}return L},TypeError),y("ERR_INVALID_ARG_VALUE",(v,_,A="is invalid")=>{let L=o(_);return L.length>128&&(L=L.slice(0,128)+"..."),`The ${v.includes(".")?"property":"argument"} '${v}' ${A}. Received ${L}`},TypeError),y("ERR_INVALID_RETURN_VALUE",(v,_,A)=>{var L;let S=A!=null&&(L=A.constructor)!==null&&L!==void 0&&L.name?`instance of ${A.constructor.name}`:`type ${typeof A}`;return`Expected ${v} to be returned from the "${_}" function but got ${S}.`},TypeError),y("ERR_MISSING_ARGS",(...v)=>{d(v.length>0,"At least one arg needs to be specified");let _,A=v.length;switch(v=(Array.isArray(v)?v:[v]).map(L=>`"${L}"`).join(" or "),A){case 1:_+=`The ${v[0]} argument`;break;case 2:_+=`The ${v[0]} and ${v[1]} arguments`;break;default:{let L=v.pop();_+=`The ${v.join(", ")}, and ${L} arguments`}break}return`${_} must be specified`},TypeError),y("ERR_OUT_OF_RANGE",(v,_,A)=>{d(_,'Missing "range" argument');let L;return Number.isInteger(A)&&Math.abs(A)>2**32?L=m(String(A)):typeof A=="bigint"?(L=String(A),(A>2n**32n||A<-(2n**32n))&&(L=m(L)),L+="n"):L=o(A),`The value of "${v}" is out of range. It must be ${_}. Received ${L}`},RangeError),y("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),y("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),y("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),y("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),y("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),y("ERR_STREAM_WRITE_AFTER_END","write after end",Error),y("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),n.exports={AbortError:k,aggregateTwoErrors:g(T),hideStackFrames:g,codes:u}}),qn=de((e,n)=>{"use strict";re(),oe(),ie();var{ArrayIsArray:t,ArrayPrototypeIncludes:o,ArrayPrototypeJoin:l,ArrayPrototypeMap:r,NumberIsInteger:i,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:c,NumberParseInt:u,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:m,String:b,StringPrototypeToUpperCase:y,StringPrototypeTrim:g}=De(),{hideStackFrames:T,codes:{ERR_SOCKET_BAD_PORT:k,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:A,ERR_UNKNOWN_SIGNAL:L}}=He(),{normalizeEncoding:S}=yt(),{isAsyncFunction:R,isArrayBufferView:N}=yt().types,q={};function G(x){return x===(x|0)}function Q(x){return x===x>>>0}var C=/^[0-7]+$/,W="must be a 32-bit unsigned integer or an octal string";function Y(x,K,X){if(typeof x>"u"&&(x=X),typeof x=="string"){if(m(C,x)===null)throw new _(K,x,W);x=u(x,8)}return ne(x,K),x}var V=T((x,K,X=c,ye=a)=>{if(typeof x!="number")throw new v(K,"number",x);if(!i(x))throw new A(K,"an integer",x);if(x<X||x>ye)throw new A(K,`>= ${X} && <= ${ye}`,x)}),ae=T((x,K,X=-2147483648,ye=2147483647)=>{if(typeof x!="number")throw new v(K,"number",x);if(!i(x))throw new A(K,"an integer",x);if(x<X||x>ye)throw new A(K,`>= ${X} && <= ${ye}`,x)}),ne=T((x,K,X=!1)=>{if(typeof x!="number")throw new v(K,"number",x);if(!i(x))throw new A(K,"an integer",x);let ye=X?1:0,Te=4294967295;if(x<ye||x>Te)throw new A(K,`>= ${ye} && <= ${Te}`,x)});function j(x,K){if(typeof x!="string")throw new v(K,"string",x)}function fe(x,K,X=void 0,ye){if(typeof x!="number")throw new v(K,"number",x);if(X!=null&&x<X||ye!=null&&x>ye||(X!=null||ye!=null)&&s(x))throw new A(K,`${X!=null?`>= ${X}`:""}${X!=null&&ye!=null?" && ":""}${ye!=null?`<= ${ye}`:""}`,x)}var ee=T((x,K,X)=>{if(!o(X,x)){let ye="must be one of: "+l(r(X,Te=>typeof Te=="string"?`'${Te}'`:b(Te)),", ");throw new _(K,x,ye)}});function ge(x,K){if(typeof x!="boolean")throw new v(K,"boolean",x)}function E(x,K,X){return x==null||!d(x,K)?X:x[K]}var H=T((x,K,X=null)=>{let ye=E(X,"allowArray",!1),Te=E(X,"allowFunction",!1);if(!E(X,"nullable",!1)&&x===null||!ye&&t(x)||typeof x!="object"&&(!Te||typeof x!="function"))throw new v(K,"Object",x)}),me=T((x,K)=>{if(x!=null&&typeof x!="object"&&typeof x!="function")throw new v(K,"a dictionary",x)}),be=T((x,K,X=0)=>{if(!t(x))throw new v(K,"Array",x);if(x.length<X){let ye=`must be longer than ${X}`;throw new _(K,x,ye)}});function he(x,K){be(x,K);for(let X=0;X<x.length;X++)j(x[X],`${K}[${X}]`)}function M(x,K){be(x,K);for(let X=0;X<x.length;X++)ge(x[X],`${K}[${X}]`)}function I(x,K="signal"){if(j(x,K),q[x]===void 0)throw q[y(x)]!==void 0?new L(x+" (signals must use all capital letters)"):new L(x)}var $=T((x,K="buffer")=>{if(!N(x))throw new v(K,["Buffer","TypedArray","DataView"],x)});function se(x,K){let X=S(K),ye=x.length;if(X==="hex"&&ye%2!==0)throw new _("encoding",K,`is invalid for data of length ${ye}`)}function U(x,K="Port",X=!0){if(typeof x!="number"&&typeof x!="string"||typeof x=="string"&&g(x).length===0||+x!==+x>>>0||x>65535||x===0&&!X)throw new k(K,x,X);return x|0}var J=T((x,K)=>{if(x!==void 0&&(x===null||typeof x!="object"||!("aborted"in x)))throw new v(K,"AbortSignal",x)}),pe=T((x,K)=>{if(typeof x!="function")throw new v(K,"Function",x)}),le=T((x,K)=>{if(typeof x!="function"||R(x))throw new v(K,"Function",x)}),P=T((x,K)=>{if(x!==void 0)throw new v(K,"undefined",x)});function B(x,K,X){if(!o(X,x))throw new v(K,`('${l(X,"|")}')`,x)}var D=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function te(x,K){if(typeof x>"u"||!m(D,x))throw new _(K,x,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function z(x){if(typeof x=="string")return te(x,"hints"),x;if(t(x)){let K=x.length,X="";if(K===0)return X;for(let ye=0;ye<K;ye++){let Te=x[ye];te(Te,"hints"),X+=Te,ye!==K-1&&(X+=", ")}return X}throw new _("hints",x,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}n.exports={isInt32:G,isUint32:Q,parseFileMode:Y,validateArray:be,validateStringArray:he,validateBooleanArray:M,validateBoolean:ge,validateBuffer:$,validateDictionary:me,validateEncoding:se,validateFunction:pe,validateInt32:ae,validateInteger:V,validateNumber:fe,validateObject:H,validateOneOf:ee,validatePlainFunction:le,validatePort:U,validateSignalName:I,validateString:j,validateUint32:ne,validateUndefined:P,validateUnion:B,validateAbortSignal:J,validateLinkHeaderValue:z}}),Kt=de((e,n)=>{re(),oe(),ie();var t=n.exports={},o,l;function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=r}catch{o=r}try{typeof clearTimeout=="function"?l=clearTimeout:l=i}catch{l=i}})();function s(k){if(o===setTimeout)return setTimeout(k,0);if((o===r||!o)&&setTimeout)return o=setTimeout,setTimeout(k,0);try{return o(k,0)}catch{try{return o.call(null,k,0)}catch{return o.call(this,k,0)}}}function a(k){if(l===clearTimeout)return clearTimeout(k);if((l===i||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(k);try{return l(k)}catch{try{return l.call(null,k)}catch{return l.call(this,k)}}}var c=[],u=!1,d,m=-1;function b(){!u||!d||(u=!1,d.length?c=d.concat(c):m=-1,c.length&&y())}function y(){if(!u){var k=s(b);u=!0;for(var v=c.length;v;){for(d=c,c=[];++m<v;)d&&d[m].run();m=-1,v=c.length}d=null,u=!1,a(k)}}t.nextTick=function(k){var v=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)v[_-1]=arguments[_];c.push(new g(k,v)),c.length===1&&!u&&s(y)};function g(k,v){this.fun=k,this.array=v}g.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function T(){}t.on=T,t.addListener=T,t.once=T,t.off=T,t.removeListener=T,t.removeAllListeners=T,t.emit=T,t.prependListener=T,t.prependOnceListener=T,t.listeners=function(k){return[]},t.binding=function(k){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(k){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),kt=de((e,n)=>{"use strict";re(),oe(),ie();var{Symbol:t,SymbolAsyncIterator:o,SymbolIterator:l,SymbolFor:r}=De(),i=t("kDestroyed"),s=t("kIsErrored"),a=t("kIsReadable"),c=t("kIsDisturbed"),u=r("nodejs.webstream.isClosedPromise"),d=r("nodejs.webstream.controllerErrorFunction");function m(E,H=!1){var me;return!!(E&&typeof E.pipe=="function"&&typeof E.on=="function"&&(!H||typeof E.pause=="function"&&typeof E.resume=="function")&&(!E._writableState||((me=E._readableState)===null||me===void 0?void 0:me.readable)!==!1)&&(!E._writableState||E._readableState))}function b(E){var H;return!!(E&&typeof E.write=="function"&&typeof E.on=="function"&&(!E._readableState||((H=E._writableState)===null||H===void 0?void 0:H.writable)!==!1))}function y(E){return!!(E&&typeof E.pipe=="function"&&E._readableState&&typeof E.on=="function"&&typeof E.write=="function")}function g(E){return E&&(E._readableState||E._writableState||typeof E.write=="function"&&typeof E.on=="function"||typeof E.pipe=="function"&&typeof E.on=="function")}function T(E){return!!(E&&!g(E)&&typeof E.pipeThrough=="function"&&typeof E.getReader=="function"&&typeof E.cancel=="function")}function k(E){return!!(E&&!g(E)&&typeof E.getWriter=="function"&&typeof E.abort=="function")}function v(E){return!!(E&&!g(E)&&typeof E.readable=="object"&&typeof E.writable=="object")}function _(E){return T(E)||k(E)||v(E)}function A(E,H){return E==null?!1:H===!0?typeof E[o]=="function":H===!1?typeof E[l]=="function":typeof E[o]=="function"||typeof E[l]=="function"}function L(E){if(!g(E))return null;let H=E._writableState,me=E._readableState,be=H||me;return!!(E.destroyed||E[i]||be!=null&&be.destroyed)}function S(E){if(!b(E))return null;if(E.writableEnded===!0)return!0;let H=E._writableState;return H!=null&&H.errored?!1:typeof H?.ended!="boolean"?null:H.ended}function R(E,H){if(!b(E))return null;if(E.writableFinished===!0)return!0;let me=E._writableState;return me!=null&&me.errored?!1:typeof me?.finished!="boolean"?null:!!(me.finished||H===!1&&me.ended===!0&&me.length===0)}function N(E){if(!m(E))return null;if(E.readableEnded===!0)return!0;let H=E._readableState;return!H||H.errored?!1:typeof H?.ended!="boolean"?null:H.ended}function q(E,H){if(!m(E))return null;let me=E._readableState;return me!=null&&me.errored?!1:typeof me?.endEmitted!="boolean"?null:!!(me.endEmitted||H===!1&&me.ended===!0&&me.length===0)}function G(E){return E&&E[a]!=null?E[a]:typeof E?.readable!="boolean"?null:L(E)?!1:m(E)&&E.readable&&!q(E)}function Q(E){return typeof E?.writable!="boolean"?null:L(E)?!1:b(E)&&E.writable&&!S(E)}function C(E,H){return g(E)?L(E)?!0:!(H?.readable!==!1&&G(E)||H?.writable!==!1&&Q(E)):null}function W(E){var H,me;return g(E)?E.writableErrored?E.writableErrored:(H=(me=E._writableState)===null||me===void 0?void 0:me.errored)!==null&&H!==void 0?H:null:null}function Y(E){var H,me;return g(E)?E.readableErrored?E.readableErrored:(H=(me=E._readableState)===null||me===void 0?void 0:me.errored)!==null&&H!==void 0?H:null:null}function V(E){if(!g(E))return null;if(typeof E.closed=="boolean")return E.closed;let H=E._writableState,me=E._readableState;return typeof H?.closed=="boolean"||typeof me?.closed=="boolean"?H?.closed||me?.closed:typeof E._closed=="boolean"&&ae(E)?E._closed:null}function ae(E){return typeof E._closed=="boolean"&&typeof E._defaultKeepAlive=="boolean"&&typeof E._removedConnection=="boolean"&&typeof E._removedContLen=="boolean"}function ne(E){return typeof E._sent100=="boolean"&&ae(E)}function j(E){var H;return typeof E._consuming=="boolean"&&typeof E._dumped=="boolean"&&((H=E.req)===null||H===void 0?void 0:H.upgradeOrConnect)===void 0}function fe(E){if(!g(E))return null;let H=E._writableState,me=E._readableState,be=H||me;return!be&&ne(E)||!!(be&&be.autoDestroy&&be.emitClose&&be.closed===!1)}function ee(E){var H;return!!(E&&((H=E[c])!==null&&H!==void 0?H:E.readableDidRead||E.readableAborted))}function ge(E){var H,me,be,he,M,I,$,se,U,J;return!!(E&&((H=(me=(be=(he=(M=(I=E[s])!==null&&I!==void 0?I:E.readableErrored)!==null&&M!==void 0?M:E.writableErrored)!==null&&he!==void 0?he:($=E._readableState)===null||$===void 0?void 0:$.errorEmitted)!==null&&be!==void 0?be:(se=E._writableState)===null||se===void 0?void 0:se.errorEmitted)!==null&&me!==void 0?me:(U=E._readableState)===null||U===void 0?void 0:U.errored)!==null&&H!==void 0?H:!((J=E._writableState)===null||J===void 0)&&J.errored))}n.exports={kDestroyed:i,isDisturbed:ee,kIsDisturbed:c,isErrored:ge,kIsErrored:s,isReadable:G,kIsReadable:a,kIsClosedPromise:u,kControllerErrorFunction:d,isClosed:V,isDestroyed:L,isDuplexNodeStream:y,isFinished:C,isIterable:A,isReadableNodeStream:m,isReadableStream:T,isReadableEnded:N,isReadableFinished:q,isReadableErrored:Y,isNodeStream:g,isWebStream:_,isWritable:Q,isWritableNodeStream:b,isWritableStream:k,isWritableEnded:S,isWritableFinished:R,isWritableErrored:W,isServerRequest:j,isServerResponse:ne,willEmitClose:fe,isTransformStream:v}}),Ct=de((e,n)=>{re(),oe(),ie();var t=Kt(),{AbortError:o,codes:l}=He(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:i}=l,{kEmptyObject:s,once:a}=yt(),{validateAbortSignal:c,validateFunction:u,validateObject:d,validateBoolean:m}=qn(),{Promise:b,PromisePrototypeThen:y}=De(),{isClosed:g,isReadable:T,isReadableNodeStream:k,isReadableStream:v,isReadableFinished:_,isReadableErrored:A,isWritable:L,isWritableNodeStream:S,isWritableStream:R,isWritableFinished:N,isWritableErrored:q,isNodeStream:G,willEmitClose:Q,kIsClosedPromise:C}=kt();function W(j){return j.setHeader&&typeof j.abort=="function"}var Y=()=>{};function V(j,fe,ee){var ge,E;if(arguments.length===2?(ee=fe,fe=s):fe==null?fe=s:d(fe,"options"),u(ee,"callback"),c(fe.signal,"options.signal"),ee=a(ee),v(j)||R(j))return ae(j,fe,ee);if(!G(j))throw new r("stream",["ReadableStream","WritableStream","Stream"],j);let H=(ge=fe.readable)!==null&&ge!==void 0?ge:k(j),me=(E=fe.writable)!==null&&E!==void 0?E:S(j),be=j._writableState,he=j._readableState,M=()=>{j.writable||se()},I=Q(j)&&k(j)===H&&S(j)===me,$=N(j,!1),se=()=>{$=!0,j.destroyed&&(I=!1),!(I&&(!j.readable||H))&&(!H||U)&&ee.call(j)},U=_(j,!1),J=()=>{U=!0,j.destroyed&&(I=!1),!(I&&(!j.writable||me))&&(!me||$)&&ee.call(j)},pe=z=>{ee.call(j,z)},le=g(j),P=()=>{le=!0;let z=q(j)||A(j);if(z&&typeof z!="boolean")return ee.call(j,z);if(H&&!U&&k(j,!0)&&!_(j,!1))return ee.call(j,new i);if(me&&!$&&!N(j,!1))return ee.call(j,new i);ee.call(j)},B=()=>{le=!0;let z=q(j)||A(j);if(z&&typeof z!="boolean")return ee.call(j,z);ee.call(j)},D=()=>{j.req.on("finish",se)};W(j)?(j.on("complete",se),I||j.on("abort",P),j.req?D():j.on("request",D)):me&&!be&&(j.on("end",M),j.on("close",M)),!I&&typeof j.aborted=="boolean"&&j.on("aborted",P),j.on("end",J),j.on("finish",se),fe.error!==!1&&j.on("error",pe),j.on("close",P),le?t.nextTick(P):be!=null&&be.errorEmitted||he!=null&&he.errorEmitted?I||t.nextTick(B):(!H&&(!I||T(j))&&($||L(j)===!1)||!me&&(!I||L(j))&&(U||T(j)===!1)||he&&j.req&&j.aborted)&&t.nextTick(B);let te=()=>{ee=Y,j.removeListener("aborted",P),j.removeListener("complete",se),j.removeListener("abort",P),j.removeListener("request",D),j.req&&j.req.removeListener("finish",se),j.removeListener("end",M),j.removeListener("close",M),j.removeListener("finish",se),j.removeListener("end",J),j.removeListener("error",pe),j.removeListener("close",P)};if(fe.signal&&!le){let z=()=>{let x=ee;te(),x.call(j,new o(void 0,{cause:fe.signal.reason}))};if(fe.signal.aborted)t.nextTick(z);else{let x=ee;ee=a((...K)=>{fe.signal.removeEventListener("abort",z),x.apply(j,K)}),fe.signal.addEventListener("abort",z)}}return te}function ae(j,fe,ee){let ge=!1,E=Y;if(fe.signal)if(E=()=>{ge=!0,ee.call(j,new o(void 0,{cause:fe.signal.reason}))},fe.signal.aborted)t.nextTick(E);else{let me=ee;ee=a((...be)=>{fe.signal.removeEventListener("abort",E),me.apply(j,be)}),fe.signal.addEventListener("abort",E)}let H=(...me)=>{ge||t.nextTick(()=>ee.apply(j,me))};return y(j[C].promise,H,H),Y}function ne(j,fe){var ee;let ge=!1;return fe===null&&(fe=s),(ee=fe)!==null&&ee!==void 0&&ee.cleanup&&(m(fe.cleanup,"cleanup"),ge=fe.cleanup),new b((E,H)=>{let me=V(j,fe,be=>{ge&&me(),be?H(be):E()})})}n.exports=V,n.exports.finished=ne}),tn=de((e,n)=>{"use strict";re(),oe(),ie();var t=Kt(),{aggregateTwoErrors:o,codes:{ERR_MULTIPLE_CALLBACK:l},AbortError:r}=He(),{Symbol:i}=De(),{kDestroyed:s,isDestroyed:a,isFinished:c,isServerRequest:u}=kt(),d=i("kDestroy"),m=i("kConstruct");function b(C,W,Y){C&&(C.stack,W&&!W.errored&&(W.errored=C),Y&&!Y.errored&&(Y.errored=C))}function y(C,W){let Y=this._readableState,V=this._writableState,ae=V||Y;return V!=null&&V.destroyed||Y!=null&&Y.destroyed?(typeof W=="function"&&W(),this):(b(C,V,Y),V&&(V.destroyed=!0),Y&&(Y.destroyed=!0),ae.constructed?g(this,C,W):this.once(d,function(ne){g(this,o(ne,C),W)}),this)}function g(C,W,Y){let V=!1;function ae(ne){if(V)return;V=!0;let j=C._readableState,fe=C._writableState;b(ne,fe,j),fe&&(fe.closed=!0),j&&(j.closed=!0),typeof Y=="function"&&Y(ne),ne?t.nextTick(T,C,ne):t.nextTick(k,C)}try{C._destroy(W||null,ae)}catch(ne){ae(ne)}}function T(C,W){v(C,W),k(C)}function k(C){let W=C._readableState,Y=C._writableState;Y&&(Y.closeEmitted=!0),W&&(W.closeEmitted=!0),(Y!=null&&Y.emitClose||W!=null&&W.emitClose)&&C.emit("close")}function v(C,W){let Y=C._readableState,V=C._writableState;V!=null&&V.errorEmitted||Y!=null&&Y.errorEmitted||(V&&(V.errorEmitted=!0),Y&&(Y.errorEmitted=!0),C.emit("error",W))}function _(){let C=this._readableState,W=this._writableState;C&&(C.constructed=!0,C.closed=!1,C.closeEmitted=!1,C.destroyed=!1,C.errored=null,C.errorEmitted=!1,C.reading=!1,C.ended=C.readable===!1,C.endEmitted=C.readable===!1),W&&(W.constructed=!0,W.destroyed=!1,W.closed=!1,W.closeEmitted=!1,W.errored=null,W.errorEmitted=!1,W.finalCalled=!1,W.prefinished=!1,W.ended=W.writable===!1,W.ending=W.writable===!1,W.finished=W.writable===!1)}function A(C,W,Y){let V=C._readableState,ae=C._writableState;if(ae!=null&&ae.destroyed||V!=null&&V.destroyed)return this;V!=null&&V.autoDestroy||ae!=null&&ae.autoDestroy?C.destroy(W):W&&(W.stack,ae&&!ae.errored&&(ae.errored=W),V&&!V.errored&&(V.errored=W),Y?t.nextTick(v,C,W):v(C,W))}function L(C,W){if(typeof C._construct!="function")return;let Y=C._readableState,V=C._writableState;Y&&(Y.constructed=!1),V&&(V.constructed=!1),C.once(m,W),!(C.listenerCount(m)>1)&&t.nextTick(S,C)}function S(C){let W=!1;function Y(V){if(W){A(C,V??new l);return}W=!0;let ae=C._readableState,ne=C._writableState,j=ne||ae;ae&&(ae.constructed=!0),ne&&(ne.constructed=!0),j.destroyed?C.emit(d,V):V?A(C,V,!0):t.nextTick(R,C)}try{C._construct(V=>{t.nextTick(Y,V)})}catch(V){t.nextTick(Y,V)}}function R(C){C.emit(m)}function N(C){return C?.setHeader&&typeof C.abort=="function"}function q(C){C.emit("close")}function G(C,W){C.emit("error",W),t.nextTick(q,C)}function Q(C,W){!C||a(C)||(!W&&!c(C)&&(W=new r),u(C)?(C.socket=null,C.destroy(W)):N(C)?C.abort():N(C.req)?C.req.abort():typeof C.destroy=="function"?C.destroy(W):typeof C.close=="function"?C.close():W?t.nextTick(G,C,W):t.nextTick(q,C),C.destroyed||(C[s]=!0))}n.exports={construct:L,destroyer:Q,destroy:y,undestroy:_,errorOrDestroy:A}});function Ie(){Ie.init.call(this)}function Nn(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function Ls(e){return e._maxListeners===void 0?Ie.defaultMaxListeners:e._maxListeners}function Lo(e,n,t,o){var l,r,i,s;if(Nn(t),(r=e._events)===void 0?(r=e._events=Object.create(null),e._eventsCount=0):(r.newListener!==void 0&&(e.emit("newListener",n,t.listener?t.listener:t),r=e._events),i=r[n]),i===void 0)i=r[n]=t,++e._eventsCount;else if(typeof i=="function"?i=r[n]=o?[t,i]:[i,t]:o?i.unshift(t):i.push(t),(l=Ls(e))>0&&i.length>l&&!i.warned){i.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=n,a.count=i.length,s=a,console&&console.warn&&console.warn(s)}return e}function cc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xo(e,n,t){var o={fired:!1,wrapFn:void 0,target:e,type:n,listener:t},l=cc.bind(o);return l.listener=t,o.wrapFn=l,l}function Bo(e,n,t){var o=e._events;if(o===void 0)return[];var l=o[n];return l===void 0?[]:typeof l=="function"?t?[l.listener||l]:[l]:t?function(r){for(var i=new Array(r.length),s=0;s<i.length;++s)i[s]=r[s].listener||r[s];return i}(l):xs(l,l.length)}function Do(e){var n=this._events;if(n!==void 0){var t=n[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function xs(e,n){for(var t=new Array(n),o=0;o<n;++o)t[o]=e[o];return t}var Fo,jo,Nt,wr,Sr,Er,Ke,Wo=je(()=>{re(),oe(),ie(),Nt=typeof Reflect=="object"?Reflect:null,wr=Nt&&typeof Nt.apply=="function"?Nt.apply:function(e,n,t){return Function.prototype.apply.call(e,n,t)},jo=Nt&&typeof Nt.ownKeys=="function"?Nt.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Sr=Number.isNaN||function(e){return e!=e},Fo=Ie,Ie.EventEmitter=Ie,Ie.prototype._events=void 0,Ie.prototype._eventsCount=0,Ie.prototype._maxListeners=void 0,Er=10,Object.defineProperty(Ie,"defaultMaxListeners",{enumerable:!0,get:function(){return Er},set:function(e){if(typeof e!="number"||e<0||Sr(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Er=e}}),Ie.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ie.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Sr(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Ie.prototype.getMaxListeners=function(){return Ls(this)},Ie.prototype.emit=function(e){for(var n=[],t=1;t<arguments.length;t++)n.push(arguments[t]);var o=e==="error",l=this._events;if(l!==void 0)o=o&&l.error===void 0;else if(!o)return!1;if(o){var r;if(n.length>0&&(r=n[0]),r instanceof Error)throw r;var i=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw i.context=r,i}var s=l[e];if(s===void 0)return!1;if(typeof s=="function")wr(s,this,n);else{var a=s.length,c=xs(s,a);for(t=0;t<a;++t)wr(c[t],this,n)}return!0},Ie.prototype.addListener=function(e,n){return Lo(this,e,n,!1)},Ie.prototype.on=Ie.prototype.addListener,Ie.prototype.prependListener=function(e,n){return Lo(this,e,n,!0)},Ie.prototype.once=function(e,n){return Nn(n),this.on(e,xo(this,e,n)),this},Ie.prototype.prependOnceListener=function(e,n){return Nn(n),this.prependListener(e,xo(this,e,n)),this},Ie.prototype.removeListener=function(e,n){var t,o,l,r,i;if(Nn(n),(o=this._events)===void 0)return this;if((t=o[e])===void 0)return this;if(t===n||t.listener===n)--this._eventsCount==0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,t.listener||n));else if(typeof t!="function"){for(l=-1,r=t.length-1;r>=0;r--)if(t[r]===n||t[r].listener===n){i=t[r].listener,l=r;break}if(l<0)return this;l===0?t.shift():function(s,a){for(;a+1<s.length;a++)s[a]=s[a+1];s.pop()}(t,l),t.length===1&&(o[e]=t[0]),o.removeListener!==void 0&&this.emit("removeListener",e,i||n)}return this},Ie.prototype.off=Ie.prototype.removeListener,Ie.prototype.removeAllListeners=function(e){var n,t,o;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[e]),this;if(arguments.length===0){var l,r=Object.keys(t);for(o=0;o<r.length;++o)(l=r[o])!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(n=t[e])=="function")this.removeListener(e,n);else if(n!==void 0)for(o=n.length-1;o>=0;o--)this.removeListener(e,n[o]);return this},Ie.prototype.listeners=function(e){return Bo(this,e,!0)},Ie.prototype.rawListeners=function(e){return Bo(this,e,!1)},Ie.listenerCount=function(e,n){return typeof e.listenerCount=="function"?e.listenerCount(n):Do.call(e,n)},Ie.prototype.listenerCount=Do,Ie.prototype.eventNames=function(){return this._eventsCount>0?jo(this._events):[]},Ke=Fo,Ke.EventEmitter,Ke.defaultMaxListeners,Ke.init,Ke.listenerCount,Ke.EventEmitter,Ke.defaultMaxListeners,Ke.init,Ke.listenerCount}),Jt={};Gt(Jt,{EventEmitter:()=>Bs,default:()=>Ke,defaultMaxListeners:()=>Ds,init:()=>Fs,listenerCount:()=>js,on:()=>Ws,once:()=>qs});var Bs,Ds,Fs,js,Ws,qs,nn=je(()=>{re(),oe(),ie(),Wo(),Wo(),Ke.once=function(e,n){return new Promise((t,o)=>{function l(...i){r!==void 0&&e.removeListener("error",r),t(i)}let r;n!=="error"&&(r=i=>{e.removeListener(name,l),o(i)},e.once("error",r)),e.once(n,l)})},Ke.on=function(e,n){let t=[],o=[],l=null,r=!1,i={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(l){let u=Promise.reject(l);return l=null,u}return r?createIterResult(void 0,!0):new Promise((u,d)=>o.push({resolve:u,reject:d}))},async return(){e.removeListener(n,s),e.removeListener("error",a),r=!0;for(let c of o)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){l=c,e.removeListener(n,s),e.removeListener("error",a)},[Symbol.asyncIterator](){return this}};return e.on(n,s),e.on("error",a),i;function s(...c){let u=o.shift();u?u.resolve(createIterResult(c,!1)):t.push(c)}function a(c){r=!0;let u=o.shift();u?u.reject(c):l=c,i.return()}},{EventEmitter:Bs,defaultMaxListeners:Ds,init:Fs,listenerCount:js,on:Ws,once:qs}=Ke}),oo=de((e,n)=>{"use strict";re(),oe(),ie();var{ArrayIsArray:t,ObjectSetPrototypeOf:o}=De(),{EventEmitter:l}=(nn(),Ce(Jt));function r(s){l.call(this,s)}o(r.prototype,l.prototype),o(r,l),r.prototype.pipe=function(s,a){let c=this;function u(k){s.writable&&s.write(k)===!1&&c.pause&&c.pause()}c.on("data",u);function d(){c.readable&&c.resume&&c.resume()}s.on("drain",d),!s._isStdio&&(!a||a.end!==!1)&&(c.on("end",b),c.on("close",y));let m=!1;function b(){m||(m=!0,s.end())}function y(){m||(m=!0,typeof s.destroy=="function"&&s.destroy())}function g(k){T(),l.listenerCount(this,"error")===0&&this.emit("error",k)}i(c,"error",g),i(s,"error",g);function T(){c.removeListener("data",u),s.removeListener("drain",d),c.removeListener("end",b),c.removeListener("close",y),c.removeListener("error",g),s.removeListener("error",g),c.removeListener("end",T),c.removeListener("close",T),s.removeListener("close",T)}return c.on("end",T),c.on("close",T),s.on("close",T),s.emit("pipe",c),s};function i(s,a,c){if(typeof s.prependListener=="function")return s.prependListener(a,c);!s._events||!s._events[a]?s.on(a,c):t(s._events[a])?s._events[a].unshift(c):s._events[a]=[c,s._events[a]]}n.exports={Stream:r,prependListener:i}}),Vn=de((e,n)=>{"use strict";re(),oe(),ie();var{AbortError:t,codes:o}=He(),{isNodeStream:l,isWebStream:r,kControllerErrorFunction:i}=kt(),s=Ct(),{ERR_INVALID_ARG_TYPE:a}=o,c=(u,d)=>{if(typeof u!="object"||!("aborted"in u))throw new a(d,"AbortSignal",u)};n.exports.addAbortSignal=function(u,d){if(c(u,"signal"),!l(d)&&!r(d))throw new a("stream",["ReadableStream","WritableStream","Stream"],d);return n.exports.addAbortSignalNoValidate(u,d)},n.exports.addAbortSignalNoValidate=function(u,d){if(typeof u!="object"||!("aborted"in u))return d;let m=l(d)?()=>{d.destroy(new t(void 0,{cause:u.reason}))}:()=>{d[i](new t(void 0,{cause:u.reason}))};return u.aborted?m():(u.addEventListener("abort",m),s(d,()=>u.removeEventListener("abort",m))),d}}),uc=de((e,n)=>{"use strict";re(),oe(),ie();var{StringPrototypeSlice:t,SymbolIterator:o,TypedArrayPrototypeSet:l,Uint8Array:r}=De(),{Buffer:i}=(qe(),Ce(We)),{inspect:s}=yt();n.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){let c={data:a,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(a){let c={data:a,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}shift(){if(this.length===0)return;let a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let c=this.head,u=""+c.data;for(;(c=c.next)!==null;)u+=a+c.data;return u}concat(a){if(this.length===0)return i.alloc(0);let c=i.allocUnsafe(a>>>0),u=this.head,d=0;for(;u;)l(c,u.data,d),d+=u.data.length,u=u.next;return c}consume(a,c){let u=this.head.data;if(a<u.length){let d=u.slice(0,a);return this.head.data=u.slice(a),d}return a===u.length?this.shift():c?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[o](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let c="",u=this.head,d=0;do{let m=u.data;if(a>m.length)c+=m,a-=m.length;else{a===m.length?(c+=m,++d,u.next?this.head=u.next:this.head=this.tail=null):(c+=t(m,0,a),this.head=u,u.data=t(m,a));break}++d}while((u=u.next)!==null);return this.length-=d,c}_getBuffer(a){let c=i.allocUnsafe(a),u=a,d=this.head,m=0;do{let b=d.data;if(a>b.length)l(c,b,u-a),a-=b.length;else{a===b.length?(l(c,b,u-a),++m,d.next?this.head=d.next:this.head=this.tail=null):(l(c,new r(b.buffer,b.byteOffset,a),u-a),this.head=d,d.data=b.slice(a));break}++m}while((d=d.next)!==null);return this.length-=m,c}[Symbol.for("nodejs.util.inspect.custom")](a,c){return s(this,{...c,depth:0,customInspect:!1})}}}),so=de((e,n)=>{"use strict";re(),oe(),ie();var{MathFloor:t,NumberIsInteger:o}=De(),{ERR_INVALID_ARG_VALUE:l}=He().codes;function r(a,c,u){return a.highWaterMark!=null?a.highWaterMark:c?a[u]:null}function i(a){return a?16:16*1024}function s(a,c,u,d){let m=r(c,d,u);if(m!=null){if(!o(m)||m<0){let b=d?`options.${u}`:"options.highWaterMark";throw new l(b,m)}return t(m)}return i(a.objectMode)}n.exports={getHighWaterMark:s,getDefaultHighWaterMark:i}});function qo(e){var n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return t===-1&&(t=n),[t,t===n?0:4-t%4]}function hc(e,n,t){for(var o,l,r=[],i=n;i<t;i+=3)o=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),r.push(et[(l=o)>>18&63]+et[l>>12&63]+et[l>>6&63]+et[63&l]);return r.join("")}function gt(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=new Uint8Array(e);return Object.setPrototypeOf(n,ce.prototype),n}function ce(e,n,t){if(typeof e=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return qi(e)}return Vs(e,n,t)}function Vs(e,n,t){if(typeof e=="string")return function(r,i){if(typeof i=="string"&&i!==""||(i="utf8"),!ce.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var s=0|Hs(r,i),a=gt(s),c=a.write(r,i);return c!==s&&(a=a.slice(0,c)),a}(e,n);if(ArrayBuffer.isView(e))return Ir(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(bt(e,ArrayBuffer)||e&&bt(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(bt(e,SharedArrayBuffer)||e&&bt(e.buffer,SharedArrayBuffer)))return dc(e,n,t);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(o!=null&&o!==e)return ce.from(o,n,t);var l=function(r){if(ce.isBuffer(r)){var i=0|ao(r.length),s=gt(i);return s.length===0||r.copy(s,0,0,i),s}if(r.length!==void 0)return typeof r.length!="number"||lo(r.length)?gt(0):Ir(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Ir(r.data)}(e);if(l)return l;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return ce.from(e[Symbol.toPrimitive]("string"),n,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function $s(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function qi(e){return $s(e),gt(e<0?0:0|ao(e))}function Ir(e){for(var n=e.length<0?0:0|ao(e.length),t=gt(n),o=0;o<n;o+=1)t[o]=255&e[o];return t}function dc(e,n,t){if(n<0||e.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(t||0))throw new RangeError('"length" is outside of buffer bounds');var o;return o=n===void 0&&t===void 0?new Uint8Array(e):t===void 0?new Uint8Array(e,n):new Uint8Array(e,n,t),Object.setPrototypeOf(o,ce.prototype),o}function ao(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function Hs(e,n){if(ce.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||bt(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var t=e.length,o=arguments.length>2&&arguments[2]===!0;if(!o&&t===0)return 0;for(var l=!1;;)switch(n){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Vi(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return zs(e).length;default:if(l)return o?-1:Vi(e).length;n=(""+n).toLowerCase(),l=!0}}function fc(e,n,t){var o=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(n>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return vc(this,n,t);case"utf8":case"utf-8":return Ks(this,n,t);case"ascii":return _c(this,n,t);case"latin1":case"binary":return kc(this,n,t);case"base64":return Tc(this,n,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wc(this,n,t);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function Ut(e,n,t){var o=e[n];e[n]=e[t],e[t]=o}function Vo(e,n,t,o,l){if(e.length===0)return-1;if(typeof t=="string"?(o=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),lo(t=+t)&&(t=l?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(l)return-1;t=e.length-1}else if(t<0){if(!l)return-1;t=0}if(typeof n=="string"&&(n=ce.from(n,o)),ce.isBuffer(n))return n.length===0?-1:$o(e,n,t,o,l);if(typeof n=="number")return n&=255,typeof Uint8Array.prototype.indexOf=="function"?l?Uint8Array.prototype.indexOf.call(e,n,t):Uint8Array.prototype.lastIndexOf.call(e,n,t):$o(e,[n],t,o,l);throw new TypeError("val must be string, number or Buffer")}function $o(e,n,t,o,l){var r,i=1,s=e.length,a=n.length;if(o!==void 0&&((o=String(o).toLowerCase())==="ucs2"||o==="ucs-2"||o==="utf16le"||o==="utf-16le")){if(e.length<2||n.length<2)return-1;i=2,s/=2,a/=2,t/=2}function c(b,y){return i===1?b[y]:b.readUInt16BE(y*i)}if(l){var u=-1;for(r=t;r<s;r++)if(c(e,r)===c(n,u===-1?0:r-u)){if(u===-1&&(u=r),r-u+1===a)return u*i}else u!==-1&&(r-=r-u),u=-1}else for(t+a>s&&(t=s-a),r=t;r>=0;r--){for(var d=!0,m=0;m<a;m++)if(c(e,r+m)!==c(n,m)){d=!1;break}if(d)return r}return-1}function pc(e,n,t,o){t=Number(t)||0;var l=e.length-t;o?(o=Number(o))>l&&(o=l):o=l;var r=n.length;o>r/2&&(o=r/2);for(var i=0;i<o;++i){var s=parseInt(n.substr(2*i,2),16);if(lo(s))return i;e[t+i]=s}return i}function mc(e,n,t,o){return $n(Vi(n,e.length-t),e,t,o)}function Gs(e,n,t,o){return $n(function(l){for(var r=[],i=0;i<l.length;++i)r.push(255&l.charCodeAt(i));return r}(n),e,t,o)}function gc(e,n,t,o){return Gs(e,n,t,o)}function bc(e,n,t,o){return $n(zs(n),e,t,o)}function yc(e,n,t,o){return $n(function(l,r){for(var i,s,a,c=[],u=0;u<l.length&&!((r-=2)<0);++u)i=l.charCodeAt(u),s=i>>8,a=i%256,c.push(a),c.push(s);return c}(n,e.length-t),e,t,o)}function Tc(e,n,t){return n===0&&t===e.length?Dn.fromByteArray(e):Dn.fromByteArray(e.slice(n,t))}function Ks(e,n,t){t=Math.min(e.length,t);for(var o=[],l=n;l<t;){var r,i,s,a,c=e[l],u=null,d=c>239?4:c>223?3:c>191?2:1;if(l+d<=t)switch(d){case 1:c<128&&(u=c);break;case 2:(192&(r=e[l+1]))==128&&(a=(31&c)<<6|63&r)>127&&(u=a);break;case 3:r=e[l+1],i=e[l+2],(192&r)==128&&(192&i)==128&&(a=(15&c)<<12|(63&r)<<6|63&i)>2047&&(a<55296||a>57343)&&(u=a);break;case 4:r=e[l+1],i=e[l+2],s=e[l+3],(192&r)==128&&(192&i)==128&&(192&s)==128&&(a=(15&c)<<18|(63&r)<<12|(63&i)<<6|63&s)>65535&&a<1114112&&(u=a)}u===null?(u=65533,d=1):u>65535&&(u-=65536,o.push(u>>>10&1023|55296),u=56320|1023&u),o.push(u),l+=d}return function(m){var b=m.length;if(b<=4096)return String.fromCharCode.apply(String,m);for(var y="",g=0;g<b;)y+=String.fromCharCode.apply(String,m.slice(g,g+=4096));return y}(o)}function _c(e,n,t){var o="";t=Math.min(e.length,t);for(var l=n;l<t;++l)o+=String.fromCharCode(127&e[l]);return o}function kc(e,n,t){var o="";t=Math.min(e.length,t);for(var l=n;l<t;++l)o+=String.fromCharCode(e[l]);return o}function vc(e,n,t){var o=e.length;(!n||n<0)&&(n=0),(!t||t<0||t>o)&&(t=o);for(var l="",r=n;r<t;++r)l+=Qs[e[r]];return l}function wc(e,n,t){for(var o=e.slice(n,t),l="",r=0;r<o.length;r+=2)l+=String.fromCharCode(o[r]+256*o[r+1]);return l}function Fe(e,n,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+n>t)throw new RangeError("Trying to access beyond buffer length")}function $e(e,n,t,o,l,r){if(!ce.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>l||n<r)throw new RangeError('"value" argument is out of bounds');if(t+o>e.length)throw new RangeError("Index out of range")}function Js(e,n,t,o,l,r){if(t+o>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Ho(e,n,t,o,l){return n=+n,t>>>=0,l||Js(e,0,t,4),jt.write(e,n,t,o,23,4),t+4}function Go(e,n,t,o,l){return n=+n,t>>>=0,l||Js(e,0,t,8),jt.write(e,n,t,o,52,8),t+8}function Vi(e,n){var t;n=n||1/0;for(var o=e.length,l=null,r=[],i=0;i<o;++i){if((t=e.charCodeAt(i))>55295&&t<57344){if(!l){if(t>56319){(n-=3)>-1&&r.push(239,191,189);continue}if(i+1===o){(n-=3)>-1&&r.push(239,191,189);continue}l=t;continue}if(t<56320){(n-=3)>-1&&r.push(239,191,189),l=t;continue}t=65536+(l-55296<<10|t-56320)}else l&&(n-=3)>-1&&r.push(239,191,189);if(l=null,t<128){if((n-=1)<0)break;r.push(t)}else if(t<2048){if((n-=2)<0)break;r.push(t>>6|192,63&t|128)}else if(t<65536){if((n-=3)<0)break;r.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;r.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return r}function zs(e){return Dn.toByteArray(function(n){if((n=(n=n.split("=")[0]).trim().replace(Ys,"")).length<2)return"";for(;n.length%4!=0;)n+="=";return n}(e))}function $n(e,n,t,o){for(var l=0;l<o&&!(l+t>=n.length||l>=e.length);++l)n[l+t]=e[l];return l}function bt(e,n){return e instanceof n||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===n.name}function lo(e){return e!=e}function Ko(e,n){for(var t in e)n[t]=e[t]}function Lt(e,n,t){return Xe(e,n,t)}function cn(e){var n;switch(this.encoding=function(t){var o=function(l){if(!l)return"utf8";for(var r;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(r)return;l=(""+l).toLowerCase(),r=!0}}(t);if(typeof o!="string"&&(Fn.isEncoding===$i||!$i(t)))throw new Error("Unknown encoding: "+t);return o||t}(e),this.encoding){case"utf16le":this.text=Ec,this.end=Ic,n=4;break;case"utf8":this.fillLast=Sc,n=4;break;case"base64":this.text=Ac,this.end=Rc,n=3;break;default:return this.write=Cc,this.end=Pc,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=Fn.allocUnsafe(n)}function Ar(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function Sc(e){var n=this.lastTotal-this.lastNeed,t=function(o,l,r){if((192&l[0])!=128)return o.lastNeed=0,"\uFFFD";if(o.lastNeed>1&&l.length>1){if((192&l[1])!=128)return o.lastNeed=1,"\uFFFD";if(o.lastNeed>2&&l.length>2&&(192&l[2])!=128)return o.lastNeed=2,"\uFFFD"}}(this,e);return t!==void 0?t:this.lastNeed<=e.length?(e.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,n,0,e.length),this.lastNeed-=e.length,void 0)}function Ec(e,n){if((e.length-n)%2==0){var t=e.toString("utf16le",n);if(t){var o=t.charCodeAt(t.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",n,e.length-1)}function Ic(e){var n=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return n+this.lastChar.toString("utf16le",0,t)}return n}function Ac(e,n){var t=(e.length-n)%3;return t===0?e.toString("base64",n):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",n,e.length-t))}function Rc(e){var n=e&&e.length?this.write(e):"";return this.lastNeed?n+this.lastChar.toString("base64",0,3-this.lastNeed):n}function Cc(e){return e.toString(this.encoding)}function Pc(e){return e&&e.length?this.write(e):""}var Jo,et,Ge,zo,En,xt,Yo,Qo,rt,Dn,jt,Rr,Ys,Qs,un,hn,Xe,Xo,en,Fn,$i,Zo=je(()=>{for(re(),oe(),ie(),Jo={byteLength:function(e){var n=qo(e),t=n[0],o=n[1];return 3*(t+o)/4-o},toByteArray:function(e){var n,t,o=qo(e),l=o[0],r=o[1],i=new zo(function(c,u,d){return 3*(u+d)/4-d}(0,l,r)),s=0,a=r>0?l-4:l;for(t=0;t<a;t+=4)n=Ge[e.charCodeAt(t)]<<18|Ge[e.charCodeAt(t+1)]<<12|Ge[e.charCodeAt(t+2)]<<6|Ge[e.charCodeAt(t+3)],i[s++]=n>>16&255,i[s++]=n>>8&255,i[s++]=255&n;return r===2&&(n=Ge[e.charCodeAt(t)]<<2|Ge[e.charCodeAt(t+1)]>>4,i[s++]=255&n),r===1&&(n=Ge[e.charCodeAt(t)]<<10|Ge[e.charCodeAt(t+1)]<<4|Ge[e.charCodeAt(t+2)]>>2,i[s++]=n>>8&255,i[s++]=255&n),i},fromByteArray:function(e){for(var n,t=e.length,o=t%3,l=[],r=0,i=t-o;r<i;r+=16383)l.push(hc(e,r,r+16383>i?i:r+16383));return o===1?(n=e[t-1],l.push(et[n>>2]+et[n<<4&63]+"==")):o===2&&(n=(e[t-2]<<8)+e[t-1],l.push(et[n>>10]+et[n>>4&63]+et[n<<2&63]+"=")),l.join("")}},et=[],Ge=[],zo=typeof Uint8Array<"u"?Uint8Array:Array,En="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xt=0,Yo=En.length;xt<Yo;++xt)et[xt]=En[xt],Ge[En.charCodeAt(xt)]=xt;Ge[45]=62,Ge[95]=63,Qo={read:function(e,n,t,o,l){var r,i,s=8*l-o-1,a=(1<<s)-1,c=a>>1,u=-7,d=t?l-1:0,m=t?-1:1,b=e[n+d];for(d+=m,r=b&(1<<-u)-1,b>>=-u,u+=s;u>0;r=256*r+e[n+d],d+=m,u-=8);for(i=r&(1<<-u)-1,r>>=-u,u+=o;u>0;i=256*i+e[n+d],d+=m,u-=8);if(r===0)r=1-c;else{if(r===a)return i?NaN:1/0*(b?-1:1);i+=Math.pow(2,o),r-=c}return(b?-1:1)*i*Math.pow(2,r-o)},write:function(e,n,t,o,l,r){var i,s,a,c=8*r-l-1,u=(1<<c)-1,d=u>>1,m=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=o?0:r-1,y=o?1:-1,g=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(s=isNaN(n)?1:0,i=u):(i=Math.floor(Math.log(n)/Math.LN2),n*(a=Math.pow(2,-i))<1&&(i--,a*=2),(n+=i+d>=1?m/a:m*Math.pow(2,1-d))*a>=2&&(i++,a/=2),i+d>=u?(s=0,i=u):i+d>=1?(s=(n*a-1)*Math.pow(2,l),i+=d):(s=n*Math.pow(2,d-1)*Math.pow(2,l),i=0));l>=8;e[t+b]=255&s,b+=y,s/=256,l-=8);for(i=i<<l|s,c+=l;c>0;e[t+b]=255&i,b+=y,i/=256,c-=8);e[t+b-y]|=128*g}},rt={},Dn=Jo,jt=Qo,Rr=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,rt.Buffer=ce,rt.SlowBuffer=function(e){return+e!=e&&(e=0),ce.alloc(+e)},rt.INSPECT_MAX_BYTES=50,rt.kMaxLength=2147483647,ce.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(e,n),e.foo()===42}catch{return!1}}(),ce.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(ce.prototype,"parent",{enumerable:!0,get:function(){if(ce.isBuffer(this))return this.buffer}}),Object.defineProperty(ce.prototype,"offset",{enumerable:!0,get:function(){if(ce.isBuffer(this))return this.byteOffset}}),ce.poolSize=8192,ce.from=function(e,n,t){return Vs(e,n,t)},Object.setPrototypeOf(ce.prototype,Uint8Array.prototype),Object.setPrototypeOf(ce,Uint8Array),ce.alloc=function(e,n,t){return function(o,l,r){return $s(o),o<=0?gt(o):l!==void 0?typeof r=="string"?gt(o).fill(l,r):gt(o).fill(l):gt(o)}(e,n,t)},ce.allocUnsafe=function(e){return qi(e)},ce.allocUnsafeSlow=function(e){return qi(e)},ce.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==ce.prototype},ce.compare=function(e,n){if(bt(e,Uint8Array)&&(e=ce.from(e,e.offset,e.byteLength)),bt(n,Uint8Array)&&(n=ce.from(n,n.offset,n.byteLength)),!ce.isBuffer(e)||!ce.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var t=e.length,o=n.length,l=0,r=Math.min(t,o);l<r;++l)if(e[l]!==n[l]){t=e[l],o=n[l];break}return t<o?-1:o<t?1:0},ce.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ce.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ce.alloc(0);var t;if(n===void 0)for(n=0,t=0;t<e.length;++t)n+=e[t].length;var o=ce.allocUnsafe(n),l=0;for(t=0;t<e.length;++t){var r=e[t];if(bt(r,Uint8Array)&&(r=ce.from(r)),!ce.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(o,l),l+=r.length}return o},ce.byteLength=Hs,ce.prototype._isBuffer=!0,ce.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)Ut(this,n,n+1);return this},ce.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)Ut(this,n,n+3),Ut(this,n+1,n+2);return this},ce.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)Ut(this,n,n+7),Ut(this,n+1,n+6),Ut(this,n+2,n+5),Ut(this,n+3,n+4);return this},ce.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Ks(this,0,e):fc.apply(this,arguments)},ce.prototype.toLocaleString=ce.prototype.toString,ce.prototype.equals=function(e){if(!ce.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||ce.compare(this,e)===0},ce.prototype.inspect=function(){var e="",n=rt.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},Rr&&(ce.prototype[Rr]=ce.prototype.inspect),ce.prototype.compare=function(e,n,t,o,l){if(bt(e,Uint8Array)&&(e=ce.from(e,e.offset,e.byteLength)),!ce.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(n===void 0&&(n=0),t===void 0&&(t=e?e.length:0),o===void 0&&(o=0),l===void 0&&(l=this.length),n<0||t>e.length||o<0||l>this.length)throw new RangeError("out of range index");if(o>=l&&n>=t)return 0;if(o>=l)return-1;if(n>=t)return 1;if(this===e)return 0;for(var r=(l>>>=0)-(o>>>=0),i=(t>>>=0)-(n>>>=0),s=Math.min(r,i),a=this.slice(o,l),c=e.slice(n,t),u=0;u<s;++u)if(a[u]!==c[u]){r=a[u],i=c[u];break}return r<i?-1:i<r?1:0},ce.prototype.includes=function(e,n,t){return this.indexOf(e,n,t)!==-1},ce.prototype.indexOf=function(e,n,t){return Vo(this,e,n,t,!0)},ce.prototype.lastIndexOf=function(e,n,t){return Vo(this,e,n,t,!1)},ce.prototype.write=function(e,n,t,o){if(n===void 0)o="utf8",t=this.length,n=0;else if(t===void 0&&typeof n=="string")o=n,t=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n>>>=0,isFinite(t)?(t>>>=0,o===void 0&&(o="utf8")):(o=t,t=void 0)}var l=this.length-n;if((t===void 0||t>l)&&(t=l),e.length>0&&(t<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var r=!1;;)switch(o){case"hex":return pc(this,e,n,t);case"utf8":case"utf-8":return mc(this,e,n,t);case"ascii":return Gs(this,e,n,t);case"latin1":case"binary":return gc(this,e,n,t);case"base64":return bc(this,e,n,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yc(this,e,n,t);default:if(r)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),r=!0}},ce.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},ce.prototype.slice=function(e,n){var t=this.length;(e=~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),(n=n===void 0?t:~~n)<0?(n+=t)<0&&(n=0):n>t&&(n=t),n<e&&(n=e);var o=this.subarray(e,n);return Object.setPrototypeOf(o,ce.prototype),o},ce.prototype.readUIntLE=function(e,n,t){e>>>=0,n>>>=0,t||Fe(e,n,this.length);for(var o=this[e],l=1,r=0;++r<n&&(l*=256);)o+=this[e+r]*l;return o},ce.prototype.readUIntBE=function(e,n,t){e>>>=0,n>>>=0,t||Fe(e,n,this.length);for(var o=this[e+--n],l=1;n>0&&(l*=256);)o+=this[e+--n]*l;return o},ce.prototype.readUInt8=function(e,n){return e>>>=0,n||Fe(e,1,this.length),this[e]},ce.prototype.readUInt16LE=function(e,n){return e>>>=0,n||Fe(e,2,this.length),this[e]|this[e+1]<<8},ce.prototype.readUInt16BE=function(e,n){return e>>>=0,n||Fe(e,2,this.length),this[e]<<8|this[e+1]},ce.prototype.readUInt32LE=function(e,n){return e>>>=0,n||Fe(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ce.prototype.readUInt32BE=function(e,n){return e>>>=0,n||Fe(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ce.prototype.readIntLE=function(e,n,t){e>>>=0,n>>>=0,t||Fe(e,n,this.length);for(var o=this[e],l=1,r=0;++r<n&&(l*=256);)o+=this[e+r]*l;return o>=(l*=128)&&(o-=Math.pow(2,8*n)),o},ce.prototype.readIntBE=function(e,n,t){e>>>=0,n>>>=0,t||Fe(e,n,this.length);for(var o=n,l=1,r=this[e+--o];o>0&&(l*=256);)r+=this[e+--o]*l;return r>=(l*=128)&&(r-=Math.pow(2,8*n)),r},ce.prototype.readInt8=function(e,n){return e>>>=0,n||Fe(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ce.prototype.readInt16LE=function(e,n){e>>>=0,n||Fe(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},ce.prototype.readInt16BE=function(e,n){e>>>=0,n||Fe(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},ce.prototype.readInt32LE=function(e,n){return e>>>=0,n||Fe(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ce.prototype.readInt32BE=function(e,n){return e>>>=0,n||Fe(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ce.prototype.readFloatLE=function(e,n){return e>>>=0,n||Fe(e,4,this.length),jt.read(this,e,!0,23,4)},ce.prototype.readFloatBE=function(e,n){return e>>>=0,n||Fe(e,4,this.length),jt.read(this,e,!1,23,4)},ce.prototype.readDoubleLE=function(e,n){return e>>>=0,n||Fe(e,8,this.length),jt.read(this,e,!0,52,8)},ce.prototype.readDoubleBE=function(e,n){return e>>>=0,n||Fe(e,8,this.length),jt.read(this,e,!1,52,8)},ce.prototype.writeUIntLE=function(e,n,t,o){e=+e,n>>>=0,t>>>=0,o||$e(this,e,n,t,Math.pow(2,8*t)-1,0);var l=1,r=0;for(this[n]=255&e;++r<t&&(l*=256);)this[n+r]=e/l&255;return n+t},ce.prototype.writeUIntBE=function(e,n,t,o){e=+e,n>>>=0,t>>>=0,o||$e(this,e,n,t,Math.pow(2,8*t)-1,0);var l=t-1,r=1;for(this[n+l]=255&e;--l>=0&&(r*=256);)this[n+l]=e/r&255;return n+t},ce.prototype.writeUInt8=function(e,n,t){return e=+e,n>>>=0,t||$e(this,e,n,1,255,0),this[n]=255&e,n+1},ce.prototype.writeUInt16LE=function(e,n,t){return e=+e,n>>>=0,t||$e(this,e,n,2,65535,0),this[n]=255&e,this[n+1]=e>>>8,n+2},ce.prototype.writeUInt16BE=function(e,n,t){return e=+e,n>>>=0,t||$e(this,e,n,2,65535,0),this[n]=e>>>8,this[n+1]=255&e,n+2},ce.prototype.writeUInt32LE=function(e,n,t){return e=+e,n>>>=0,t||$e(this,e,n,4,4294967295,0),this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e,n+4},ce.prototype.writeUInt32BE=function(e,n,t){return e=+e,n>>>=0,t||$e(this,e,n,4,4294967295,0),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},ce.prototype.writeIntLE=function(e,n,t,o){if(e=+e,n>>>=0,!o){var l=Math.pow(2,8*t-1);$e(this,e,n,t,l-1,-l)}var r=0,i=1,s=0;for(this[n]=255&e;++r<t&&(i*=256);)e<0&&s===0&&this[n+r-1]!==0&&(s=1),this[n+r]=(e/i>>0)-s&255;return n+t},ce.prototype.writeIntBE=function(e,n,t,o){if(e=+e,n>>>=0,!o){var l=Math.pow(2,8*t-1);$e(this,e,n,t,l-1,-l)}var r=t-1,i=1,s=0;for(this[n+r]=255&e;--r>=0&&(i*=256);)e<0&&s===0&&this[n+r+1]!==0&&(s=1),this[n+r]=(e/i>>0)-s&255;return n+t},ce.prototype.writeInt8=function(e,n,t){return e=+e,n>>>=0,t||$e(this,e,n,1,127,-128),e<0&&(e=255+e+1),this[n]=255&e,n+1},ce.prototype.writeInt16LE=function(e,n,t){return e=+e,n>>>=0,t||$e(this,e,n,2,32767,-32768),this[n]=255&e,this[n+1]=e>>>8,n+2},ce.prototype.writeInt16BE=function(e,n,t){return e=+e,n>>>=0,t||$e(this,e,n,2,32767,-32768),this[n]=e>>>8,this[n+1]=255&e,n+2},ce.prototype.writeInt32LE=function(e,n,t){return e=+e,n>>>=0,t||$e(this,e,n,4,2147483647,-2147483648),this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24,n+4},ce.prototype.writeInt32BE=function(e,n,t){return e=+e,n>>>=0,t||$e(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},ce.prototype.writeFloatLE=function(e,n,t){return Ho(this,e,n,!0,t)},ce.prototype.writeFloatBE=function(e,n,t){return Ho(this,e,n,!1,t)},ce.prototype.writeDoubleLE=function(e,n,t){return Go(this,e,n,!0,t)},ce.prototype.writeDoubleBE=function(e,n,t){return Go(this,e,n,!1,t)},ce.prototype.copy=function(e,n,t,o){if(!ce.isBuffer(e))throw new TypeError("argument should be a Buffer");if(t||(t=0),o||o===0||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&o<t&&(o=t),o===t||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-t&&(o=e.length-n+t);var l=o-t;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(n,t,o);else if(this===e&&t<n&&n<o)for(var r=l-1;r>=0;--r)e[r+n]=this[r+t];else Uint8Array.prototype.set.call(e,this.subarray(t,o),n);return l},ce.prototype.fill=function(e,n,t,o){if(typeof e=="string"){if(typeof n=="string"?(o=n,n=0,t=this.length):typeof t=="string"&&(o=t,t=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!ce.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(e.length===1){var l=e.charCodeAt(0);(o==="utf8"&&l<128||o==="latin1")&&(e=l)}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(n<0||this.length<n||this.length<t)throw new RangeError("Out of range index");if(t<=n)return this;var r;if(n>>>=0,t=t===void 0?this.length:t>>>0,e||(e=0),typeof e=="number")for(r=n;r<t;++r)this[r]=e;else{var i=ce.isBuffer(e)?e:ce.from(e,o),s=i.length;if(s===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<t-n;++r)this[r+n]=i[r%s]}return this},Ys=/[^+/0-9A-Za-z-_]/g,Qs=function(){for(var e=new Array(256),n=0;n<16;++n)for(var t=16*n,o=0;o<16;++o)e[t+o]="0123456789abcdef"[n]+"0123456789abcdef"[o];return e}(),rt.Buffer,rt.INSPECT_MAX_BYTES,rt.kMaxLength,un={},hn=rt,Xe=hn.Buffer,Xe.from&&Xe.alloc&&Xe.allocUnsafe&&Xe.allocUnsafeSlow?un=hn:(Ko(hn,un),un.Buffer=Lt),Lt.prototype=Object.create(Xe.prototype),Ko(Xe,Lt),Lt.from=function(e,n,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Xe(e,n,t)},Lt.alloc=function(e,n,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var o=Xe(e);return n!==void 0?typeof t=="string"?o.fill(n,t):o.fill(n):o.fill(0),o},Lt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Xe(e)},Lt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return hn.SlowBuffer(e)},Xo=un,en={},Fn=Xo.Buffer,$i=Fn.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},en.StringDecoder=cn,cn.prototype.write=function(e){if(e.length===0)return"";var n,t;if(this.lastNeed){if((n=this.fillLast(e))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?n?n+this.text(e,t):this.text(e,t):n||""},cn.prototype.end=function(e){var n=e&&e.length?this.write(e):"";return this.lastNeed?n+"\uFFFD":n},cn.prototype.text=function(e,n){var t=function(l,r,i){var s=r.length-1;if(s<i)return 0;var a=Ar(r[s]);return a>=0?(a>0&&(l.lastNeed=a-1),a):--s<i||a===-2?0:(a=Ar(r[s]))>=0?(a>0&&(l.lastNeed=a-2),a):--s<i||a===-2?0:(a=Ar(r[s]))>=0?(a>0&&(a===2?a=0:l.lastNeed=a-3),a):0}(this,e,n);if(!this.lastNeed)return e.toString("utf8",n);this.lastTotal=t;var o=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",n,o)},cn.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},en.StringDecoder,en.StringDecoder}),Xs={};Gt(Xs,{StringDecoder:()=>Zs,default:()=>en});var Zs,Oc=je(()=>{re(),oe(),ie(),Zo(),Zo(),Zs=en.StringDecoder}),ea=de((e,n)=>{"use strict";re(),oe(),ie();var t=Kt(),{PromisePrototypeThen:o,SymbolAsyncIterator:l,SymbolIterator:r}=De(),{Buffer:i}=(qe(),Ce(We)),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:a}=He().codes;function c(u,d,m){let b;if(typeof d=="string"||d instanceof i)return new u({objectMode:!0,...m,read(){this.push(d),this.push(null)}});let y;if(d&&d[l])y=!0,b=d[l]();else if(d&&d[r])y=!1,b=d[r]();else throw new s("iterable",["Iterable"],d);let g=new u({objectMode:!0,highWaterMark:1,...m}),T=!1;g._read=function(){T||(T=!0,v())},g._destroy=function(_,A){o(k(_),()=>t.nextTick(A,_),L=>t.nextTick(A,L||_))};async function k(_){let A=_!=null,L=typeof b.throw=="function";if(A&&L){let{value:S,done:R}=await b.throw(_);if(await S,R)return}if(typeof b.return=="function"){let{value:S}=await b.return();await S}}async function v(){for(;;){try{let{value:_,done:A}=y?await b.next():b.next();if(A)g.push(null);else{let L=_&&typeof _.then=="function"?await _:_;if(L===null)throw T=!1,new a;if(g.push(L))continue;T=!1}}catch(_){g.destroy(_)}break}}return g}n.exports=c}),Hn=de((e,n)=>{re(),oe(),ie();var t=Kt(),{ArrayPrototypeIndexOf:o,NumberIsInteger:l,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:a,ObjectSetPrototypeOf:c,Promise:u,SafeSet:d,SymbolAsyncIterator:m,Symbol:b}=De();n.exports=E,E.ReadableState=ge;var{EventEmitter:y}=(nn(),Ce(Jt)),{Stream:g,prependListener:T}=oo(),{Buffer:k}=(qe(),Ce(We)),{addAbortSignal:v}=Vn(),_=Ct(),A=yt().debuglog("stream",h=>{A=h}),L=uc(),S=tn(),{getHighWaterMark:R,getDefaultHighWaterMark:N}=so(),{aggregateTwoErrors:q,codes:{ERR_INVALID_ARG_TYPE:G,ERR_METHOD_NOT_IMPLEMENTED:Q,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:W,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Y}}=He(),{validateObject:V}=qn(),ae=b("kPaused"),{StringDecoder:ne}=(Oc(),Ce(Xs)),j=ea();c(E.prototype,g.prototype),c(E,g);var fe=()=>{},{errorOrDestroy:ee}=S;function ge(h,p,w){typeof w!="boolean"&&(w=p instanceof Tt()),this.objectMode=!!(h&&h.objectMode),w&&(this.objectMode=this.objectMode||!!(h&&h.readableObjectMode)),this.highWaterMark=h?R(this,h,"readableHighWaterMark",w):N(!1),this.buffer=new L,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[ae]=null,this.errorEmitted=!1,this.emitClose=!h||h.emitClose!==!1,this.autoDestroy=!h||h.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=h&&h.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,h&&h.encoding&&(this.decoder=new ne(h.encoding),this.encoding=h.encoding)}function E(h){if(!(this instanceof E))return new E(h);let p=this instanceof Tt();this._readableState=new ge(h,this,p),h&&(typeof h.read=="function"&&(this._read=h.read),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.construct=="function"&&(this._construct=h.construct),h.signal&&!p&&v(h.signal,this)),g.call(this,h),S.construct(this,()=>{this._readableState.needReadable&&U(this,this._readableState)})}E.prototype.destroy=S.destroy,E.prototype._undestroy=S.undestroy,E.prototype._destroy=function(h,p){p(h)},E.prototype[y.captureRejectionSymbol]=function(h){this.destroy(h)},E.prototype.push=function(h,p){return H(this,h,p,!1)},E.prototype.unshift=function(h,p){return H(this,h,p,!0)};function H(h,p,w,O){A("readableAddChunk",p);let F=h._readableState,ue;if(F.objectMode||(typeof p=="string"?(w=w||F.defaultEncoding,F.encoding!==w&&(O&&F.encoding?p=k.from(p,w).toString(F.encoding):(p=k.from(p,w),w=""))):p instanceof k?w="":g._isUint8Array(p)?(p=g._uint8ArrayToBuffer(p),w=""):p!=null&&(ue=new G("chunk",["string","Buffer","Uint8Array"],p))),ue)ee(h,ue);else if(p===null)F.reading=!1,I(h,F);else if(F.objectMode||p&&p.length>0)if(O)if(F.endEmitted)ee(h,new Y);else{if(F.destroyed||F.errored)return!1;me(h,F,p,!0)}else if(F.ended)ee(h,new W);else{if(F.destroyed||F.errored)return!1;F.reading=!1,F.decoder&&!w?(p=F.decoder.write(p),F.objectMode||p.length!==0?me(h,F,p,!1):U(h,F)):me(h,F,p,!1)}else O||(F.reading=!1,U(h,F));return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function me(h,p,w,O){p.flowing&&p.length===0&&!p.sync&&h.listenerCount("data")>0?(p.multiAwaitDrain?p.awaitDrainWriters.clear():p.awaitDrainWriters=null,p.dataEmitted=!0,h.emit("data",w)):(p.length+=p.objectMode?1:w.length,O?p.buffer.unshift(w):p.buffer.push(w),p.needReadable&&$(h)),U(h,p)}E.prototype.isPaused=function(){let h=this._readableState;return h[ae]===!0||h.flowing===!1},E.prototype.setEncoding=function(h){let p=new ne(h);this._readableState.decoder=p,this._readableState.encoding=this._readableState.decoder.encoding;let w=this._readableState.buffer,O="";for(let F of w)O+=p.write(F);return w.clear(),O!==""&&w.push(O),this._readableState.length=O.length,this};var be=1073741824;function he(h){if(h>be)throw new C("size","<= 1GiB",h);return h--,h|=h>>>1,h|=h>>>2,h|=h>>>4,h|=h>>>8,h|=h>>>16,h++,h}function M(h,p){return h<=0||p.length===0&&p.ended?0:p.objectMode?1:r(h)?p.flowing&&p.length?p.buffer.first().length:p.length:h<=p.length?h:p.ended?p.length:0}E.prototype.read=function(h){A("read",h),h===void 0?h=NaN:l(h)||(h=i(h,10));let p=this._readableState,w=h;if(h>p.highWaterMark&&(p.highWaterMark=he(h)),h!==0&&(p.emittedReadable=!1),h===0&&p.needReadable&&((p.highWaterMark!==0?p.length>=p.highWaterMark:p.length>0)||p.ended))return A("read: emitReadable",p.length,p.ended),p.length===0&&p.ended?X(this):$(this),null;if(h=M(h,p),h===0&&p.ended)return p.length===0&&X(this),null;let O=p.needReadable;if(A("need readable",O),(p.length===0||p.length-h<p.highWaterMark)&&(O=!0,A("length less than watermark",O)),p.ended||p.reading||p.destroyed||p.errored||!p.constructed)O=!1,A("reading, ended or constructing",O);else if(O){A("do read"),p.reading=!0,p.sync=!0,p.length===0&&(p.needReadable=!0);try{this._read(p.highWaterMark)}catch(ue){ee(this,ue)}p.sync=!1,p.reading||(h=M(w,p))}let F;return h>0?F=K(h,p):F=null,F===null?(p.needReadable=p.length<=p.highWaterMark,h=0):(p.length-=h,p.multiAwaitDrain?p.awaitDrainWriters.clear():p.awaitDrainWriters=null),p.length===0&&(p.ended||(p.needReadable=!0),w!==h&&p.ended&&X(this)),F!==null&&!p.errorEmitted&&!p.closeEmitted&&(p.dataEmitted=!0,this.emit("data",F)),F};function I(h,p){if(A("onEofChunk"),!p.ended){if(p.decoder){let w=p.decoder.end();w&&w.length&&(p.buffer.push(w),p.length+=p.objectMode?1:w.length)}p.ended=!0,p.sync?$(h):(p.needReadable=!1,p.emittedReadable=!0,se(h))}}function $(h){let p=h._readableState;A("emitReadable",p.needReadable,p.emittedReadable),p.needReadable=!1,p.emittedReadable||(A("emitReadable",p.flowing),p.emittedReadable=!0,t.nextTick(se,h))}function se(h){let p=h._readableState;A("emitReadable_",p.destroyed,p.length,p.ended),!p.destroyed&&!p.errored&&(p.length||p.ended)&&(h.emit("readable"),p.emittedReadable=!1),p.needReadable=!p.flowing&&!p.ended&&p.length<=p.highWaterMark,te(h)}function U(h,p){!p.readingMore&&p.constructed&&(p.readingMore=!0,t.nextTick(J,h,p))}function J(h,p){for(;!p.reading&&!p.ended&&(p.length<p.highWaterMark||p.flowing&&p.length===0);){let w=p.length;if(A("maybeReadMore read 0"),h.read(0),w===p.length)break}p.readingMore=!1}E.prototype._read=function(h){throw new Q("_read()")},E.prototype.pipe=function(h,p){let w=this,O=this._readableState;O.pipes.length===1&&(O.multiAwaitDrain||(O.multiAwaitDrain=!0,O.awaitDrainWriters=new d(O.awaitDrainWriters?[O.awaitDrainWriters]:[]))),O.pipes.push(h),A("pipe count=%d opts=%j",O.pipes.length,p);let F=(!p||p.end!==!1)&&h!==t.stdout&&h!==t.stderr?_e:an;O.endEmitted?t.nextTick(F):w.once("end",F),h.on("unpipe",ue);function ue(Ot,ct){A("onunpipe"),Ot===w&&ct&&ct.hasUnpiped===!1&&(ct.hasUnpiped=!0,Se())}function _e(){A("onend"),h.end()}let Pe,Re=!1;function Se(){A("cleanup"),h.removeListener("close",_r),h.removeListener("finish",kr),Pe&&h.removeListener("drain",Pe),h.removeListener("error",Tr),h.removeListener("unpipe",ue),w.removeListener("end",_e),w.removeListener("end",an),w.removeListener("data",Co),Re=!0,Pe&&O.awaitDrainWriters&&(!h._writableState||h._writableState.needDrain)&&Pe()}function Ne(){Re||(O.pipes.length===1&&O.pipes[0]===h?(A("false write response, pause",0),O.awaitDrainWriters=h,O.multiAwaitDrain=!1):O.pipes.length>1&&O.pipes.includes(h)&&(A("false write response, pause",O.awaitDrainWriters.size),O.awaitDrainWriters.add(h)),w.pause()),Pe||(Pe=pe(w,h),h.on("drain",Pe))}w.on("data",Co);function Co(Ot){A("ondata");let ct=h.write(Ot);A("dest.write",ct),ct===!1&&Ne()}function Tr(Ot){if(A("onerror",Ot),an(),h.removeListener("error",Tr),h.listenerCount("error")===0){let ct=h._writableState||h._readableState;ct&&!ct.errorEmitted?ee(h,Ot):h.emit("error",Ot)}}T(h,"error",Tr);function _r(){h.removeListener("finish",kr),an()}h.once("close",_r);function kr(){A("onfinish"),h.removeListener("close",_r),an()}h.once("finish",kr);function an(){A("unpipe"),w.unpipe(h)}return h.emit("pipe",w),h.writableNeedDrain===!0?O.flowing&&Ne():O.flowing||(A("pipe resume"),w.resume()),h};function pe(h,p){return function(){let w=h._readableState;w.awaitDrainWriters===p?(A("pipeOnDrain",1),w.awaitDrainWriters=null):w.multiAwaitDrain&&(A("pipeOnDrain",w.awaitDrainWriters.size),w.awaitDrainWriters.delete(p)),(!w.awaitDrainWriters||w.awaitDrainWriters.size===0)&&h.listenerCount("data")&&h.resume()}}E.prototype.unpipe=function(h){let p=this._readableState,w={hasUnpiped:!1};if(p.pipes.length===0)return this;if(!h){let F=p.pipes;p.pipes=[],this.pause();for(let ue=0;ue<F.length;ue++)F[ue].emit("unpipe",this,{hasUnpiped:!1});return this}let O=o(p.pipes,h);return O===-1?this:(p.pipes.splice(O,1),p.pipes.length===0&&this.pause(),h.emit("unpipe",this,w),this)},E.prototype.on=function(h,p){let w=g.prototype.on.call(this,h,p),O=this._readableState;return h==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):h==="readable"&&!O.endEmitted&&!O.readableListening&&(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,A("on readable",O.length,O.reading),O.length?$(this):O.reading||t.nextTick(P,this)),w},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(h,p){let w=g.prototype.removeListener.call(this,h,p);return h==="readable"&&t.nextTick(le,this),w},E.prototype.off=E.prototype.removeListener,E.prototype.removeAllListeners=function(h){let p=g.prototype.removeAllListeners.apply(this,arguments);return(h==="readable"||h===void 0)&&t.nextTick(le,this),p};function le(h){let p=h._readableState;p.readableListening=h.listenerCount("readable")>0,p.resumeScheduled&&p[ae]===!1?p.flowing=!0:h.listenerCount("data")>0?h.resume():p.readableListening||(p.flowing=null)}function P(h){A("readable nexttick read 0"),h.read(0)}E.prototype.resume=function(){let h=this._readableState;return h.flowing||(A("resume"),h.flowing=!h.readableListening,B(this,h)),h[ae]=!1,this};function B(h,p){p.resumeScheduled||(p.resumeScheduled=!0,t.nextTick(D,h,p))}function D(h,p){A("resume",p.reading),p.reading||h.read(0),p.resumeScheduled=!1,h.emit("resume"),te(h),p.flowing&&!p.reading&&h.read(0)}E.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ae]=!0,this};function te(h){let p=h._readableState;for(A("flow",p.flowing);p.flowing&&h.read()!==null;);}E.prototype.wrap=function(h){let p=!1;h.on("data",O=>{!this.push(O)&&h.pause&&(p=!0,h.pause())}),h.on("end",()=>{this.push(null)}),h.on("error",O=>{ee(this,O)}),h.on("close",()=>{this.destroy()}),h.on("destroy",()=>{this.destroy()}),this._read=()=>{p&&h.resume&&(p=!1,h.resume())};let w=a(h);for(let O=1;O<w.length;O++){let F=w[O];this[F]===void 0&&typeof h[F]=="function"&&(this[F]=h[F].bind(h))}return this},E.prototype[m]=function(){return z(this)},E.prototype.iterator=function(h){return h!==void 0&&V(h,"options"),z(this,h)};function z(h,p){typeof h.read!="function"&&(h=E.wrap(h,{objectMode:!0}));let w=x(h,p);return w.stream=h,w}async function*x(h,p){let w=fe;function O(_e){this===h?(w(),w=fe):w=_e}h.on("readable",O);let F,ue=_(h,{writable:!1},_e=>{F=_e?q(F,_e):null,w(),w=fe});try{for(;;){let _e=h.destroyed?null:h.read();if(_e!==null)yield _e;else{if(F)throw F;if(F===null)return;await new u(O)}}}catch(_e){throw F=q(F,_e),F}finally{(F||p?.destroyOnReturn!==!1)&&(F===void 0||h._readableState.autoDestroy)?S.destroyer(h,null):(h.off("readable",O),ue())}}s(E.prototype,{readable:{__proto__:null,get(){let h=this._readableState;return!!h&&h.readable!==!1&&!h.destroyed&&!h.errorEmitted&&!h.endEmitted},set(h){this._readableState&&(this._readableState.readable=!!h)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(h){this._readableState&&(this._readableState.flowing=h)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(h){this._readableState&&(this._readableState.destroyed=h)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(ge.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ae]!==!1},set(h){this[ae]=!!h}}}),E._fromList=K;function K(h,p){if(p.length===0)return null;let w;return p.objectMode?w=p.buffer.shift():!h||h>=p.length?(p.decoder?w=p.buffer.join(""):p.buffer.length===1?w=p.buffer.first():w=p.buffer.concat(p.length),p.buffer.clear()):w=p.buffer.consume(h,p.decoder),w}function X(h){let p=h._readableState;A("endReadable",p.endEmitted),p.endEmitted||(p.ended=!0,t.nextTick(ye,p,h))}function ye(h,p){if(A("endReadableNT",h.endEmitted,h.length),!h.errored&&!h.closeEmitted&&!h.endEmitted&&h.length===0){if(h.endEmitted=!0,p.emit("end"),p.writable&&p.allowHalfOpen===!1)t.nextTick(Te,p);else if(h.autoDestroy){let w=p._writableState;(!w||w.autoDestroy&&(w.finished||w.writable===!1))&&p.destroy()}}}function Te(h){h.writable&&!h.writableEnded&&!h.destroyed&&h.end()}E.from=function(h,p){return j(E,h,p)};var ke;function f(){return ke===void 0&&(ke={}),ke}E.fromWeb=function(h,p){return f().newStreamReadableFromReadableStream(h,p)},E.toWeb=function(h,p){return f().newReadableStreamFromStreamReadable(h,p)},E.wrap=function(h,p){var w,O;return new E({objectMode:(w=(O=h.readableObjectMode)!==null&&O!==void 0?O:h.objectMode)!==null&&w!==void 0?w:!0,...p,destroy(F,ue){S.destroyer(h,F),ue(F)}}).wrap(h)}}),ta=de((e,n)=>{re(),oe(),ie();var t=Kt(),{ArrayPrototypeSlice:o,Error:l,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:c,Symbol:u,SymbolHasInstance:d}=De();n.exports=ne,ne.WritableState=V;var{EventEmitter:m}=(nn(),Ce(Jt)),b=oo().Stream,{Buffer:y}=(qe(),Ce(We)),g=tn(),{addAbortSignal:T}=Vn(),{getHighWaterMark:k,getDefaultHighWaterMark:v}=so(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_MULTIPLE_CALLBACK:L,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:R,ERR_STREAM_ALREADY_FINISHED:N,ERR_STREAM_NULL_VALUES:q,ERR_STREAM_WRITE_AFTER_END:G,ERR_UNKNOWN_ENCODING:Q}=He().codes,{errorOrDestroy:C}=g;a(ne.prototype,b.prototype),a(ne,b);function W(){}var Y=u("kOnFinished");function V(P,B,D){typeof D!="boolean"&&(D=B instanceof Tt()),this.objectMode=!!(P&&P.objectMode),D&&(this.objectMode=this.objectMode||!!(P&&P.writableObjectMode)),this.highWaterMark=P?k(this,P,"writableHighWaterMark",D):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let te=!!(P&&P.decodeStrings===!1);this.decodeStrings=!te,this.defaultEncoding=P&&P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=E.bind(void 0,B),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ae(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!P||P.emitClose!==!1,this.autoDestroy=!P||P.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Y]=[]}function ae(P){P.buffered=[],P.bufferedIndex=0,P.allBuffers=!0,P.allNoop=!0}V.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},i(V.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ne(P){let B=this instanceof Tt();if(!B&&!r(ne,this))return new ne(P);this._writableState=new V(P,this,B),P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final),typeof P.construct=="function"&&(this._construct=P.construct),P.signal&&T(P.signal,this)),b.call(this,P),g.construct(this,()=>{let D=this._writableState;D.writing||he(this,D),se(this,D)})}i(ne,d,{__proto__:null,value:function(P){return r(this,P)?!0:this!==ne?!1:P&&P._writableState instanceof V}}),ne.prototype.pipe=function(){C(this,new S)};function j(P,B,D,te){let z=P._writableState;if(typeof D=="function")te=D,D=z.defaultEncoding;else{if(!D)D=z.defaultEncoding;else if(D!=="buffer"&&!y.isEncoding(D))throw new Q(D);typeof te!="function"&&(te=W)}if(B===null)throw new q;if(!z.objectMode)if(typeof B=="string")z.decodeStrings!==!1&&(B=y.from(B,D),D="buffer");else if(B instanceof y)D="buffer";else if(b._isUint8Array(B))B=b._uint8ArrayToBuffer(B),D="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],B);let x;return z.ending?x=new G:z.destroyed&&(x=new R("write")),x?(t.nextTick(te,x),C(P,x,!0),x):(z.pendingcb++,fe(P,z,B,D,te))}ne.prototype.write=function(P,B,D){return j(this,P,B,D)===!0},ne.prototype.cork=function(){this._writableState.corked++},ne.prototype.uncork=function(){let P=this._writableState;P.corked&&(P.corked--,P.writing||he(this,P))},ne.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=c(P)),!y.isEncoding(P))throw new Q(P);return this._writableState.defaultEncoding=P,this};function fe(P,B,D,te,z){let x=B.objectMode?1:D.length;B.length+=x;let K=B.length<B.highWaterMark;return K||(B.needDrain=!0),B.writing||B.corked||B.errored||!B.constructed?(B.buffered.push({chunk:D,encoding:te,callback:z}),B.allBuffers&&te!=="buffer"&&(B.allBuffers=!1),B.allNoop&&z!==W&&(B.allNoop=!1)):(B.writelen=x,B.writecb=z,B.writing=!0,B.sync=!0,P._write(D,te,B.onwrite),B.sync=!1),K&&!B.errored&&!B.destroyed}function ee(P,B,D,te,z,x,K){B.writelen=te,B.writecb=K,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new R("write")):D?P._writev(z,B.onwrite):P._write(z,x,B.onwrite),B.sync=!1}function ge(P,B,D,te){--B.pendingcb,te(D),be(B),C(P,D)}function E(P,B){let D=P._writableState,te=D.sync,z=D.writecb;if(typeof z!="function"){C(P,new L);return}D.writing=!1,D.writecb=null,D.length-=D.writelen,D.writelen=0,B?(B.stack,D.errored||(D.errored=B),P._readableState&&!P._readableState.errored&&(P._readableState.errored=B),te?t.nextTick(ge,P,D,B,z):ge(P,D,B,z)):(D.buffered.length>D.bufferedIndex&&he(P,D),te?D.afterWriteTickInfo!==null&&D.afterWriteTickInfo.cb===z?D.afterWriteTickInfo.count++:(D.afterWriteTickInfo={count:1,cb:z,stream:P,state:D},t.nextTick(H,D.afterWriteTickInfo)):me(P,D,1,z))}function H({stream:P,state:B,count:D,cb:te}){return B.afterWriteTickInfo=null,me(P,B,D,te)}function me(P,B,D,te){for(!B.ending&&!P.destroyed&&B.length===0&&B.needDrain&&(B.needDrain=!1,P.emit("drain"));D-- >0;)B.pendingcb--,te();B.destroyed&&be(B),se(P,B)}function be(P){if(P.writing)return;for(let z=P.bufferedIndex;z<P.buffered.length;++z){var B;let{chunk:x,callback:K}=P.buffered[z],X=P.objectMode?1:x.length;P.length-=X,K((B=P.errored)!==null&&B!==void 0?B:new R("write"))}let D=P[Y].splice(0);for(let z=0;z<D.length;z++){var te;D[z]((te=P.errored)!==null&&te!==void 0?te:new R("end"))}ae(P)}function he(P,B){if(B.corked||B.bufferProcessing||B.destroyed||!B.constructed)return;let{buffered:D,bufferedIndex:te,objectMode:z}=B,x=D.length-te;if(!x)return;let K=te;if(B.bufferProcessing=!0,x>1&&P._writev){B.pendingcb-=x-1;let X=B.allNoop?W:Te=>{for(let ke=K;ke<D.length;++ke)D[ke].callback(Te)},ye=B.allNoop&&K===0?D:o(D,K);ye.allBuffers=B.allBuffers,ee(P,B,!0,B.length,ye,"",X),ae(B)}else{do{let{chunk:X,encoding:ye,callback:Te}=D[K];D[K++]=null;let ke=z?1:X.length;ee(P,B,!1,ke,X,ye,Te)}while(K<D.length&&!B.writing);K===D.length?ae(B):K>256?(D.splice(0,K),B.bufferedIndex=0):B.bufferedIndex=K}B.bufferProcessing=!1}ne.prototype._write=function(P,B,D){if(this._writev)this._writev([{chunk:P,encoding:B}],D);else throw new A("_write()")},ne.prototype._writev=null,ne.prototype.end=function(P,B,D){let te=this._writableState;typeof P=="function"?(D=P,P=null,B=null):typeof B=="function"&&(D=B,B=null);let z;if(P!=null){let x=j(this,P,B);x instanceof l&&(z=x)}return te.corked&&(te.corked=1,this.uncork()),z||(!te.errored&&!te.ending?(te.ending=!0,se(this,te,!0),te.ended=!0):te.finished?z=new N("end"):te.destroyed&&(z=new R("end"))),typeof D=="function"&&(z||te.finished?t.nextTick(D,z):te[Y].push(D)),this};function M(P){return P.ending&&!P.destroyed&&P.constructed&&P.length===0&&!P.errored&&P.buffered.length===0&&!P.finished&&!P.writing&&!P.errorEmitted&&!P.closeEmitted}function I(P,B){let D=!1;function te(z){if(D){C(P,z??L());return}if(D=!0,B.pendingcb--,z){let x=B[Y].splice(0);for(let K=0;K<x.length;K++)x[K](z);C(P,z,B.sync)}else M(B)&&(B.prefinished=!0,P.emit("prefinish"),B.pendingcb++,t.nextTick(U,P,B))}B.sync=!0,B.pendingcb++;try{P._final(te)}catch(z){te(z)}B.sync=!1}function $(P,B){!B.prefinished&&!B.finalCalled&&(typeof P._final=="function"&&!B.destroyed?(B.finalCalled=!0,I(P,B)):(B.prefinished=!0,P.emit("prefinish")))}function se(P,B,D){M(B)&&($(P,B),B.pendingcb===0&&(D?(B.pendingcb++,t.nextTick((te,z)=>{M(z)?U(te,z):z.pendingcb--},P,B)):M(B)&&(B.pendingcb++,U(P,B))))}function U(P,B){B.pendingcb--,B.finished=!0;let D=B[Y].splice(0);for(let te=0;te<D.length;te++)D[te]();if(P.emit("finish"),B.autoDestroy){let te=P._readableState;(!te||te.autoDestroy&&(te.endEmitted||te.readable===!1))&&P.destroy()}}s(ne.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(P){this._writableState&&(this._writableState.destroyed=P)}},writable:{__proto__:null,get(){let P=this._writableState;return!!P&&P.writable!==!1&&!P.destroyed&&!P.errored&&!P.ending&&!P.ended},set(P){this._writableState&&(this._writableState.writable=!!P)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let P=this._writableState;return P?!P.destroyed&&!P.ending&&P.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var J=g.destroy;ne.prototype.destroy=function(P,B){let D=this._writableState;return!D.destroyed&&(D.bufferedIndex<D.buffered.length||D[Y].length)&&t.nextTick(be,D),J.call(this,P,B),this},ne.prototype._undestroy=g.undestroy,ne.prototype._destroy=function(P,B){B(P)},ne.prototype[m.captureRejectionSymbol]=function(P){this.destroy(P)};var pe;function le(){return pe===void 0&&(pe={}),pe}ne.fromWeb=function(P,B){return le().newStreamWritableFromWritableStream(P,B)},ne.toWeb=function(P){return le().newWritableStreamFromStreamWritable(P)}}),Mc=de((e,n)=>{re(),oe(),ie();var t=Kt(),o=(qe(),Ce(We)),{isReadable:l,isWritable:r,isIterable:i,isNodeStream:s,isReadableNodeStream:a,isWritableNodeStream:c,isDuplexNodeStream:u}=kt(),d=Ct(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:b,ERR_INVALID_RETURN_VALUE:y}}=He(),{destroyer:g}=tn(),T=Tt(),k=Hn(),{createDeferredPromise:v}=yt(),_=ea(),A=globalThis.Blob||o.Blob,L=typeof A<"u"?function(Q){return Q instanceof A}:function(Q){return!1},S=globalThis.AbortController||io().AbortController,{FunctionPrototypeCall:R}=De(),N=class extends T{constructor(Q){super(Q),Q?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),Q?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};n.exports=function Q(C,W){if(u(C))return C;if(a(C))return G({readable:C});if(c(C))return G({writable:C});if(s(C))return G({writable:!1,readable:!1});if(typeof C=="function"){let{value:V,write:ae,final:ne,destroy:j}=q(C);if(i(V))return _(N,V,{objectMode:!0,write:ae,final:ne,destroy:j});let fe=V?.then;if(typeof fe=="function"){let ee,ge=R(fe,V,E=>{if(E!=null)throw new y("nully","body",E)},E=>{g(ee,E)});return ee=new N({objectMode:!0,readable:!1,write:ae,final(E){ne(async()=>{try{await ge,t.nextTick(E,null)}catch(H){t.nextTick(E,H)}})},destroy:j})}throw new y("Iterable, AsyncIterable or AsyncFunction",W,V)}if(L(C))return Q(C.arrayBuffer());if(i(C))return _(N,C,{objectMode:!0,writable:!1});if(typeof C?.writable=="object"||typeof C?.readable=="object"){let V=C!=null&&C.readable?a(C?.readable)?C?.readable:Q(C.readable):void 0,ae=C!=null&&C.writable?c(C?.writable)?C?.writable:Q(C.writable):void 0;return G({readable:V,writable:ae})}let Y=C?.then;if(typeof Y=="function"){let V;return R(Y,C,ae=>{ae!=null&&V.push(ae),V.push(null)},ae=>{g(V,ae)}),V=new N({objectMode:!0,writable:!1,read(){}})}throw new b(W,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],C)};function q(Q){let{promise:C,resolve:W}=v(),Y=new S,V=Y.signal;return{value:Q(async function*(){for(;;){let ae=C;C=null;let{chunk:ne,done:j,cb:fe}=await ae;if(t.nextTick(fe),j)return;if(V.aborted)throw new m(void 0,{cause:V.reason});({promise:C,resolve:W}=v()),yield ne}}(),{signal:V}),write(ae,ne,j){let fe=W;W=null,fe({chunk:ae,done:!1,cb:j})},final(ae){let ne=W;W=null,ne({done:!0,cb:ae})},destroy(ae,ne){Y.abort(),ne(ae)}}}function G(Q){let C=Q.readable&&typeof Q.readable.read!="function"?k.wrap(Q.readable):Q.readable,W=Q.writable,Y=!!l(C),V=!!r(W),ae,ne,j,fe,ee;function ge(E){let H=fe;fe=null,H?H(E):E&&ee.destroy(E)}return ee=new N({readableObjectMode:!!(C!=null&&C.readableObjectMode),writableObjectMode:!!(W!=null&&W.writableObjectMode),readable:Y,writable:V}),V&&(d(W,E=>{V=!1,E&&g(C,E),ge(E)}),ee._write=function(E,H,me){W.write(E,H)?me():ae=me},ee._final=function(E){W.end(),ne=E},W.on("drain",function(){if(ae){let E=ae;ae=null,E()}}),W.on("finish",function(){if(ne){let E=ne;ne=null,E()}})),Y&&(d(C,E=>{Y=!1,E&&g(C,E),ge(E)}),C.on("readable",function(){if(j){let E=j;j=null,E()}}),C.on("end",function(){ee.push(null)}),ee._read=function(){for(;;){let E=C.read();if(E===null){j=ee._read;return}if(!ee.push(E))return}}),ee._destroy=function(E,H){!E&&fe!==null&&(E=new m),j=null,ae=null,ne=null,fe===null?H(E):(fe=H,g(W,E),g(C,E))},ee}}),Tt=de((e,n)=>{"use strict";re(),oe(),ie();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:l,ObjectSetPrototypeOf:r}=De();n.exports=a;var i=Hn(),s=ta();r(a.prototype,i.prototype),r(a,i);{let m=l(s.prototype);for(let b=0;b<m.length;b++){let y=m[b];a.prototype[y]||(a.prototype[y]=s.prototype[y])}}function a(m){if(!(this instanceof a))return new a(m);i.call(this,m),s.call(this,m),m?(this.allowHalfOpen=m.allowHalfOpen!==!1,m.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),m.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(a.prototype,{writable:{__proto__:null,...o(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(s.prototype,"writableLength")},writableFinished:{__proto__:null,...o(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(m){this._readableState&&this._writableState&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}}});var c;function u(){return c===void 0&&(c={}),c}a.fromWeb=function(m,b){return u().newStreamDuplexFromReadableWritablePair(m,b)},a.toWeb=function(m){return u().newReadableWritablePairFromDuplex(m)};var d;a.from=function(m){return d||(d=Mc()),d(m,"body")}}),na=de((e,n)=>{"use strict";re(),oe(),ie();var{ObjectSetPrototypeOf:t,Symbol:o}=De();n.exports=a;var{ERR_METHOD_NOT_IMPLEMENTED:l}=He().codes,r=Tt(),{getHighWaterMark:i}=so();t(a.prototype,r.prototype),t(a,r);var s=o("kCallback");function a(d){if(!(this instanceof a))return new a(d);let m=d?i(this,d,"readableHighWaterMark",!0):null;m===0&&(d={...d,highWaterMark:null,readableHighWaterMark:m,writableHighWaterMark:d.writableHighWaterMark||0}),r.call(this,d),this._readableState.sync=!1,this[s]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",u)}function c(d){typeof this._flush=="function"&&!this.destroyed?this._flush((m,b)=>{if(m){d?d(m):this.destroy(m);return}b!=null&&this.push(b),this.push(null),d&&d()}):(this.push(null),d&&d())}function u(){this._final!==c&&c.call(this)}a.prototype._final=c,a.prototype._transform=function(d,m,b){throw new l("_transform()")},a.prototype._write=function(d,m,b){let y=this._readableState,g=this._writableState,T=y.length;this._transform(d,m,(k,v)=>{if(k){b(k);return}v!=null&&this.push(v),g.ended||T===y.length||y.length<y.highWaterMark?b():this[s]=b})},a.prototype._read=function(){if(this[s]){let d=this[s];this[s]=null,d()}}}),ra=de((e,n)=>{"use strict";re(),oe(),ie();var{ObjectSetPrototypeOf:t}=De();n.exports=l;var o=na();t(l.prototype,o.prototype),t(l,o);function l(r){if(!(this instanceof l))return new l(r);o.call(this,r)}l.prototype._transform=function(r,i,s){s(null,r)}}),co=de((e,n)=>{re(),oe(),ie();var t=Kt(),{ArrayIsArray:o,Promise:l,SymbolAsyncIterator:r}=De(),i=Ct(),{once:s}=yt(),a=tn(),c=Tt(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:g},AbortError:T}=He(),{validateFunction:k,validateAbortSignal:v}=qn(),{isIterable:_,isReadable:A,isReadableNodeStream:L,isNodeStream:S,isTransformStream:R,isWebStream:N,isReadableStream:q,isReadableEnded:G}=kt(),Q=globalThis.AbortController||io().AbortController,C,W;function Y(H,me,be){let he=!1;H.on("close",()=>{he=!0});let M=i(H,{readable:me,writable:be},I=>{he=!I});return{destroy:I=>{he||(he=!0,a.destroyer(H,I||new y("pipe")))},cleanup:M}}function V(H){return k(H[H.length-1],"streams[stream.length - 1]"),H.pop()}function ae(H){if(_(H))return H;if(L(H))return ne(H);throw new d("val",["Readable","Iterable","AsyncIterable"],H)}async function*ne(H){W||(W=Hn()),yield*W.prototype[r].call(H)}async function j(H,me,be,{end:he}){let M,I=null,$=J=>{if(J&&(M=J),I){let pe=I;I=null,pe()}},se=()=>new l((J,pe)=>{M?pe(M):I=()=>{M?pe(M):J()}});me.on("drain",$);let U=i(me,{readable:!1},$);try{me.writableNeedDrain&&await se();for await(let J of H)me.write(J)||await se();he&&me.end(),await se(),be()}catch(J){be(M!==J?u(M,J):J)}finally{U(),me.off("drain",$)}}async function fe(H,me,be,{end:he}){R(me)&&(me=me.writable);let M=me.getWriter();try{for await(let I of H)await M.ready,M.write(I).catch(()=>{});await M.ready,he&&await M.close(),be()}catch(I){try{await M.abort(I),be(I)}catch($){be($)}}}function ee(...H){return ge(H,s(V(H)))}function ge(H,me,be){if(H.length===1&&o(H[0])&&(H=H[0]),H.length<2)throw new b("streams");let he=new Q,M=he.signal,I=be?.signal,$=[];v(I,"options.signal");function se(){B(new T)}I?.addEventListener("abort",se);let U,J,pe=[],le=0;function P(K){B(K,--le===0)}function B(K,X){if(K&&(!U||U.code==="ERR_STREAM_PREMATURE_CLOSE")&&(U=K),!(!U&&!X)){for(;pe.length;)pe.shift()(U);I?.removeEventListener("abort",se),he.abort(),X&&(U||$.forEach(ye=>ye()),t.nextTick(me,U,J))}}let D;for(let K=0;K<H.length;K++){let X=H[K],ye=K<H.length-1,Te=K>0,ke=ye||be?.end!==!1,f=K===H.length-1;if(S(X)){let h=function(p){p&&p.name!=="AbortError"&&p.code!=="ERR_STREAM_PREMATURE_CLOSE"&&P(p)};var te=h;if(ke){let{destroy:p,cleanup:w}=Y(X,ye,Te);pe.push(p),A(X)&&f&&$.push(w)}X.on("error",h),A(X)&&f&&$.push(()=>{X.removeListener("error",h)})}if(K===0)if(typeof X=="function"){if(D=X({signal:M}),!_(D))throw new m("Iterable, AsyncIterable or Stream","source",D)}else _(X)||L(X)||R(X)?D=X:D=c.from(X);else if(typeof X=="function"){if(R(D)){var z;D=ae((z=D)===null||z===void 0?void 0:z.readable)}else D=ae(D);if(D=X(D,{signal:M}),ye){if(!_(D,!0))throw new m("AsyncIterable",`transform[${K-1}]`,D)}else{var x;C||(C=ra());let h=new C({objectMode:!0}),p=(x=D)===null||x===void 0?void 0:x.then;if(typeof p=="function")le++,p.call(D,F=>{J=F,F!=null&&h.write(F),ke&&h.end(),t.nextTick(P)},F=>{h.destroy(F),t.nextTick(P,F)});else if(_(D,!0))le++,j(D,h,P,{end:ke});else if(q(D)||R(D)){let F=D.readable||D;le++,j(F,h,P,{end:ke})}else throw new m("AsyncIterable or Promise","destination",D);D=h;let{destroy:w,cleanup:O}=Y(D,!1,!0);pe.push(w),f&&$.push(O)}}else if(S(X)){if(L(D)){le+=2;let h=E(D,X,P,{end:ke});A(X)&&f&&$.push(h)}else if(R(D)||q(D)){let h=D.readable||D;le++,j(h,X,P,{end:ke})}else if(_(D))le++,j(D,X,P,{end:ke});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],D);D=X}else if(N(X)){if(L(D))le++,fe(ae(D),X,P,{end:ke});else if(q(D)||_(D))le++,fe(D,X,P,{end:ke});else if(R(D))le++,fe(D.readable,X,P,{end:ke});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],D);D=X}else D=c.from(X)}return(M!=null&&M.aborted||I!=null&&I.aborted)&&t.nextTick(se),D}function E(H,me,be,{end:he}){let M=!1;if(me.on("close",()=>{M||be(new g)}),H.pipe(me,{end:!1}),he){let $=function(){M=!0,me.end()};var I=$;G(H)?t.nextTick($):H.once("end",$)}else be();return i(H,{readable:!0,writable:!1},$=>{let se=H._readableState;$&&$.code==="ERR_STREAM_PREMATURE_CLOSE"&&se&&se.ended&&!se.errored&&!se.errorEmitted?H.once("end",be).once("error",be):be($)}),i(me,{readable:!1,writable:!0},be)}n.exports={pipelineImpl:ge,pipeline:ee}}),ia=de((e,n)=>{"use strict";re(),oe(),ie();var{pipeline:t}=co(),o=Tt(),{destroyer:l}=tn(),{isNodeStream:r,isReadable:i,isWritable:s,isWebStream:a,isTransformStream:c,isWritableStream:u,isReadableStream:d}=kt(),{AbortError:m,codes:{ERR_INVALID_ARG_VALUE:b,ERR_MISSING_ARGS:y}}=He(),g=Ct();n.exports=function(...T){if(T.length===0)throw new y("streams");if(T.length===1)return o.from(T[0]);let k=[...T];if(typeof T[0]=="function"&&(T[0]=o.from(T[0])),typeof T[T.length-1]=="function"){let C=T.length-1;T[C]=o.from(T[C])}for(let C=0;C<T.length;++C)if(!(!r(T[C])&&!a(T[C]))){if(C<T.length-1&&!(i(T[C])||d(T[C])||c(T[C])))throw new b(`streams[${C}]`,k[C],"must be readable");if(C>0&&!(s(T[C])||u(T[C])||c(T[C])))throw new b(`streams[${C}]`,k[C],"must be writable")}let v,_,A,L,S;function R(C){let W=L;L=null,W?W(C):C?S.destroy(C):!Q&&!G&&S.destroy()}let N=T[0],q=t(T,R),G=!!(s(N)||u(N)||c(N)),Q=!!(i(q)||d(q)||c(q));if(S=new o({writableObjectMode:!!(N!=null&&N.writableObjectMode),readableObjectMode:!!(q!=null&&q.writableObjectMode),writable:G,readable:Q}),G){if(r(N))S._write=function(W,Y,V){N.write(W,Y)?V():v=V},S._final=function(W){N.end(),_=W},N.on("drain",function(){if(v){let W=v;v=null,W()}});else if(a(N)){let W=(c(N)?N.writable:N).getWriter();S._write=async function(Y,V,ae){try{await W.ready,W.write(Y).catch(()=>{}),ae()}catch(ne){ae(ne)}},S._final=async function(Y){try{await W.ready,W.close().catch(()=>{}),_=Y}catch(V){Y(V)}}}let C=c(q)?q.readable:q;g(C,()=>{if(_){let W=_;_=null,W()}})}if(Q){if(r(q))q.on("readable",function(){if(A){let C=A;A=null,C()}}),q.on("end",function(){S.push(null)}),S._read=function(){for(;;){let C=q.read();if(C===null){A=S._read;return}if(!S.push(C))return}};else if(a(q)){let C=(c(q)?q.readable:q).getReader();S._read=async function(){for(;;)try{let{value:W,done:Y}=await C.read();if(!S.push(W))return;if(Y){S.push(null);return}}catch{return}}}}return S._destroy=function(C,W){!C&&L!==null&&(C=new m),A=null,v=null,_=null,L===null?W(C):(L=W,r(q)&&l(q,C))},S}}),Nc=de((e,n)=>{"use strict";re(),oe(),ie();var t=globalThis.AbortController||io().AbortController,{codes:{ERR_INVALID_ARG_VALUE:o,ERR_INVALID_ARG_TYPE:l,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:i},AbortError:s}=He(),{validateAbortSignal:a,validateInteger:c,validateObject:u}=qn(),d=De().Symbol("kWeak"),{finished:m}=Ct(),b=ia(),{addAbortSignalNoValidate:y}=Vn(),{isWritable:g,isNodeStream:T}=kt(),{ArrayPrototypePush:k,MathFloor:v,Number:_,NumberIsNaN:A,Promise:L,PromiseReject:S,PromisePrototypeThen:R,Symbol:N}=De(),q=N("kEmpty"),G=N("kEof");function Q(he,M){if(M!=null&&u(M,"options"),M?.signal!=null&&a(M.signal,"options.signal"),T(he)&&!g(he))throw new o("stream",he,"must be writable");let I=b(this,he);return M!=null&&M.signal&&y(M.signal,I),I}function C(he,M){if(typeof he!="function")throw new l("fn",["Function","AsyncFunction"],he);M!=null&&u(M,"options"),M?.signal!=null&&a(M.signal,"options.signal");let I=1;return M?.concurrency!=null&&(I=v(M.concurrency)),c(I,"concurrency",1),async function*(){var $,se;let U=new t,J=this,pe=[],le=U.signal,P={signal:le},B=()=>U.abort();M!=null&&($=M.signal)!==null&&$!==void 0&&$.aborted&&B(),M==null||(se=M.signal)===null||se===void 0||se.addEventListener("abort",B);let D,te,z=!1;function x(){z=!0}async function K(){try{for await(let Te of J){var X;if(z)return;if(le.aborted)throw new s;try{Te=he(Te,P)}catch(ke){Te=S(ke)}Te!==q&&(typeof((X=Te)===null||X===void 0?void 0:X.catch)=="function"&&Te.catch(x),pe.push(Te),D&&(D(),D=null),!z&&pe.length&&pe.length>=I&&await new L(ke=>{te=ke}))}pe.push(G)}catch(Te){let ke=S(Te);R(ke,void 0,x),pe.push(ke)}finally{var ye;z=!0,D&&(D(),D=null),M==null||(ye=M.signal)===null||ye===void 0||ye.removeEventListener("abort",B)}}K();try{for(;;){for(;pe.length>0;){let X=await pe[0];if(X===G)return;if(le.aborted)throw new s;X!==q&&(yield X),pe.shift(),te&&(te(),te=null)}await new L(X=>{D=X})}}finally{U.abort(),z=!0,te&&(te(),te=null)}}.call(this)}function W(he=void 0){return he!=null&&u(he,"options"),he?.signal!=null&&a(he.signal,"options.signal"),async function*(){let M=0;for await(let $ of this){var I;if(he!=null&&(I=he.signal)!==null&&I!==void 0&&I.aborted)throw new s({cause:he.signal.reason});yield[M++,$]}}.call(this)}async function Y(he,M=void 0){for await(let I of j.call(this,he,M))return!0;return!1}async function V(he,M=void 0){if(typeof he!="function")throw new l("fn",["Function","AsyncFunction"],he);return!await Y.call(this,async(...I)=>!await he(...I),M)}async function ae(he,M){for await(let I of j.call(this,he,M))return I}async function ne(he,M){if(typeof he!="function")throw new l("fn",["Function","AsyncFunction"],he);async function I($,se){return await he($,se),q}for await(let $ of C.call(this,I,M));}function j(he,M){if(typeof he!="function")throw new l("fn",["Function","AsyncFunction"],he);async function I($,se){return await he($,se)?$:q}return C.call(this,I,M)}var fe=class extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function ee(he,M,I){var $;if(typeof he!="function")throw new l("reducer",["Function","AsyncFunction"],he);I!=null&&u(I,"options"),I?.signal!=null&&a(I.signal,"options.signal");let se=arguments.length>1;if(I!=null&&($=I.signal)!==null&&$!==void 0&&$.aborted){let P=new s(void 0,{cause:I.signal.reason});throw this.once("error",()=>{}),await m(this.destroy(P)),P}let U=new t,J=U.signal;if(I!=null&&I.signal){let P={once:!0,[d]:this};I.signal.addEventListener("abort",()=>U.abort(),P)}let pe=!1;try{for await(let P of this){var le;if(pe=!0,I!=null&&(le=I.signal)!==null&&le!==void 0&&le.aborted)throw new s;se?M=await he(M,P,{signal:J}):(M=P,se=!0)}if(!pe&&!se)throw new fe}finally{U.abort()}return M}async function ge(he){he!=null&&u(he,"options"),he?.signal!=null&&a(he.signal,"options.signal");let M=[];for await(let $ of this){var I;if(he!=null&&(I=he.signal)!==null&&I!==void 0&&I.aborted)throw new s(void 0,{cause:he.signal.reason});k(M,$)}return M}function E(he,M){let I=C.call(this,he,M);return async function*(){for await(let $ of I)yield*$}.call(this)}function H(he){if(he=_(he),A(he))return 0;if(he<0)throw new i("number",">= 0",he);return he}function me(he,M=void 0){return M!=null&&u(M,"options"),M?.signal!=null&&a(M.signal,"options.signal"),he=H(he),async function*(){var I;if(M!=null&&(I=M.signal)!==null&&I!==void 0&&I.aborted)throw new s;for await(let se of this){var $;if(M!=null&&($=M.signal)!==null&&$!==void 0&&$.aborted)throw new s;he--<=0&&(yield se)}}.call(this)}function be(he,M=void 0){return M!=null&&u(M,"options"),M?.signal!=null&&a(M.signal,"options.signal"),he=H(he),async function*(){var I;if(M!=null&&(I=M.signal)!==null&&I!==void 0&&I.aborted)throw new s;for await(let se of this){var $;if(M!=null&&($=M.signal)!==null&&$!==void 0&&$.aborted)throw new s;if(he-- >0)yield se;else return}}.call(this)}n.exports.streamReturningOperators={asIndexedPairs:W,drop:me,filter:j,flatMap:E,map:C,take:be,compose:Q},n.exports.promiseReturningOperators={every:V,forEach:ne,reduce:ee,toArray:ge,some:Y,find:ae}}),oa=de((e,n)=>{"use strict";re(),oe(),ie();var{ArrayPrototypePop:t,Promise:o}=De(),{isIterable:l,isNodeStream:r,isWebStream:i}=kt(),{pipelineImpl:s}=co(),{finished:a}=Ct();sa();function c(...u){return new o((d,m)=>{let b,y,g=u[u.length-1];if(g&&typeof g=="object"&&!r(g)&&!l(g)&&!i(g)){let T=t(u);b=T.signal,y=T.end}s(u,(T,k)=>{T?m(T):d(k)},{signal:b,end:y})})}n.exports={finished:a,pipeline:c}}),sa=de((e,n)=>{re(),oe(),ie();var{Buffer:t}=(qe(),Ce(We)),{ObjectDefineProperty:o,ObjectKeys:l,ReflectApply:r}=De(),{promisify:{custom:i}}=yt(),{streamReturningOperators:s,promiseReturningOperators:a}=Nc(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=He(),u=ia(),{pipeline:d}=co(),{destroyer:m}=tn(),b=Ct(),y=oa(),g=kt(),T=n.exports=oo().Stream;T.isDisturbed=g.isDisturbed,T.isErrored=g.isErrored,T.isReadable=g.isReadable,T.Readable=Hn();for(let _ of l(s)){let A=function(...S){if(new.target)throw c();return T.Readable.from(r(L,this,S))};k=A;let L=s[_];o(A,"name",{__proto__:null,value:L.name}),o(A,"length",{__proto__:null,value:L.length}),o(T.Readable.prototype,_,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}var k;for(let _ of l(a)){let A=function(...S){if(new.target)throw c();return r(L,this,S)};k=A;let L=a[_];o(A,"name",{__proto__:null,value:L.name}),o(A,"length",{__proto__:null,value:L.length}),o(T.Readable.prototype,_,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}var k;T.Writable=ta(),T.Duplex=Tt(),T.Transform=na(),T.PassThrough=ra(),T.pipeline=d;var{addAbortSignal:v}=Vn();T.addAbortSignal=v,T.finished=b,T.destroy=m,T.compose=u,o(T,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return y}}),o(d,i,{__proto__:null,enumerable:!0,get(){return y.pipeline}}),o(b,i,{__proto__:null,enumerable:!0,get(){return y.finished}}),T.Stream=T,T._isUint8Array=function(_){return _ instanceof Uint8Array},T._uint8ArrayToBuffer=function(_){return t.from(_.buffer,_.byteOffset,_.byteLength)}}),zt=de((e,n)=>{"use strict";re(),oe(),ie();var t=sa(),o=oa(),l=t.Readable.destroy;n.exports=t.Readable,n.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,n.exports._isUint8Array=t._isUint8Array,n.exports.isDisturbed=t.isDisturbed,n.exports.isErrored=t.isErrored,n.exports.isReadable=t.isReadable,n.exports.Readable=t.Readable,n.exports.Writable=t.Writable,n.exports.Duplex=t.Duplex,n.exports.Transform=t.Transform,n.exports.PassThrough=t.PassThrough,n.exports.addAbortSignal=t.addAbortSignal,n.exports.finished=t.finished,n.exports.destroy=t.destroy,n.exports.destroy=l,n.exports.pipeline=t.pipeline,n.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return o}}),n.exports.Stream=t.Stream,n.exports.default=n.exports}),Uc=de((e,n)=>{re(),oe(),ie(),typeof Object.create=="function"?n.exports=function(t,o){o&&(t.super_=o,t.prototype=Object.create(o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,o){if(o){t.super_=o;var l=function(){};l.prototype=o.prototype,t.prototype=new l,t.prototype.constructor=t}}}),Lc=de((e,n)=>{"use strict";re(),oe(),ie();var{Buffer:t}=(qe(),Ce(We)),o=Symbol.for("BufferList");function l(r){if(!(this instanceof l))return new l(r);l._init.call(this,r)}l._init=function(r){Object.defineProperty(this,o,{value:!0}),this._bufs=[],this.length=0,r&&this.append(r)},l.prototype._new=function(r){return new l(r)},l.prototype._offset=function(r){if(r===0)return[0,0];let i=0;for(let s=0;s<this._bufs.length;s++){let a=i+this._bufs[s].length;if(r<a||s===this._bufs.length-1)return[s,r-i];i=a}},l.prototype._reverseOffset=function(r){let i=r[0],s=r[1];for(let a=0;a<i;a++)s+=this._bufs[a].length;return s},l.prototype.get=function(r){if(r>this.length||r<0)return;let i=this._offset(r);return this._bufs[i[0]][i[1]]},l.prototype.slice=function(r,i){return typeof r=="number"&&r<0&&(r+=this.length),typeof i=="number"&&i<0&&(i+=this.length),this.copy(null,0,r,i)},l.prototype.copy=function(r,i,s,a){if((typeof s!="number"||s<0)&&(s=0),(typeof a!="number"||a>this.length)&&(a=this.length),s>=this.length||a<=0)return r||t.alloc(0);let c=!!r,u=this._offset(s),d=a-s,m=d,b=c&&i||0,y=u[1];if(s===0&&a===this.length){if(!c)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let g=0;g<this._bufs.length;g++)this._bufs[g].copy(r,b),b+=this._bufs[g].length;return r}if(m<=this._bufs[u[0]].length-y)return c?this._bufs[u[0]].copy(r,i,y,y+m):this._bufs[u[0]].slice(y,y+m);c||(r=t.allocUnsafe(d));for(let g=u[0];g<this._bufs.length;g++){let T=this._bufs[g].length-y;if(m>T)this._bufs[g].copy(r,b,y),b+=T;else{this._bufs[g].copy(r,b,y,y+m),b+=T;break}m-=T,y&&(y=0)}return r.length>b?r.slice(0,b):r},l.prototype.shallowSlice=function(r,i){if(r=r||0,i=typeof i!="number"?this.length:i,r<0&&(r+=this.length),i<0&&(i+=this.length),r===i)return this._new();let s=this._offset(r),a=this._offset(i),c=this._bufs.slice(s[0],a[0]+1);return a[1]===0?c.pop():c[c.length-1]=c[c.length-1].slice(0,a[1]),s[1]!==0&&(c[0]=c[0].slice(s[1])),this._new(c)},l.prototype.toString=function(r,i,s){return this.slice(i,s).toString(r)},l.prototype.consume=function(r){if(r=Math.trunc(r),Number.isNaN(r)||r<=0)return this;for(;this._bufs.length;)if(r>=this._bufs[0].length)r-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(r),this.length-=r;break}return this},l.prototype.duplicate=function(){let r=this._new();for(let i=0;i<this._bufs.length;i++)r.append(this._bufs[i]);return r},l.prototype.append=function(r){if(r==null)return this;if(r.buffer)this._appendBuffer(t.from(r.buffer,r.byteOffset,r.byteLength));else if(Array.isArray(r))for(let i=0;i<r.length;i++)this.append(r[i]);else if(this._isBufferList(r))for(let i=0;i<r._bufs.length;i++)this.append(r._bufs[i]);else typeof r=="number"&&(r=r.toString()),this._appendBuffer(t.from(r));return this},l.prototype._appendBuffer=function(r){this._bufs.push(r),this.length+=r.length},l.prototype.indexOf=function(r,i,s){if(s===void 0&&typeof i=="string"&&(s=i,i=void 0),typeof r=="function"||Array.isArray(r))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof r=="number"?r=t.from([r]):typeof r=="string"?r=t.from(r,s):this._isBufferList(r)?r=r.slice():Array.isArray(r.buffer)?r=t.from(r.buffer,r.byteOffset,r.byteLength):t.isBuffer(r)||(r=t.from(r)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),r.length===0)return i>this.length?this.length:i;let a=this._offset(i),c=a[0],u=a[1];for(;c<this._bufs.length;c++){let d=this._bufs[c];for(;u<d.length;)if(d.length-u>=r.length){let m=d.indexOf(r,u);if(m!==-1)return this._reverseOffset([c,m]);u=d.length-r.length+1}else{let m=this._reverseOffset([c,u]);if(this._match(m,r))return m;u++}u=0}return-1},l.prototype._match=function(r,i){if(this.length-r<i.length)return!1;for(let s=0;s<i.length;s++)if(this.get(r+s)!==i[s])return!1;return!0},function(){let r={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let i in r)(function(s){r[s]===null?l.prototype[s]=function(a,c){return this.slice(a,a+c)[s](0,c)}:l.prototype[s]=function(a=0){return this.slice(a,a+r[s])[s](0)}})(i)}(),l.prototype._isBufferList=function(r){return r instanceof l||l.isBufferList(r)},l.isBufferList=function(r){return r!=null&&r[o]},n.exports=l}),xc=de((e,n)=>{"use strict";re(),oe(),ie();var t=zt().Duplex,o=Uc(),l=Lc();function r(i){if(!(this instanceof r))return new r(i);if(typeof i=="function"){this._callback=i;let s=function(a){this._callback&&(this._callback(a),this._callback=null)}.bind(this);this.on("pipe",function(a){a.on("error",s)}),this.on("unpipe",function(a){a.removeListener("error",s)}),i=null}l._init.call(this,i),t.call(this)}o(r,t),Object.assign(r.prototype,l.prototype),r.prototype._new=function(i){return new r(i)},r.prototype._write=function(i,s,a){this._appendBuffer(i),typeof a=="function"&&a()},r.prototype._read=function(i){if(!this.length)return this.push(null);i=Math.min(i,this.length),this.push(this.slice(0,i)),this.consume(i)},r.prototype.end=function(i){t.prototype.end.call(this,i),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype._destroy=function(i,s){this._bufs.length=0,this.length=0,s(i)},r.prototype._isBufferList=function(i){return i instanceof r||i instanceof l||r.isBufferList(i)},r.isBufferList=l.isBufferList,n.exports=r,n.exports.BufferListStream=r,n.exports.BufferList=l}),Bc=de((e,n)=>{re(),oe(),ie();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};n.exports=t}),aa=de((e,n)=>{re(),oe(),ie();var t=n.exports,{Buffer:o}=(qe(),Ce(We));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let r in t.requiredHeaderFlags){let i=t.requiredHeaderFlags[r];t.requiredHeaderFlagsErrors[r]="Invalid header flag bits, must be 0x"+i.toString(16)+" for "+t.types[r]+" packet"}t.codes={};for(let r in t.types){let i=t.types[r];t.codes[i]=r}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=o.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=o.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=o.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let r in t.properties){let i=t.properties[r];t.propertiesCodes[i]=r}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function l(r){return[0,1,2].map(i=>[0,1].map(s=>[0,1].map(a=>{let c=o.alloc(1);return c.writeUInt8(t.codes[r]<<t.CMD_SHIFT|(s?t.DUP_MASK:0)|i<<t.QOS_SHIFT|a,0,!0),c})))}t.PUBLISH_HEADER=l("publish"),t.SUBSCRIBE_HEADER=l("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=l("unsubscribe"),t.ACKS={unsuback:l("unsuback"),puback:l("puback"),pubcomp:l("pubcomp"),pubrel:l("pubrel"),pubrec:l("pubrec")},t.SUBACK_HEADER=o.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=o.from([3]),t.VERSION4=o.from([4]),t.VERSION5=o.from([5]),t.VERSION131=o.from([131]),t.VERSION132=o.from([132]),t.QOS=[0,1,2].map(r=>o.from([r])),t.EMPTY={pingreq:o.from([t.codes.pingreq<<4,0]),pingresp:o.from([t.codes.pingresp<<4,0]),disconnect:o.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Dc=de((e,n)=>{re(),oe(),ie();var t=1e3,o=t*60,l=o*60,r=l*24,i=r*7,s=r*365.25;n.exports=function(m,b){b=b||{};var y=typeof m;if(y==="string"&&m.length>0)return a(m);if(y==="number"&&isFinite(m))return b.long?u(m):c(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function a(m){if(m=String(m),!(m.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(b){var y=parseFloat(b[1]),g=(b[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return y*s;case"weeks":case"week":case"w":return y*i;case"days":case"day":case"d":return y*r;case"hours":case"hour":case"hrs":case"hr":case"h":return y*l;case"minutes":case"minute":case"mins":case"min":case"m":return y*o;case"seconds":case"second":case"secs":case"sec":case"s":return y*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function c(m){var b=Math.abs(m);return b>=r?Math.round(m/r)+"d":b>=l?Math.round(m/l)+"h":b>=o?Math.round(m/o)+"m":b>=t?Math.round(m/t)+"s":m+"ms"}function u(m){var b=Math.abs(m);return b>=r?d(m,b,r,"day"):b>=l?d(m,b,l,"hour"):b>=o?d(m,b,o,"minute"):b>=t?d(m,b,t,"second"):m+" ms"}function d(m,b,y,g){var T=b>=y*1.5;return Math.round(m/y)+" "+g+(T?"s":"")}}),Fc=de((e,n)=>{re(),oe(),ie();function t(o){r.debug=r,r.default=r,r.coerce=d,r.disable=a,r.enable=s,r.enabled=c,r.humanize=Dc(),r.destroy=m,Object.keys(o).forEach(b=>{r[b]=o[b]}),r.names=[],r.skips=[],r.formatters={};function l(b){let y=0;for(let g=0;g<b.length;g++)y=(y<<5)-y+b.charCodeAt(g),y|=0;return r.colors[Math.abs(y)%r.colors.length]}r.selectColor=l;function r(b){let y,g=null,T,k;function v(..._){if(!v.enabled)return;let A=v,L=Number(new Date),S=L-(y||L);A.diff=S,A.prev=y,A.curr=L,y=L,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let R=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(N,q)=>{if(N==="%%")return"%";R++;let G=r.formatters[q];if(typeof G=="function"){let Q=_[R];N=G.call(A,Q),_.splice(R,1),R--}return N}),r.formatArgs.call(A,_),(A.log||r.log).apply(A,_)}return v.namespace=b,v.useColors=r.useColors(),v.color=r.selectColor(b),v.extend=i,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(T!==r.namespaces&&(T=r.namespaces,k=r.enabled(b)),k),set:_=>{g=_}}),typeof r.init=="function"&&r.init(v),v}function i(b,y){let g=r(this.namespace+(typeof y>"u"?":":y)+b);return g.log=this.log,g}function s(b){r.save(b),r.namespaces=b,r.names=[],r.skips=[];let y,g=(typeof b=="string"?b:"").split(/[\s,]+/),T=g.length;for(y=0;y<T;y++)g[y]&&(b=g[y].replace(/\*/g,".*?"),b[0]==="-"?r.skips.push(new RegExp("^"+b.slice(1)+"$")):r.names.push(new RegExp("^"+b+"$")))}function a(){let b=[...r.names.map(u),...r.skips.map(u).map(y=>"-"+y)].join(",");return r.enable(""),b}function c(b){if(b[b.length-1]==="*")return!0;let y,g;for(y=0,g=r.skips.length;y<g;y++)if(r.skips[y].test(b))return!1;for(y=0,g=r.names.length;y<g;y++)if(r.names[y].test(b))return!0;return!1}function u(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}function d(b){return b instanceof Error?b.stack||b.message:b}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}n.exports=t}),_t=de((e,n)=>{re(),oe(),ie(),e.formatArgs=o,e.save=l,e.load=r,e.useColors=t,e.storage=i(),e.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;a.splice(1,0,c,"color: inherit");let u=0,d=0;a[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(u++,m==="%c"&&(d=u))}),a.splice(d,0,c)}e.log=console.debug||console.log||(()=>{});function l(a){try{a?e.storage.setItem("debug",a):e.storage.removeItem("debug")}catch{}}function r(){let a;try{a=e.storage.getItem("debug")}catch{}return!a&&typeof we<"u"&&"env"in we&&(a=we.env.DEBUG),a}function i(){try{return localStorage}catch{}}n.exports=Fc()(e);var{formatters:s}=n.exports;s.j=function(a){try{return JSON.stringify(a)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}),jc=de((e,n)=>{re(),oe(),ie();var t=xc(),{EventEmitter:o}=(nn(),Ce(Jt)),l=Bc(),r=aa(),i=_t()("mqtt-packet:parser"),s=class Hi extends o{constructor(){super(),this.parser=this.constructor.parser}static parser(c){return this instanceof Hi?(this.settings=c||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Hi().parser(c)}_resetState(){i("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new l,this.error=null,this._list=t(),this._stateCounter=0}parse(c){for(this.error&&this._resetState(),this._list.append(c),i("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,i("parse: state complete. _stateCounter is now: %d",this._stateCounter),i("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return i("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let c=this._list.readUInt8(0),u=c>>r.CMD_SHIFT;this.packet.cmd=r.types[u];let d=c&15,m=r.requiredHeaderFlags[u];return m!=null&&d!==m?this._emitError(new Error(r.requiredHeaderFlagsErrors[u])):(this.packet.retain=(c&r.RETAIN_MASK)!==0,this.packet.qos=c>>r.QOS_SHIFT&r.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(c&r.DUP_MASK)!==0,i("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let c=this._parseVarByteNum(!0);return c&&(this.packet.length=c.value,this._list.consume(c.bytes)),i("_parseLength %d",c.value),!!c}_parsePayload(){i("_parsePayload: payload %O",this._list);let c=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}c=!0}return i("_parsePayload complete result: %s",c),c}_parseConnect(){i("_parseConnect");let c,u,d,m,b={},y=this.packet,g=this._parseString();if(g===null)return this._emitError(new Error("Cannot parse protocolId"));if(g!=="MQTT"&&g!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(y.protocolId=g,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(y.protocolVersion=this._list.readUInt8(this._pos),y.protocolVersion>=128&&(y.bridgeMode=!0,y.protocolVersion=y.protocolVersion-128),y.protocolVersion!==3&&y.protocolVersion!==4&&y.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));b.username=this._list.readUInt8(this._pos)&r.USERNAME_MASK,b.password=this._list.readUInt8(this._pos)&r.PASSWORD_MASK,b.will=this._list.readUInt8(this._pos)&r.WILL_FLAG_MASK;let T=!!(this._list.readUInt8(this._pos)&r.WILL_RETAIN_MASK),k=(this._list.readUInt8(this._pos)&r.WILL_QOS_MASK)>>r.WILL_QOS_SHIFT;if(b.will)y.will={},y.will.retain=T,y.will.qos=k;else{if(T)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(k)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(y.clean=(this._list.readUInt8(this._pos)&r.CLEAN_SESSION_MASK)!==0,this._pos++,y.keepalive=this._parseNum(),y.keepalive===-1)return this._emitError(new Error("Packet too short"));if(y.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(y.properties=_)}let v=this._parseString();if(v===null)return this._emitError(new Error("Packet too short"));if(y.clientId=v,i("_parseConnect: packet.clientId: %s",y.clientId),b.will){if(y.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(y.will.properties=_)}if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse will topic"));if(y.will.topic=c,i("_parseConnect: packet.will.topic: %s",y.will.topic),u=this._parseBuffer(),u===null)return this._emitError(new Error("Cannot parse will payload"));y.will.payload=u,i("_parseConnect: packet.will.paylaod: %s",y.will.payload)}if(b.username){if(m=this._parseString(),m===null)return this._emitError(new Error("Cannot parse username"));y.username=m,i("_parseConnect: packet.username: %s",y.username)}if(b.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));y.password=d}return this.settings=y,i("_parseConnect: complete"),y}_parseConnack(){i("_parseConnack");let c=this.packet;if(this._list.length<1)return null;let u=this._list.readUInt8(this._pos++);if(u>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(c.sessionPresent=!!(u&r.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?c.reasonCode=this._list.readUInt8(this._pos++):c.reasonCode=0;else{if(this._list.length<2)return null;c.returnCode=this._list.readUInt8(this._pos++)}if(c.returnCode===-1||c.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(c.properties=d)}i("_parseConnack: complete")}_parsePublish(){i("_parsePublish");let c=this.packet;if(c.topic=this._parseString(),c.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(c.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(c.properties=u)}c.payload=this._list.slice(this._pos,c.length),i("_parsePublish: payload from buffer list: %o",c.payload)}}_parseSubscribe(){i("_parseSubscribe");let c=this.packet,u,d,m,b,y,g,T;if(c.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let k=this._parseProperties();Object.getOwnPropertyNames(k).length&&(c.properties=k)}if(c.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<c.length;){if(u=this._parseString(),u===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=c.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(m=d&r.SUBSCRIBE_OPTIONS_QOS_MASK,m>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(g=(d>>r.SUBSCRIBE_OPTIONS_NL_SHIFT&r.SUBSCRIBE_OPTIONS_NL_MASK)!==0,y=(d>>r.SUBSCRIBE_OPTIONS_RAP_SHIFT&r.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,b=d>>r.SUBSCRIBE_OPTIONS_RH_SHIFT&r.SUBSCRIBE_OPTIONS_RH_MASK,b>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));T={topic:u,qos:m},this.settings.protocolVersion===5?(T.nl=g,T.rap=y,T.rh=b):this.settings.bridgeMode&&(T.rh=0,T.rap=!0,T.nl=!0),i("_parseSubscribe: push subscription `%s` to subscription",T),c.subscriptions.push(T)}}}_parseSuback(){i("_parseSuback");let c=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(c.properties=u)}if(c.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let u=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!r.MQTT5_SUBACK_CODES[u])return this._emitError(new Error("Invalid suback code"))}else if(u>2&&u!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(u)}}}_parseUnsubscribe(){i("_parseUnsubscribe");let c=this.packet;if(c.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(c.properties=u)}if(c.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<c.length;){let u=this._parseString();if(u===null)return this._emitError(new Error("Cannot parse topic"));i("_parseUnsubscribe: push topic `%s` to unsubscriptions",u),c.unsubscriptions.push(u)}}}_parseUnsuback(){i("_parseUnsuback");let c=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&c.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(c.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let u=this._parseProperties();for(Object.getOwnPropertyNames(u).length&&(c.properties=u),c.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!r.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){i("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let c=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(c.length>2){switch(c.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!r.MQTT5_PUBACK_PUBREC_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!r.MQTT5_PUBREL_PUBCOMP_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}i("_parseConfirmation: packet.reasonCode `%d`",c.reasonCode)}else c.reasonCode=0;if(c.length>3){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(c.properties=u)}}return!0}_parseDisconnect(){let c=this.packet;if(i("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(c.reasonCode=this._parseByte(),r.MQTT5_DISCONNECT_CODES[c.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):c.reasonCode=0;let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(c.properties=u)}return i("_parseDisconnect result: true"),!0}_parseAuth(){i("_parseAuth");let c=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(c.reasonCode=this._parseByte(),!r.MQTT5_AUTH_CODES[c.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let u=this._parseProperties();return Object.getOwnPropertyNames(u).length&&(c.properties=u),i("_parseAuth: result: true"),!0}_parseMessageId(){let c=this.packet;return c.messageId=this._parseNum(),c.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(i("_parseMessageId: packet.messageId %d",c.messageId),!0)}_parseString(c){let u=this._parseNum(),d=u+this._pos;if(u===-1||d>this._list.length||d>this.packet.length)return null;let m=this._list.toString("utf8",this._pos,d);return this._pos+=u,i("_parseString: result: %s",m),m}_parseStringPair(){return i("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let c=this._parseNum(),u=c+this._pos;if(c===-1||u>this._list.length||u>this.packet.length)return null;let d=this._list.slice(this._pos,u);return this._pos+=c,i("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let c=this._list.readUInt16BE(this._pos);return this._pos+=2,i("_parseNum: result: %s",c),c}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let c=this._list.readUInt32BE(this._pos);return this._pos+=4,i("_parse4ByteNum: result: %s",c),c}_parseVarByteNum(c){i("_parseVarByteNum");let u=4,d=0,m=1,b=0,y=!1,g,T=this._pos?this._pos:0;for(;d<u&&T+d<this._list.length;){if(g=this._list.readUInt8(T+d++),b+=m*(g&r.VARBYTEINT_MASK),m*=128,!(g&r.VARBYTEINT_FIN_MASK)){y=!0;break}if(this._list.length<=d)break}return!y&&d===u&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),T&&(this._pos+=d),y?c?y={bytes:d,value:b}:y=b:y=!1,i("_parseVarByteNum: result: %o",y),y}_parseByte(){let c;return this._pos<this._list.length&&(c=this._list.readUInt8(this._pos),this._pos++),i("_parseByte: result: %o",c),c}_parseByType(c){switch(i("_parseByType: type: %s",c),c){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){i("_parseProperties");let c=this._parseVarByteNum(),u=this._pos+c,d={};for(;this._pos<u;){let m=this._parseByte();if(!m)return this._emitError(new Error("Cannot parse property code type")),!1;let b=r.propertiesCodes[m];if(!b)return this._emitError(new Error("Unknown property")),!1;if(b==="userProperties"){d[b]||(d[b]=Object.create(null));let y=this._parseByType(r.propertiesTypes[b]);if(d[b][y.name])if(Array.isArray(d[b][y.name]))d[b][y.name].push(y.value);else{let g=d[b][y.name];d[b][y.name]=[g],d[b][y.name].push(y.value)}else d[b][y.name]=y.value;continue}d[b]?Array.isArray(d[b])?d[b].push(this._parseByType(r.propertiesTypes[b])):(d[b]=[d[b]],d[b].push(this._parseByType(r.propertiesTypes[b]))):d[b]=this._parseByType(r.propertiesTypes[b])}return d}_newPacket(){return i("_newPacket"),this.packet&&(this._list.consume(this.packet.length),i("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),i("_newPacket: new packet"),this.packet=new l,this._pos=0,!0}_emitError(c){i("_emitError",c),this.error=c,this.emit("error",c)}};n.exports=s}),Wc=de((e,n)=>{re(),oe(),ie();var{Buffer:t}=(qe(),Ce(We)),o=65536,l={},r=t.isBuffer(t.from([1,2]).subarray(0,1));function i(u){let d=t.allocUnsafe(2);return d.writeUInt8(u>>8,0),d.writeUInt8(u&255,1),d}function s(){for(let u=0;u<o;u++)l[u]=i(u)}function a(u){let d=0,m=0,b=t.allocUnsafe(4);do d=u%128|0,u=u/128|0,u>0&&(d=d|128),b.writeUInt8(d,m++);while(u>0&&m<4);return u>0&&(m=0),r?b.subarray(0,m):b.slice(0,m)}function c(u){let d=t.allocUnsafe(4);return d.writeUInt32BE(u,0),d}n.exports={cache:l,generateCache:s,generateNumber:i,genBufVariableByteInt:a,generate4ByteBuffer:c}}),qc=de((e,n)=>{"use strict";re(),oe(),ie(),typeof we>"u"||!we.version||we.version.indexOf("v0.")===0||we.version.indexOf("v1.")===0&&we.version.indexOf("v1.8.")!==0?n.exports={nextTick:t}:n.exports=we;function t(o,l,r,i){if(typeof o!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,a,c;switch(s){case 0:case 1:return we.nextTick(o);case 2:return we.nextTick(function(){o.call(null,l)});case 3:return we.nextTick(function(){o.call(null,l,r)});case 4:return we.nextTick(function(){o.call(null,l,r,i)});default:for(a=new Array(s-1),c=0;c<a.length;)a[c++]=arguments[c];return we.nextTick(function(){o.apply(null,a)})}}}),la=de((e,n)=>{re(),oe(),ie();var t=aa(),{Buffer:o}=(qe(),Ce(We)),l=o.allocUnsafe(0),r=o.from([0]),i=Wc(),s=qc().nextTick,a=_t()("mqtt-packet:writeToStream"),c=i.cache,u=i.generateNumber,d=i.generateCache,m=i.genBufVariableByteInt,b=i.generate4ByteBuffer,y=ne,g=!0;function T(M,I,$){switch(a("generate called"),I.cork&&(I.cork(),s(k,I)),g&&(g=!1,d()),a("generate: packet.cmd: %s",M.cmd),M.cmd){case"connect":return v(M,I,$);case"connack":return _(M,I,$);case"publish":return A(M,I,$);case"puback":case"pubrec":case"pubrel":case"pubcomp":return L(M,I,$);case"subscribe":return S(M,I,$);case"suback":return R(M,I,$);case"unsubscribe":return N(M,I,$);case"unsuback":return q(M,I,$);case"pingreq":case"pingresp":return G(M,I,$);case"disconnect":return Q(M,I,$);case"auth":return C(M,I,$);default:return I.destroy(new Error("Unknown command")),!1}}Object.defineProperty(T,"cacheNumbers",{get(){return y===ne},set(M){M?((!c||Object.keys(c).length===0)&&(g=!0),y=ne):(g=!1,y=j)}});function k(M){M.uncork()}function v(M,I,$){let se=M||{},U=se.protocolId||"MQTT",J=se.protocolVersion||4,pe=se.will,le=se.clean,P=se.keepalive||0,B=se.clientId||"",D=se.username,te=se.password,z=se.properties;le===void 0&&(le=!0);let x=0;if(!U||typeof U!="string"&&!o.isBuffer(U))return I.destroy(new Error("Invalid protocolId")),!1;if(x+=U.length+2,J!==3&&J!==4&&J!==5)return I.destroy(new Error("Invalid protocol version")),!1;if(x+=1,(typeof B=="string"||o.isBuffer(B))&&(B||J>=4)&&(B||le))x+=o.byteLength(B)+2;else{if(J<4)return I.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(le*1===0)return I.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof P!="number"||P<0||P>65535||P%1!==0)return I.destroy(new Error("Invalid keepalive")),!1;x+=2,x+=1;let K,X;if(J===5){if(K=ge(I,z),!K)return!1;x+=K.length}if(pe){if(typeof pe!="object")return I.destroy(new Error("Invalid will")),!1;if(!pe.topic||typeof pe.topic!="string")return I.destroy(new Error("Invalid will topic")),!1;if(x+=o.byteLength(pe.topic)+2,x+=2,pe.payload)if(pe.payload.length>=0)typeof pe.payload=="string"?x+=o.byteLength(pe.payload):x+=pe.payload.length;else return I.destroy(new Error("Invalid will payload")),!1;if(X={},J===5){if(X=ge(I,pe.properties),!X)return!1;x+=X.length}}let ye=!1;if(D!=null)if(he(D))ye=!0,x+=o.byteLength(D)+2;else return I.destroy(new Error("Invalid username")),!1;if(te!=null){if(!ye)return I.destroy(new Error("Username is required to use password")),!1;if(he(te))x+=be(te)+2;else return I.destroy(new Error("Invalid password")),!1}I.write(t.CONNECT_HEADER),Y(I,x),ee(I,U),se.bridgeMode&&(J+=128),I.write(J===131?t.VERSION131:J===132?t.VERSION132:J===4?t.VERSION4:J===5?t.VERSION5:t.VERSION3);let Te=0;return Te|=D!=null?t.USERNAME_MASK:0,Te|=te!=null?t.PASSWORD_MASK:0,Te|=pe&&pe.retain?t.WILL_RETAIN_MASK:0,Te|=pe&&pe.qos?pe.qos<<t.WILL_QOS_SHIFT:0,Te|=pe?t.WILL_FLAG_MASK:0,Te|=le?t.CLEAN_SESSION_MASK:0,I.write(o.from([Te])),y(I,P),J===5&&K.write(),ee(I,B),pe&&(J===5&&X.write(),V(I,pe.topic),ee(I,pe.payload)),D!=null&&ee(I,D),te!=null&&ee(I,te),!0}function _(M,I,$){let se=$?$.protocolVersion:4,U=M||{},J=se===5?U.reasonCode:U.returnCode,pe=U.properties,le=2;if(typeof J!="number")return I.destroy(new Error("Invalid return code")),!1;let P=null;if(se===5){if(P=ge(I,pe),!P)return!1;le+=P.length}return I.write(t.CONNACK_HEADER),Y(I,le),I.write(U.sessionPresent?t.SESSIONPRESENT_HEADER:r),I.write(o.from([J])),P?.write(),!0}function A(M,I,$){a("publish: packet: %o",M);let se=$?$.protocolVersion:4,U=M||{},J=U.qos||0,pe=U.retain?t.RETAIN_MASK:0,le=U.topic,P=U.payload||l,B=U.messageId,D=U.properties,te=0;if(typeof le=="string")te+=o.byteLength(le)+2;else if(o.isBuffer(le))te+=le.length+2;else return I.destroy(new Error("Invalid topic")),!1;if(o.isBuffer(P)?te+=P.length:te+=o.byteLength(P),J&&typeof B!="number")return I.destroy(new Error("Invalid messageId")),!1;J&&(te+=2);let z=null;if(se===5){if(z=ge(I,D),!z)return!1;te+=z.length}return I.write(t.PUBLISH_HEADER[J][U.dup?1:0][pe?1:0]),Y(I,te),y(I,be(le)),I.write(le),J>0&&y(I,B),z?.write(),a("publish: payload: %o",P),I.write(P)}function L(M,I,$){let se=$?$.protocolVersion:4,U=M||{},J=U.cmd||"puback",pe=U.messageId,le=U.dup&&J==="pubrel"?t.DUP_MASK:0,P=0,B=U.reasonCode,D=U.properties,te=se===5?3:2;if(J==="pubrel"&&(P=1),typeof pe!="number")return I.destroy(new Error("Invalid messageId")),!1;let z=null;if(se===5&&typeof D=="object"){if(z=E(I,D,$,te),!z)return!1;te+=z.length}return I.write(t.ACKS[J][P][le][0]),te===3&&(te+=B!==0?1:-1),Y(I,te),y(I,pe),se===5&&te!==2&&I.write(o.from([B])),z!==null?z.write():te===4&&I.write(o.from([0])),!0}function S(M,I,$){a("subscribe: packet: ");let se=$?$.protocolVersion:4,U=M||{},J=U.dup?t.DUP_MASK:0,pe=U.messageId,le=U.subscriptions,P=U.properties,B=0;if(typeof pe!="number")return I.destroy(new Error("Invalid messageId")),!1;B+=2;let D=null;if(se===5){if(D=ge(I,P),!D)return!1;B+=D.length}if(typeof le=="object"&&le.length)for(let z=0;z<le.length;z+=1){let x=le[z].topic,K=le[z].qos;if(typeof x!="string")return I.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof K!="number")return I.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(se===5){if(typeof(le[z].nl||!1)!="boolean")return I.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(le[z].rap||!1)!="boolean")return I.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let X=le[z].rh||0;if(typeof X!="number"||X>2)return I.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}B+=o.byteLength(x)+2+1}else return I.destroy(new Error("Invalid subscriptions")),!1;a("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),I.write(t.SUBSCRIBE_HEADER[1][J?1:0][0]),Y(I,B),y(I,pe),D!==null&&D.write();let te=!0;for(let z of le){let x=z.topic,K=z.qos,X=+z.nl,ye=+z.rap,Te=z.rh,ke;V(I,x),ke=t.SUBSCRIBE_OPTIONS_QOS[K],se===5&&(ke|=X?t.SUBSCRIBE_OPTIONS_NL:0,ke|=ye?t.SUBSCRIBE_OPTIONS_RAP:0,ke|=Te?t.SUBSCRIBE_OPTIONS_RH[Te]:0),te=I.write(o.from([ke]))}return te}function R(M,I,$){let se=$?$.protocolVersion:4,U=M||{},J=U.messageId,pe=U.granted,le=U.properties,P=0;if(typeof J!="number")return I.destroy(new Error("Invalid messageId")),!1;if(P+=2,typeof pe=="object"&&pe.length)for(let D=0;D<pe.length;D+=1){if(typeof pe[D]!="number")return I.destroy(new Error("Invalid qos vector")),!1;P+=1}else return I.destroy(new Error("Invalid qos vector")),!1;let B=null;if(se===5){if(B=E(I,le,$,P),!B)return!1;P+=B.length}return I.write(t.SUBACK_HEADER),Y(I,P),y(I,J),B!==null&&B.write(),I.write(o.from(pe))}function N(M,I,$){let se=$?$.protocolVersion:4,U=M||{},J=U.messageId,pe=U.dup?t.DUP_MASK:0,le=U.unsubscriptions,P=U.properties,B=0;if(typeof J!="number")return I.destroy(new Error("Invalid messageId")),!1;if(B+=2,typeof le=="object"&&le.length)for(let z=0;z<le.length;z+=1){if(typeof le[z]!="string")return I.destroy(new Error("Invalid unsubscriptions")),!1;B+=o.byteLength(le[z])+2}else return I.destroy(new Error("Invalid unsubscriptions")),!1;let D=null;if(se===5){if(D=ge(I,P),!D)return!1;B+=D.length}I.write(t.UNSUBSCRIBE_HEADER[1][pe?1:0][0]),Y(I,B),y(I,J),D!==null&&D.write();let te=!0;for(let z=0;z<le.length;z++)te=V(I,le[z]);return te}function q(M,I,$){let se=$?$.protocolVersion:4,U=M||{},J=U.messageId,pe=U.dup?t.DUP_MASK:0,le=U.granted,P=U.properties,B=U.cmd,D=0,te=2;if(typeof J!="number")return I.destroy(new Error("Invalid messageId")),!1;if(se===5)if(typeof le=="object"&&le.length)for(let x=0;x<le.length;x+=1){if(typeof le[x]!="number")return I.destroy(new Error("Invalid qos vector")),!1;te+=1}else return I.destroy(new Error("Invalid qos vector")),!1;let z=null;if(se===5){if(z=E(I,P,$,te),!z)return!1;te+=z.length}return I.write(t.ACKS[B][D][pe][0]),Y(I,te),y(I,J),z!==null&&z.write(),se===5&&I.write(o.from(le)),!0}function G(M,I,$){return I.write(t.EMPTY[M.cmd])}function Q(M,I,$){let se=$?$.protocolVersion:4,U=M||{},J=U.reasonCode,pe=U.properties,le=se===5?1:0,P=null;if(se===5){if(P=E(I,pe,$,le),!P)return!1;le+=P.length}return I.write(o.from([t.codes.disconnect<<4])),Y(I,le),se===5&&I.write(o.from([J])),P!==null&&P.write(),!0}function C(M,I,$){let se=$?$.protocolVersion:4,U=M||{},J=U.reasonCode,pe=U.properties,le=se===5?1:0;se!==5&&I.destroy(new Error("Invalid mqtt version for auth packet"));let P=E(I,pe,$,le);return P?(le+=P.length,I.write(o.from([t.codes.auth<<4])),Y(I,le),I.write(o.from([J])),P!==null&&P.write(),!0):!1}var W={};function Y(M,I){if(I>t.VARBYTEINT_MAX)return M.destroy(new Error(`Invalid variable byte integer: ${I}`)),!1;let $=W[I];return $||($=m(I),I<16384&&(W[I]=$)),a("writeVarByteInt: writing to stream: %o",$),M.write($)}function V(M,I){let $=o.byteLength(I);return y(M,$),a("writeString: %s",I),M.write(I,"utf8")}function ae(M,I,$){V(M,I),V(M,$)}function ne(M,I){return a("writeNumberCached: number: %d",I),a("writeNumberCached: %o",c[I]),M.write(c[I])}function j(M,I){let $=u(I);return a("writeNumberGenerated: %o",$),M.write($)}function fe(M,I){let $=b(I);return a("write4ByteNumber: %o",$),M.write($)}function ee(M,I){typeof I=="string"?V(M,I):I?(y(M,I.length),M.write(I)):y(M,0)}function ge(M,I){if(typeof I!="object"||I.length!=null)return{length:1,write(){me(M,{},0)}};let $=0;function se(U,J){let pe=t.propertiesTypes[U],le=0;switch(pe){case"byte":{if(typeof J!="boolean")return M.destroy(new Error(`Invalid ${U}: ${J}`)),!1;le+=2;break}case"int8":{if(typeof J!="number"||J<0||J>255)return M.destroy(new Error(`Invalid ${U}: ${J}`)),!1;le+=2;break}case"binary":{if(J&&J===null)return M.destroy(new Error(`Invalid ${U}: ${J}`)),!1;le+=1+o.byteLength(J)+2;break}case"int16":{if(typeof J!="number"||J<0||J>65535)return M.destroy(new Error(`Invalid ${U}: ${J}`)),!1;le+=3;break}case"int32":{if(typeof J!="number"||J<0||J>4294967295)return M.destroy(new Error(`Invalid ${U}: ${J}`)),!1;le+=5;break}case"var":{if(typeof J!="number"||J<0||J>268435455)return M.destroy(new Error(`Invalid ${U}: ${J}`)),!1;le+=1+o.byteLength(m(J));break}case"string":{if(typeof J!="string")return M.destroy(new Error(`Invalid ${U}: ${J}`)),!1;le+=3+o.byteLength(J.toString());break}case"pair":{if(typeof J!="object")return M.destroy(new Error(`Invalid ${U}: ${J}`)),!1;le+=Object.getOwnPropertyNames(J).reduce((P,B)=>{let D=J[B];return Array.isArray(D)?P+=D.reduce((te,z)=>(te+=3+o.byteLength(B.toString())+2+o.byteLength(z.toString()),te),0):P+=3+o.byteLength(B.toString())+2+o.byteLength(J[B].toString()),P},0);break}default:return M.destroy(new Error(`Invalid property ${U}: ${J}`)),!1}return le}if(I)for(let U in I){let J=0,pe=0,le=I[U];if(Array.isArray(le))for(let P=0;P<le.length;P++){if(pe=se(U,le[P]),!pe)return!1;J+=pe}else{if(pe=se(U,le),!pe)return!1;J=pe}if(!J)return!1;$+=J}return{length:o.byteLength(m($))+$,write(){me(M,I,$)}}}function E(M,I,$,se){let U=["reasonString","userProperties"],J=$&&$.properties&&$.properties.maximumPacketSize?$.properties.maximumPacketSize:0,pe=ge(M,I);if(J)for(;se+pe.length>J;){let le=U.shift();if(le&&I[le])delete I[le],pe=ge(M,I);else return!1}return pe}function H(M,I,$){switch(t.propertiesTypes[I]){case"byte":{M.write(o.from([t.properties[I]])),M.write(o.from([+$]));break}case"int8":{M.write(o.from([t.properties[I]])),M.write(o.from([$]));break}case"binary":{M.write(o.from([t.properties[I]])),ee(M,$);break}case"int16":{M.write(o.from([t.properties[I]])),y(M,$);break}case"int32":{M.write(o.from([t.properties[I]])),fe(M,$);break}case"var":{M.write(o.from([t.properties[I]])),Y(M,$);break}case"string":{M.write(o.from([t.properties[I]])),V(M,$);break}case"pair":{Object.getOwnPropertyNames($).forEach(se=>{let U=$[se];Array.isArray(U)?U.forEach(J=>{M.write(o.from([t.properties[I]])),ae(M,se.toString(),J.toString())}):(M.write(o.from([t.properties[I]])),ae(M,se.toString(),U.toString()))});break}default:return M.destroy(new Error(`Invalid property ${I} value: ${$}`)),!1}}function me(M,I,$){Y(M,$);for(let se in I)if(Object.prototype.hasOwnProperty.call(I,se)&&I[se]!==null){let U=I[se];if(Array.isArray(U))for(let J=0;J<U.length;J++)H(M,se,U[J]);else H(M,se,U)}}function be(M){return M?M instanceof o?M.length:o.byteLength(M):0}function he(M){return typeof M=="string"||M instanceof o}n.exports=T}),Vc=de((e,n)=>{re(),oe(),ie();var t=la(),{EventEmitter:o}=(nn(),Ce(Jt)),{Buffer:l}=(qe(),Ce(We));function r(s,a){let c=new i;return t(s,c,a),c.concat()}var i=class extends o{constructor(){super(),this._array=new Array(20),this._i=0}write(s){return this._array[this._i++]=s,!0}concat(){let s=0,a=new Array(this._array.length),c=this._array,u=0,d;for(d=0;d<c.length&&c[d]!==void 0;d++)typeof c[d]!="string"?a[d]=c[d].length:a[d]=l.byteLength(c[d]),s+=a[d];let m=l.allocUnsafe(s);for(d=0;d<c.length&&c[d]!==void 0;d++)typeof c[d]!="string"?(c[d].copy(m,u),u+=a[d]):(m.write(c[d],u),u+=a[d]);return m}destroy(s){s&&this.emit("error",s)}};n.exports=r}),$c=de(e=>{re(),oe(),ie(),e.parser=jc().parser,e.generate=Vc(),e.writeToStream=la()}),ca=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0});var n=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};e.default=n}),Hc=de((e,n)=>{"use strict";re(),oe(),ie(),n.exports=o;function t(r){return r instanceof Bn?Bn.from(r):new r.constructor(r.buffer.slice(),r.byteOffset,r.length)}function o(r){if(r=r||{},r.circles)return l(r);return r.proto?a:s;function i(c,u){for(var d=Object.keys(c),m=new Array(d.length),b=0;b<d.length;b++){var y=d[b],g=c[y];typeof g!="object"||g===null?m[y]=g:g instanceof Date?m[y]=new Date(g):ArrayBuffer.isView(g)?m[y]=t(g):m[y]=u(g)}return m}function s(c){if(typeof c!="object"||c===null)return c;if(c instanceof Date)return new Date(c);if(Array.isArray(c))return i(c,s);if(c instanceof Map)return new Map(i(Array.from(c),s));if(c instanceof Set)return new Set(i(Array.from(c),s));var u={};for(var d in c)if(Object.hasOwnProperty.call(c,d)!==!1){var m=c[d];typeof m!="object"||m===null?u[d]=m:m instanceof Date?u[d]=new Date(m):m instanceof Map?u[d]=new Map(i(Array.from(m),s)):m instanceof Set?u[d]=new Set(i(Array.from(m),s)):ArrayBuffer.isView(m)?u[d]=t(m):u[d]=s(m)}return u}function a(c){if(typeof c!="object"||c===null)return c;if(c instanceof Date)return new Date(c);if(Array.isArray(c))return i(c,a);if(c instanceof Map)return new Map(i(Array.from(c),a));if(c instanceof Set)return new Set(i(Array.from(c),a));var u={};for(var d in c){var m=c[d];typeof m!="object"||m===null?u[d]=m:m instanceof Date?u[d]=new Date(m):m instanceof Map?u[d]=new Map(i(Array.from(m),a)):m instanceof Set?u[d]=new Set(i(Array.from(m),a)):ArrayBuffer.isView(m)?u[d]=t(m):u[d]=a(m)}return u}}function l(r){var i=[],s=[];return r.proto?u:c;function a(d,m){for(var b=Object.keys(d),y=new Array(b.length),g=0;g<b.length;g++){var T=b[g],k=d[T];if(typeof k!="object"||k===null)y[T]=k;else if(k instanceof Date)y[T]=new Date(k);else if(ArrayBuffer.isView(k))y[T]=t(k);else{var v=i.indexOf(k);v!==-1?y[T]=s[v]:y[T]=m(k)}}return y}function c(d){if(typeof d!="object"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return a(d,c);if(d instanceof Map)return new Map(a(Array.from(d),c));if(d instanceof Set)return new Set(a(Array.from(d),c));var m={};i.push(d),s.push(m);for(var b in d)if(Object.hasOwnProperty.call(d,b)!==!1){var y=d[b];if(typeof y!="object"||y===null)m[b]=y;else if(y instanceof Date)m[b]=new Date(y);else if(y instanceof Map)m[b]=new Map(a(Array.from(y),c));else if(y instanceof Set)m[b]=new Set(a(Array.from(y),c));else if(ArrayBuffer.isView(y))m[b]=t(y);else{var g=i.indexOf(y);g!==-1?m[b]=s[g]:m[b]=c(y)}}return i.pop(),s.pop(),m}function u(d){if(typeof d!="object"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return a(d,u);if(d instanceof Map)return new Map(a(Array.from(d),u));if(d instanceof Set)return new Set(a(Array.from(d),u));var m={};i.push(d),s.push(m);for(var b in d){var y=d[b];if(typeof y!="object"||y===null)m[b]=y;else if(y instanceof Date)m[b]=new Date(y);else if(y instanceof Map)m[b]=new Map(a(Array.from(y),u));else if(y instanceof Set)m[b]=new Set(a(Array.from(y),u));else if(ArrayBuffer.isView(y))m[b]=t(y);else{var g=i.indexOf(y);g!==-1?m[b]=s[g]:m[b]=u(y)}}return i.pop(),s.pop(),m}}}),Gc=de((e,n)=>{"use strict";re(),oe(),ie(),n.exports=Hc()()}),Kc=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0;function n(o){let l=o.split("/");for(let r=0;r<l.length;r++)if(l[r]!=="+"){if(l[r]==="#")return r===l.length-1;if(l[r].indexOf("+")!==-1||l[r].indexOf("#")!==-1)return!1}return!0}e.validateTopic=n;function t(o){if(o.length===0)return"empty_topic_list";for(let l=0;l<o.length;l++)if(!n(o[l]))return o[l];return null}e.validateTopics=t}),ua=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0});var n=zt(),t={objectMode:!0},o={clean:!0},l=class{constructor(r){this.options=r||{},this.options=Object.assign(Object.assign({},o),r),this._inflights=new Map}put(r,i){return this._inflights.set(r.messageId,r),i&&i(),this}createStream(){let r=new n.Readable(t),i=[],s=!1,a=0;return this._inflights.forEach((c,u)=>{i.push(c)}),r._read=()=>{!s&&a<i.length?r.push(i[a++]):r.push(null)},r.destroy=c=>{if(!s)return s=!0,setTimeout(()=>{r.emit("close")},0),r},r}del(r,i){let s=this._inflights.get(r.messageId);return s?(this._inflights.delete(r.messageId),i(null,s)):i&&i(new Error("missing packet")),this}get(r,i){let s=this._inflights.get(r.messageId);return s?i(null,s):i&&i(new Error("missing packet")),this}close(r){this.options.clean&&(this._inflights=null),r&&r()}};e.default=l}),Jc=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0});var n=[0,16,128,131,135,144,145,151,153],t=(o,l,r)=>{o.log("handlePublish: packet %o",l),r=typeof r<"u"?r:o.noop;let i=l.topic.toString(),s=l.payload,{qos:a}=l,{messageId:c}=l,{options:u}=o;if(o.options.protocolVersion===5){let d;if(l.properties&&(d=l.properties.topicAlias),typeof d<"u")if(i.length===0)if(d>0&&d<=65535){let m=o.topicAliasRecv.getTopicByAlias(d);if(m)i=m,o.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,d);else{o.log("handlePublish :: unregistered topic alias. alias: %d",d),o.emit("error",new Error("Received unregistered Topic Alias"));return}}else{o.log("handlePublish :: topic alias out of range. alias: %d",d),o.emit("error",new Error("Received Topic Alias is out of range"));return}else if(o.topicAliasRecv.put(i,d))o.log("handlePublish :: registered topic: %s - alias: %d",i,d);else{o.log("handlePublish :: topic alias out of range. alias: %d",d),o.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(o.log("handlePublish: qos %d",a),a){case 2:{u.customHandleAcks(i,s,l,(d,m)=>{if(typeof d=="number"&&(m=d,d=null),d)return o.emit("error",d);if(n.indexOf(m)===-1)return o.emit("error",new Error("Wrong reason code for pubrec"));m?o._sendPacket({cmd:"pubrec",messageId:c,reasonCode:m},r):o.incomingStore.put(l,()=>{o._sendPacket({cmd:"pubrec",messageId:c},r)})});break}case 1:{u.customHandleAcks(i,s,l,(d,m)=>{if(typeof d=="number"&&(m=d,d=null),d)return o.emit("error",d);if(n.indexOf(m)===-1)return o.emit("error",new Error("Wrong reason code for puback"));m||o.emit("message",i,s,l),o.handleMessage(l,b=>{if(b)return r&&r(b);o._sendPacket({cmd:"puback",messageId:c,reasonCode:m},r)})});break}case 0:o.emit("message",i,s,l),o.handleMessage(l,r);break;default:o.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=t}),zc=de((e,n)=>{n.exports={version:"5.10.1"}}),rn=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var n=class ha extends Error{constructor(l,r){super(l),this.code=r,Object.setPrototypeOf(this,ha.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=n;function t(o,l,r=!1){var i;let s=[l];for(;;){let a=s[0],c=Object.getPrototypeOf(a);if(c?.prototype)s.unshift(c);else break}for(let a of s)for(let c of Object.getOwnPropertyNames(a.prototype))(r||c!=="constructor")&&Object.defineProperty(o.prototype,c,(i=Object.getOwnPropertyDescriptor(a.prototype,c))!==null&&i!==void 0?i:Object.create(null))}e.applyMixin=t,e.nextTick=typeof we?.nextTick=="function"?we.nextTick:o=>{setTimeout(o,0)},e.MQTTJS_VERSION=zc().version}),Gn=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0;var n=rn();e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(o,l)=>{let{messageId:r}=l,i=l.cmd,s=null,a=o.outgoing[r]?o.outgoing[r].cb:null,c=null;if(!a){o.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(o.log("_handleAck :: packet type",i),i){case"pubcomp":case"puback":{let u=l.reasonCode;u&&u>0&&u!==16?(c=new n.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[u]}`,u),o._removeOutgoingAndStoreMessage(r,()=>{a(c,l)})):o._removeOutgoingAndStoreMessage(r,a);break}case"pubrec":{s={cmd:"pubrel",qos:2,messageId:r};let u=l.reasonCode;u&&u>0&&u!==16?(c=new n.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[u]}`,u),o._removeOutgoingAndStoreMessage(r,()=>{a(c,l)})):o._sendPacket(s);break}case"suback":{delete o.outgoing[r],o.messageIdProvider.deallocate(r);let u=l.granted;for(let d=0;d<u.length;d++){let m=u[d];if(m&128){c=new Error(`Subscribe error: ${e.ReasonCodes[m]}`),c.code=m;let b=o.messageIdToTopic[r];b&&b.forEach(y=>{delete o._resubscribeTopics[y]})}}delete o.messageIdToTopic[r],o._invokeStoreProcessingQueue(),a(c,l);break}case"unsuback":{delete o.outgoing[r],o.messageIdProvider.deallocate(r),o._invokeStoreProcessingQueue(),a(null,l);break}default:o.emit("error",new Error("unrecognized packet type"))}o.disconnecting&&Object.keys(o.outgoing).length===0&&o.emit("outgoingEmpty")};e.default=t}),Yc=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0});var n=rn(),t=Gn(),o=(l,r)=>{let{options:i}=l,s=i.protocolVersion,a=s===5?r.reasonCode:r.returnCode;if(s!==5){let c=new n.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${s}`,a);l.emit("error",c);return}l.handleAuth(r,(c,u)=>{if(c){l.emit("error",c);return}if(a===24)l.reconnecting=!1,l._sendPacket(u);else{let d=new n.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[a]}`,a);l.emit("error",d)}})};e.default=o}),Qc=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var n=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,o=typeof we=="object"&&we?we:{},l=(y,g,T,k)=>{typeof o.emitWarning=="function"?o.emitWarning(y,g,T,k):console.error(`[${T}] ${g}: ${y}`)},r=globalThis.AbortController,i=globalThis.AbortSignal;if(typeof r>"u"){i=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(T,k){this._onabort.push(k)}},r=class{constructor(){g()}signal=new i;abort(T){if(!this.signal.aborted){this.signal.reason=T,this.signal.aborted=!0;for(let k of this.signal._onabort)k(T);this.signal.onabort?.(T)}}};let y=o.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",g=()=>{y&&(y=!1,l("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",g))}}var s=y=>!t.has(y),a=Symbol("type"),c=y=>y&&y===Math.floor(y)&&y>0&&isFinite(y),u=y=>c(y)?y<=Math.pow(2,8)?Uint8Array:y<=Math.pow(2,16)?Uint16Array:y<=Math.pow(2,32)?Uint32Array:y<=Number.MAX_SAFE_INTEGER?d:null:null,d=class extends Array{constructor(y){super(y),this.fill(0)}},m=class mn{heap;length;static#l=!1;static create(g){let T=u(g);if(!T)return[];mn.#l=!0;let k=new mn(g,T);return mn.#l=!1,k}constructor(g,T){if(!mn.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new T(g),this.length=0}push(g){this.heap[this.length++]=g}pop(){return this.heap[--this.length]}},b=class da{#l;#h;#p;#m;#C;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#r;#g;#i;#n;#e;#c;#d;#a;#o;#b;#s;#v;#w;#y;#T;#E;#u;static unsafeExposeInternals(g){return{starts:g.#w,ttls:g.#y,sizes:g.#v,keyMap:g.#i,keyList:g.#n,valList:g.#e,next:g.#c,prev:g.#d,get head(){return g.#a},get tail(){return g.#o},free:g.#b,isBackgroundFetch:T=>g.#t(T),backgroundFetch:(T,k,v,_)=>g.#M(T,k,v,_),moveToTail:T=>g.#R(T),indexes:T=>g.#_(T),rindexes:T=>g.#k(T),isStale:T=>g.#f(T)}}get max(){return this.#l}get maxSize(){return this.#h}get calculatedSize(){return this.#g}get size(){return this.#r}get fetchMethod(){return this.#C}get dispose(){return this.#p}get disposeAfter(){return this.#m}constructor(g){let{max:T=0,ttl:k,ttlResolution:v=1,ttlAutopurge:_,updateAgeOnGet:A,updateAgeOnHas:L,allowStale:S,dispose:R,disposeAfter:N,noDisposeOnSet:q,noUpdateTTL:G,maxSize:Q=0,maxEntrySize:C=0,sizeCalculation:W,fetchMethod:Y,noDeleteOnFetchRejection:V,noDeleteOnStaleGet:ae,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:j,ignoreFetchAbort:fe}=g;if(T!==0&&!c(T))throw new TypeError("max option must be a nonnegative integer");let ee=T?u(T):Array;if(!ee)throw new Error("invalid max value: "+T);if(this.#l=T,this.#h=Q,this.maxEntrySize=C||this.#h,this.sizeCalculation=W,this.sizeCalculation){if(!this.#h&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Y!==void 0&&typeof Y!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#C=Y,this.#E=!!Y,this.#i=new Map,this.#n=new Array(T).fill(void 0),this.#e=new Array(T).fill(void 0),this.#c=new ee(T),this.#d=new ee(T),this.#a=0,this.#o=0,this.#b=m.create(T),this.#r=0,this.#g=0,typeof R=="function"&&(this.#p=R),typeof N=="function"?(this.#m=N,this.#s=[]):(this.#m=void 0,this.#s=void 0),this.#T=!!this.#p,this.#u=!!this.#m,this.noDisposeOnSet=!!q,this.noUpdateTTL=!!G,this.noDeleteOnFetchRejection=!!V,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!j,this.ignoreFetchAbort=!!fe,this.maxEntrySize!==0){if(this.#h!==0&&!c(this.#h))throw new TypeError("maxSize must be a positive integer if specified");if(!c(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#D()}if(this.allowStale=!!S,this.noDeleteOnStaleGet=!!ae,this.updateAgeOnGet=!!A,this.updateAgeOnHas=!!L,this.ttlResolution=c(v)||v===0?v:1,this.ttlAutopurge=!!_,this.ttl=k||0,this.ttl){if(!c(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#N()}if(this.#l===0&&this.ttl===0&&this.#h===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#h){let ge="LRU_CACHE_UNBOUNDED";s(ge)&&(t.add(ge),l("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ge,da))}}getRemainingTTL(g){return this.#i.has(g)?1/0:0}#N(){let g=new d(this.#l),T=new d(this.#l);this.#y=g,this.#w=T,this.#U=(_,A,L=n.now())=>{if(T[_]=A!==0?L:0,g[_]=A,A!==0&&this.ttlAutopurge){let S=setTimeout(()=>{this.#f(_)&&this.delete(this.#n[_])},A+1);S.unref&&S.unref()}},this.#I=_=>{T[_]=g[_]!==0?n.now():0},this.#S=(_,A)=>{if(g[A]){let L=g[A],S=T[A];_.ttl=L,_.start=S,_.now=k||v();let R=_.now-S;_.remainingTTL=L-R}};let k=0,v=()=>{let _=n.now();if(this.ttlResolution>0){k=_;let A=setTimeout(()=>k=0,this.ttlResolution);A.unref&&A.unref()}return _};this.getRemainingTTL=_=>{let A=this.#i.get(_);if(A===void 0)return 0;let L=g[A],S=T[A];if(L===0||S===0)return 1/0;let R=(k||v())-S;return L-R},this.#f=_=>g[_]!==0&&T[_]!==0&&(k||v())-T[_]>g[_]}#I=()=>{};#S=()=>{};#U=()=>{};#f=()=>!1;#D(){let g=new d(this.#l);this.#g=0,this.#v=g,this.#A=T=>{this.#g-=g[T],g[T]=0},this.#L=(T,k,v,_)=>{if(this.#t(k))return 0;if(!c(v))if(_){if(typeof _!="function")throw new TypeError("sizeCalculation must be a function");if(v=_(k,T),!c(v))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return v},this.#P=(T,k,v)=>{if(g[T]=k,this.#h){let _=this.#h-g[T];for(;this.#g>_;)this.#O(!0)}this.#g+=g[T],v&&(v.entrySize=k,v.totalCalculatedSize=this.#g)}}#A=g=>{};#P=(g,T,k)=>{};#L=(g,T,k,v)=>{if(k||v)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#_({allowStale:g=this.allowStale}={}){if(this.#r)for(let T=this.#o;!(!this.#x(T)||((g||!this.#f(T))&&(yield T),T===this.#a));)T=this.#d[T]}*#k({allowStale:g=this.allowStale}={}){if(this.#r)for(let T=this.#a;!(!this.#x(T)||((g||!this.#f(T))&&(yield T),T===this.#o));)T=this.#c[T]}#x(g){return g!==void 0&&this.#i.get(this.#n[g])===g}*entries(){for(let g of this.#_())this.#e[g]!==void 0&&this.#n[g]!==void 0&&!this.#t(this.#e[g])&&(yield[this.#n[g],this.#e[g]])}*rentries(){for(let g of this.#k())this.#e[g]!==void 0&&this.#n[g]!==void 0&&!this.#t(this.#e[g])&&(yield[this.#n[g],this.#e[g]])}*keys(){for(let g of this.#_()){let T=this.#n[g];T!==void 0&&!this.#t(this.#e[g])&&(yield T)}}*rkeys(){for(let g of this.#k()){let T=this.#n[g];T!==void 0&&!this.#t(this.#e[g])&&(yield T)}}*values(){for(let g of this.#_())this.#e[g]!==void 0&&!this.#t(this.#e[g])&&(yield this.#e[g])}*rvalues(){for(let g of this.#k())this.#e[g]!==void 0&&!this.#t(this.#e[g])&&(yield this.#e[g])}[Symbol.iterator](){return this.entries()}find(g,T={}){for(let k of this.#_()){let v=this.#e[k],_=this.#t(v)?v.__staleWhileFetching:v;if(_!==void 0&&g(_,this.#n[k],this))return this.get(this.#n[k],T)}}forEach(g,T=this){for(let k of this.#_()){let v=this.#e[k],_=this.#t(v)?v.__staleWhileFetching:v;_!==void 0&&g.call(T,_,this.#n[k],this)}}rforEach(g,T=this){for(let k of this.#k()){let v=this.#e[k],_=this.#t(v)?v.__staleWhileFetching:v;_!==void 0&&g.call(T,_,this.#n[k],this)}}purgeStale(){let g=!1;for(let T of this.#k({allowStale:!0}))this.#f(T)&&(this.delete(this.#n[T]),g=!0);return g}dump(){let g=[];for(let T of this.#_({allowStale:!0})){let k=this.#n[T],v=this.#e[T],_=this.#t(v)?v.__staleWhileFetching:v;if(_===void 0||k===void 0)continue;let A={value:_};if(this.#y&&this.#w){A.ttl=this.#y[T];let L=n.now()-this.#w[T];A.start=Math.floor(Date.now()-L)}this.#v&&(A.size=this.#v[T]),g.unshift([k,A])}return g}load(g){this.clear();for(let[T,k]of g){if(k.start){let v=Date.now()-k.start;k.start=n.now()-v}this.set(T,k.value,k)}}set(g,T,k={}){if(T===void 0)return this.delete(g),this;let{ttl:v=this.ttl,start:_,noDisposeOnSet:A=this.noDisposeOnSet,sizeCalculation:L=this.sizeCalculation,status:S}=k,{noUpdateTTL:R=this.noUpdateTTL}=k,N=this.#L(g,T,k.size||0,L);if(this.maxEntrySize&&N>this.maxEntrySize)return S&&(S.set="miss",S.maxEntrySizeExceeded=!0),this.delete(g),this;let q=this.#r===0?void 0:this.#i.get(g);if(q===void 0)q=this.#r===0?this.#o:this.#b.length!==0?this.#b.pop():this.#r===this.#l?this.#O(!1):this.#r,this.#n[q]=g,this.#e[q]=T,this.#i.set(g,q),this.#c[this.#o]=q,this.#d[q]=this.#o,this.#o=q,this.#r++,this.#P(q,N,S),S&&(S.set="add"),R=!1;else{this.#R(q);let G=this.#e[q];if(T!==G){if(this.#E&&this.#t(G)){G.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Q}=G;Q!==void 0&&!A&&(this.#T&&this.#p?.(Q,g,"set"),this.#u&&this.#s?.push([Q,g,"set"]))}else A||(this.#T&&this.#p?.(G,g,"set"),this.#u&&this.#s?.push([G,g,"set"]));if(this.#A(q),this.#P(q,N,S),this.#e[q]=T,S){S.set="replace";let Q=G&&this.#t(G)?G.__staleWhileFetching:G;Q!==void 0&&(S.oldValue=Q)}}else S&&(S.set="update")}if(v!==0&&!this.#y&&this.#N(),this.#y&&(R||this.#U(q,v,_),S&&this.#S(S,q)),!A&&this.#u&&this.#s){let G=this.#s,Q;for(;Q=G?.shift();)this.#m?.(...Q)}return this}pop(){try{for(;this.#r;){let g=this.#e[this.#a];if(this.#O(!0),this.#t(g)){if(g.__staleWhileFetching)return g.__staleWhileFetching}else if(g!==void 0)return g}}finally{if(this.#u&&this.#s){let g=this.#s,T;for(;T=g?.shift();)this.#m?.(...T)}}}#O(g){let T=this.#a,k=this.#n[T],v=this.#e[T];return this.#E&&this.#t(v)?v.__abortController.abort(new Error("evicted")):(this.#T||this.#u)&&(this.#T&&this.#p?.(v,k,"evict"),this.#u&&this.#s?.push([v,k,"evict"])),this.#A(T),g&&(this.#n[T]=void 0,this.#e[T]=void 0,this.#b.push(T)),this.#r===1?(this.#a=this.#o=0,this.#b.length=0):this.#a=this.#c[T],this.#i.delete(k),this.#r--,T}has(g,T={}){let{updateAgeOnHas:k=this.updateAgeOnHas,status:v}=T,_=this.#i.get(g);if(_!==void 0){let A=this.#e[_];if(this.#t(A)&&A.__staleWhileFetching===void 0)return!1;if(this.#f(_))v&&(v.has="stale",this.#S(v,_));else return k&&this.#I(_),v&&(v.has="hit",this.#S(v,_)),!0}else v&&(v.has="miss");return!1}peek(g,T={}){let{allowStale:k=this.allowStale}=T,v=this.#i.get(g);if(v!==void 0&&(k||!this.#f(v))){let _=this.#e[v];return this.#t(_)?_.__staleWhileFetching:_}}#M(g,T,k,v){let _=T===void 0?void 0:this.#e[T];if(this.#t(_))return _;let A=new r,{signal:L}=k;L?.addEventListener("abort",()=>A.abort(L.reason),{signal:A.signal});let S={signal:A.signal,options:k,context:v},R=(W,Y=!1)=>{let{aborted:V}=A.signal,ae=k.ignoreFetchAbort&&W!==void 0;if(k.status&&(V&&!Y?(k.status.fetchAborted=!0,k.status.fetchError=A.signal.reason,ae&&(k.status.fetchAbortIgnored=!0)):k.status.fetchResolved=!0),V&&!ae&&!Y)return q(A.signal.reason);let ne=Q;return this.#e[T]===Q&&(W===void 0?ne.__staleWhileFetching?this.#e[T]=ne.__staleWhileFetching:this.delete(g):(k.status&&(k.status.fetchUpdated=!0),this.set(g,W,S.options))),W},N=W=>(k.status&&(k.status.fetchRejected=!0,k.status.fetchError=W),q(W)),q=W=>{let{aborted:Y}=A.signal,V=Y&&k.allowStaleOnFetchAbort,ae=V||k.allowStaleOnFetchRejection,ne=ae||k.noDeleteOnFetchRejection,j=Q;if(this.#e[T]===Q&&(!ne||j.__staleWhileFetching===void 0?this.delete(g):V||(this.#e[T]=j.__staleWhileFetching)),ae)return k.status&&j.__staleWhileFetching!==void 0&&(k.status.returnedStale=!0),j.__staleWhileFetching;if(j.__returned===j)throw W},G=(W,Y)=>{let V=this.#C?.(g,_,S);V&&V instanceof Promise&&V.then(ae=>W(ae===void 0?void 0:ae),Y),A.signal.addEventListener("abort",()=>{(!k.ignoreFetchAbort||k.allowStaleOnFetchAbort)&&(W(void 0),k.allowStaleOnFetchAbort&&(W=ae=>R(ae,!0)))})};k.status&&(k.status.fetchDispatched=!0);let Q=new Promise(G).then(R,N),C=Object.assign(Q,{__abortController:A,__staleWhileFetching:_,__returned:void 0});return T===void 0?(this.set(g,C,{...S.options,status:void 0}),T=this.#i.get(g)):this.#e[T]=C,C}#t(g){if(!this.#E)return!1;let T=g;return!!T&&T instanceof Promise&&T.hasOwnProperty("__staleWhileFetching")&&T.__abortController instanceof r}async fetch(g,T={}){let{allowStale:k=this.allowStale,updateAgeOnGet:v=this.updateAgeOnGet,noDeleteOnStaleGet:_=this.noDeleteOnStaleGet,ttl:A=this.ttl,noDisposeOnSet:L=this.noDisposeOnSet,size:S=0,sizeCalculation:R=this.sizeCalculation,noUpdateTTL:N=this.noUpdateTTL,noDeleteOnFetchRejection:q=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:G=this.allowStaleOnFetchRejection,ignoreFetchAbort:Q=this.ignoreFetchAbort,allowStaleOnFetchAbort:C=this.allowStaleOnFetchAbort,context:W,forceRefresh:Y=!1,status:V,signal:ae}=T;if(!this.#E)return V&&(V.fetch="get"),this.get(g,{allowStale:k,updateAgeOnGet:v,noDeleteOnStaleGet:_,status:V});let ne={allowStale:k,updateAgeOnGet:v,noDeleteOnStaleGet:_,ttl:A,noDisposeOnSet:L,size:S,sizeCalculation:R,noUpdateTTL:N,noDeleteOnFetchRejection:q,allowStaleOnFetchRejection:G,allowStaleOnFetchAbort:C,ignoreFetchAbort:Q,status:V,signal:ae},j=this.#i.get(g);if(j===void 0){V&&(V.fetch="miss");let fe=this.#M(g,j,ne,W);return fe.__returned=fe}else{let fe=this.#e[j];if(this.#t(fe)){let H=k&&fe.__staleWhileFetching!==void 0;return V&&(V.fetch="inflight",H&&(V.returnedStale=!0)),H?fe.__staleWhileFetching:fe.__returned=fe}let ee=this.#f(j);if(!Y&&!ee)return V&&(V.fetch="hit"),this.#R(j),v&&this.#I(j),V&&this.#S(V,j),fe;let ge=this.#M(g,j,ne,W),E=ge.__staleWhileFetching!==void 0&&k;return V&&(V.fetch=ee?"stale":"refresh",E&&ee&&(V.returnedStale=!0)),E?ge.__staleWhileFetching:ge.__returned=ge}}get(g,T={}){let{allowStale:k=this.allowStale,updateAgeOnGet:v=this.updateAgeOnGet,noDeleteOnStaleGet:_=this.noDeleteOnStaleGet,status:A}=T,L=this.#i.get(g);if(L!==void 0){let S=this.#e[L],R=this.#t(S);return A&&this.#S(A,L),this.#f(L)?(A&&(A.get="stale"),R?(A&&k&&S.__staleWhileFetching!==void 0&&(A.returnedStale=!0),k?S.__staleWhileFetching:void 0):(_||this.delete(g),A&&k&&(A.returnedStale=!0),k?S:void 0)):(A&&(A.get="hit"),R?S.__staleWhileFetching:(this.#R(L),v&&this.#I(L),S))}else A&&(A.get="miss")}#B(g,T){this.#d[T]=g,this.#c[g]=T}#R(g){g!==this.#o&&(g===this.#a?this.#a=this.#c[g]:this.#B(this.#d[g],this.#c[g]),this.#B(this.#o,g),this.#o=g)}delete(g){let T=!1;if(this.#r!==0){let k=this.#i.get(g);if(k!==void 0)if(T=!0,this.#r===1)this.clear();else{this.#A(k);let v=this.#e[k];this.#t(v)?v.__abortController.abort(new Error("deleted")):(this.#T||this.#u)&&(this.#T&&this.#p?.(v,g,"delete"),this.#u&&this.#s?.push([v,g,"delete"])),this.#i.delete(g),this.#n[k]=void 0,this.#e[k]=void 0,k===this.#o?this.#o=this.#d[k]:k===this.#a?this.#a=this.#c[k]:(this.#c[this.#d[k]]=this.#c[k],this.#d[this.#c[k]]=this.#d[k]),this.#r--,this.#b.push(k)}}if(this.#u&&this.#s?.length){let k=this.#s,v;for(;v=k?.shift();)this.#m?.(...v)}return T}clear(){for(let g of this.#k({allowStale:!0})){let T=this.#e[g];if(this.#t(T))T.__abortController.abort(new Error("deleted"));else{let k=this.#n[g];this.#T&&this.#p?.(T,k,"delete"),this.#u&&this.#s?.push([T,k,"delete"])}}if(this.#i.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#y&&this.#w&&(this.#y.fill(0),this.#w.fill(0)),this.#v&&this.#v.fill(0),this.#a=0,this.#o=0,this.#b.length=0,this.#g=0,this.#r=0,this.#u&&this.#s){let g=this.#s,T;for(;T=g?.shift();)this.#m?.(...T)}}};e.LRUCache=b}),vt=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var n=class{constructor(l=0){this.iteratorType=l}equals(l){return this.o===l.o}};e.ContainerIterator=n;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=t;var o=class extends t{};e.Container=o}),Xc=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=vt(),t=class extends n.Base{constructor(l=[]){super(),this.S=[];let r=this;l.forEach(function(i){r.push(i)})}clear(){this.i=0,this.S=[]}push(l){return this.S.push(l),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},o=t;e.default=o}),Zc=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=vt(),t=class extends n.Base{constructor(l=[]){super(),this.j=0,this.q=[];let r=this;l.forEach(function(i){r.push(i)})}clear(){this.q=[],this.i=this.j=0}push(l){let r=this.q.length;if(this.j/r>.5&&this.j+this.i>=r&&r>4096){let i=this.i;for(let s=0;s<i;++s)this.q[s]=this.q[this.j+s];this.j=0,this.q[this.i]=l}else this.q[this.j+this.i]=l;return++this.i}pop(){if(this.i===0)return;let l=this.q[this.j++];return this.i-=1,l}front(){if(this.i!==0)return this.q[this.j]}},o=t;e.default=o}),eu=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=vt(),t=class extends n.Base{constructor(l=[],r=function(s,a){return s>a?-1:s<a?1:0},i=!0){if(super(),this.v=r,Array.isArray(l))this.C=i?[...l]:l;else{this.C=[];let a=this;l.forEach(function(c){a.C.push(c)})}this.i=this.C.length;let s=this.i>>1;for(let a=this.i-1>>1;a>=0;--a)this.k(a,s)}m(l){let r=this.C[l];for(;l>0;){let i=l-1>>1,s=this.C[i];if(this.v(s,r)<=0)break;this.C[l]=s,l=i}this.C[l]=r}k(l,r){let i=this.C[l];for(;l<r;){let s=l<<1|1,a=s+1,c=this.C[s];if(a<this.i&&this.v(c,this.C[a])>0&&(s=a,c=this.C[a]),this.v(c,i)>=0)break;this.C[l]=c,l=s}this.C[l]=i}clear(){this.i=0,this.C.length=0}push(l){this.C.push(l),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let l=this.C[0],r=this.C.pop();return this.i-=1,this.i&&(this.C[0]=r,this.k(0,this.i>>1)),l}top(){return this.C[0]}find(l){return this.C.indexOf(l)>=0}remove(l){let r=this.C.indexOf(l);return r<0?!1:(r===0?this.pop():r===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(r,1,this.C.pop()),this.i-=1,this.m(r),this.k(r,this.i>>1)),!0)}updateItem(l){let r=this.C.indexOf(l);return r<0?!1:(this.m(r),this.k(r,this.i>>1),!0)}toArray(){return[...this.C]}},o=t;e.default=o}),uo=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=vt(),t=class extends n.Container{},o=t;e.default=o}),wt=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=n;function n(){throw new RangeError("Iterator access denied!")}}),fa=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var n=vt(),t=wt(),o=class extends n.ContainerIterator{constructor(l,r){super(r),this.o=l,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(l){this.container.setElementByPos(this.o,l)}};e.RandomIterator=o}),tu=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=o(uo()),t=fa();function o(s){return s&&s.t?s:{default:s}}var l=class pa extends t.RandomIterator{constructor(a,c,u){super(a,u),this.container=c}copy(){return new pa(this.o,this.container,this.iteratorType)}},r=class extends n.default{constructor(s=[],a=!0){if(super(),Array.isArray(s))this.J=a?[...s]:s,this.i=s.length;else{this.J=[];let c=this;s.forEach(function(u){c.pushBack(u)})}}clear(){this.i=0,this.J.length=0}begin(){return new l(0,this)}end(){return new l(this.i,this)}rBegin(){return new l(this.i-1,this,1)}rEnd(){return new l(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J[s]}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J.splice(s,1),this.i-=1,this.i}eraseElementByValue(s){let a=0;for(let c=0;c<this.i;++c)this.J[c]!==s&&(this.J[a++]=this.J[c]);return this.i=this.J.length=a,this.i}eraseElementByIterator(s){let a=s.o;return s=s.next(),this.eraseElementByPos(a),s}pushBack(s){return this.J.push(s),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(s,a){if(s<0||s>this.i-1)throw new RangeError;this.J[s]=a}insert(s,a,c=1){if(s<0||s>this.i)throw new RangeError;return this.J.splice(s,0,...new Array(c).fill(a)),this.i+=c,this.i}find(s){for(let a=0;a<this.i;++a)if(this.J[a]===s)return new l(a,this);return this.end()}reverse(){this.J.reverse()}unique(){let s=1;for(let a=1;a<this.i;++a)this.J[a]!==this.J[a-1]&&(this.J[s++]=this.J[a]);return this.i=this.J.length=s,this.i}sort(s){this.J.sort(s)}forEach(s){for(let a=0;a<this.i;++a)s(this.J[a],a,this)}[Symbol.iterator](){return function*(){yield*this.J}.bind(this)()}},i=r;e.default=i}),nu=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=l(uo()),t=vt(),o=wt();function l(a){return a&&a.t?a:{default:a}}var r=class ma extends t.ContainerIterator{constructor(c,u,d,m){super(m),this.o=c,this.h=u,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.l}set pointer(c){this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.l=c}copy(){return new ma(this.o,this.h,this.container,this.iteratorType)}},i=class extends n.default{constructor(a=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let c=this;a.forEach(function(u){c.pushBack(u)})}V(a){let{L:c,B:u}=a;c.B=u,u.L=c,a===this.p&&(this.p=u),a===this._&&(this._=c),this.i-=1}G(a,c){let u=c.B,d={l:a,L:c,B:u};c.B=d,u.L=d,c===this.h&&(this.p=d),u===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new r(this.p,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this._,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let c=this.p;for(;a--;)c=c.B;return c.l}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let c=this.p;for(;a--;)c=c.B;return this.V(c),this.i}eraseElementByValue(a){let c=this.p;for(;c!==this.h;)c.l===a&&this.V(c),c=c.B;return this.i}eraseElementByIterator(a){let c=a.o;return c===this.h&&(0,o.throwIteratorAccessError)(),a=a.next(),this.V(c),a}pushBack(a){return this.G(a,this._),this.i}popBack(){if(this.i===0)return;let a=this._.l;return this.V(this._),a}pushFront(a){return this.G(a,this.h),this.i}popFront(){if(this.i===0)return;let a=this.p.l;return this.V(this.p),a}setElementByPos(a,c){if(a<0||a>this.i-1)throw new RangeError;let u=this.p;for(;a--;)u=u.B;u.l=c}insert(a,c,u=1){if(a<0||a>this.i)throw new RangeError;if(u<=0)return this.i;if(a===0)for(;u--;)this.pushFront(c);else if(a===this.i)for(;u--;)this.pushBack(c);else{let d=this.p;for(let b=1;b<a;++b)d=d.B;let m=d.B;for(this.i+=u;u--;)d.B={l:c,L:d},d.B.L=d,d=d.B;d.B=m,m.L=d}return this.i}find(a){let c=this.p;for(;c!==this.h;){if(c.l===a)return new r(c,this.h,this);c=c.B}return this.end()}reverse(){if(this.i<=1)return;let a=this.p,c=this._,u=0;for(;u<<1<this.i;){let d=a.l;a.l=c.l,c.l=d,a=a.B,c=c.L,u+=1}}unique(){if(this.i<=1)return this.i;let a=this.p;for(;a!==this.h;){let c=a;for(;c.B!==this.h&&c.l===c.B.l;)c=c.B,this.i-=1;a.B=c.B,a.B.L=a,a=a.B}return this.i}sort(a){if(this.i<=1)return;let c=[];this.forEach(function(d){c.push(d)}),c.sort(a);let u=this.p;c.forEach(function(d){u.l=d,u=u.B})}merge(a){let c=this;if(this.i===0)a.forEach(function(u){c.pushBack(u)});else{let u=this.p;a.forEach(function(d){for(;u!==c.h&&u.l<=d;)u=u.B;c.G(d,u.L)})}return this.i}forEach(a){let c=this.p,u=0;for(;c!==this.h;)a(c.l,u++,this),c=c.B}[Symbol.iterator](){return function*(){if(this.i===0)return;let a=this.p;for(;a!==this.h;)yield a.l,a=a.B}.bind(this)()}},s=i;e.default=s}),ru=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=o(uo()),t=fa();function o(s){return s&&s.t?s:{default:s}}var l=class ga extends t.RandomIterator{constructor(a,c,u){super(a,u),this.container=c}copy(){return new ga(this.o,this.container,this.iteratorType)}},r=class extends n.default{constructor(s=[],a=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let c=(()=>{if(typeof s.length=="number")return s.length;if(typeof s.size=="number")return s.size;if(typeof s.size=="function")return s.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=a,this.P=Math.max(Math.ceil(c/this.F),1);for(let m=0;m<this.P;++m)this.A.push(new Array(this.F));let u=Math.ceil(c/this.F);this.j=this.R=(this.P>>1)-(u>>1),this.D=this.N=this.F-c%this.F>>1;let d=this;s.forEach(function(m){d.pushBack(m)})}T(){let s=[],a=Math.max(this.P>>1,1);for(let c=0;c<a;++c)s[c]=new Array(this.F);for(let c=this.j;c<this.P;++c)s[s.length]=this.A[c];for(let c=0;c<this.R;++c)s[s.length]=this.A[c];s[s.length]=[...this.A[this.R]],this.j=a,this.R=s.length-1;for(let c=0;c<a;++c)s[s.length]=new Array(this.F);this.A=s,this.P=s.length}O(s){let a=this.D+s+1,c=a%this.F,u=c-1,d=this.j+(a-c)/this.F;return c===0&&(d-=1),d%=this.P,u<0&&(u+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:u}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new l(0,this)}end(){return new l(this.i,this)}rBegin(){return new l(this.i-1,this,1)}rEnd(){return new l(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(s){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=s,this.i}popBack(){if(this.i===0)return;let s=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,s}pushFront(s){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=s,this.i}popFront(){if(this.i===0)return;let s=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,s}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:a,curNodePointerIndex:c}=this.O(s);return this.A[a][c]}setElementByPos(s,a){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:c,curNodePointerIndex:u}=this.O(s);this.A[c][u]=a}insert(s,a,c=1){if(s<0||s>this.i)throw new RangeError;if(s===0)for(;c--;)this.pushFront(a);else if(s===this.i)for(;c--;)this.pushBack(a);else{let u=[];for(let d=s;d<this.i;++d)u.push(this.getElementByPos(d));this.cut(s-1);for(let d=0;d<c;++d)this.pushBack(a);for(let d=0;d<u.length;++d)this.pushBack(u[d])}return this.i}cut(s){if(s<0)return this.clear(),0;let{curNodeBucketIndex:a,curNodePointerIndex:c}=this.O(s);return this.R=a,this.N=c,this.i=s+1,this.i}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;if(s===0)this.popFront();else if(s===this.i-1)this.popBack();else{let a=[];for(let u=s+1;u<this.i;++u)a.push(this.getElementByPos(u));this.cut(s),this.popBack();let c=this;a.forEach(function(u){c.pushBack(u)})}return this.i}eraseElementByValue(s){if(this.i===0)return 0;let a=[];for(let u=0;u<this.i;++u){let d=this.getElementByPos(u);d!==s&&a.push(d)}let c=a.length;for(let u=0;u<c;++u)this.setElementByPos(u,a[u]);return this.cut(c-1)}eraseElementByIterator(s){let a=s.o;return this.eraseElementByPos(a),s=s.next(),s}find(s){for(let a=0;a<this.i;++a)if(this.getElementByPos(a)===s)return new l(a,this);return this.end()}reverse(){let s=0,a=this.i-1;for(;s<a;){let c=this.getElementByPos(s);this.setElementByPos(s,this.getElementByPos(a)),this.setElementByPos(a,c),s+=1,a-=1}}unique(){if(this.i<=1)return this.i;let s=1,a=this.getElementByPos(0);for(let c=1;c<this.i;++c){let u=this.getElementByPos(c);u!==a&&(a=u,this.setElementByPos(s++,u))}for(;this.i>s;)this.popBack();return this.i}sort(s){let a=[];for(let c=0;c<this.i;++c)a.push(this.getElementByPos(c));a.sort(s);for(let c=0;c<this.i;++c)this.setElementByPos(c,a[c])}shrinkToFit(){if(this.i===0)return;let s=[];this.forEach(function(a){s.push(a)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let a=0;a<this.P;++a)this.A.push(new Array(this.F));for(let a=0;a<s.length;++a)this.pushBack(s[a])}forEach(s){for(let a=0;a<this.i;++a)s(this.getElementByPos(a),a,this)}[Symbol.iterator](){return function*(){for(let s=0;s<this.i;++s)yield this.getElementByPos(s)}.bind(this)()}},i=r;e.default=i}),iu=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var n=class{constructor(o,l){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=o,this.l=l}L(){let o=this;if(o.ee===1&&o.tt.tt===o)o=o.W;else if(o.U)for(o=o.U;o.W;)o=o.W;else{let l=o.tt;for(;l.U===o;)o=l,l=o.tt;o=l}return o}B(){let o=this;if(o.W){for(o=o.W;o.U;)o=o.U;return o}else{let l=o.tt;for(;l.W===o;)o=l,l=o.tt;return o.W!==l?l:o}}te(){let o=this.tt,l=this.W,r=l.U;return o.tt===this?o.tt=l:o.U===this?o.U=l:o.W=l,l.tt=o,l.U=this,this.tt=l,this.W=r,r&&(r.tt=this),l}se(){let o=this.tt,l=this.U,r=l.W;return o.tt===this?o.tt=l:o.U===this?o.U=l:o.W=l,l.tt=o,l.W=this,this.tt=l,this.U=r,r&&(r.tt=this),l}};e.TreeNode=n;var t=class extends n{constructor(){super(...arguments),this.rt=1}te(){let o=super.te();return this.ie(),o.ie(),o}se(){let o=super.se();return this.ie(),o.ie(),o}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=t}),ba=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=iu(),t=vt(),o=wt(),l=class extends t.Container{constructor(i=function(a,c){return a<c?-1:a>c?1:0},s=!1){super(),this.Y=void 0,this.v=i,s?(this.re=n.TreeNodeEnableIndex,this.M=function(a,c,u){let d=this.ne(a,c,u);if(d){let m=d.tt;for(;m!==this.h;)m.rt+=1,m=m.tt;let b=this.he(d);if(b){let{parentNode:y,grandParent:g,curNode:T}=b;y.ie(),g.ie(),T.ie()}}return this.i},this.V=function(a){let c=this.fe(a);for(;c!==this.h;)c.rt-=1,c=c.tt}):(this.re=n.TreeNode,this.M=function(a,c,u){let d=this.ne(a,c,u);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(i,s){let a=this.h;for(;i;){let c=this.v(i.u,s);if(c<0)i=i.W;else if(c>0)a=i,i=i.U;else return i}return a}Z(i,s){let a=this.h;for(;i;)this.v(i.u,s)<=0?i=i.W:(a=i,i=i.U);return a}$(i,s){let a=this.h;for(;i;){let c=this.v(i.u,s);if(c<0)a=i,i=i.W;else if(c>0)i=i.U;else return i}return a}rr(i,s){let a=this.h;for(;i;)this.v(i.u,s)<0?(a=i,i=i.W):i=i.U;return a}ue(i){for(;;){let s=i.tt;if(s===this.h)return;if(i.ee===1){i.ee=0;return}if(i===s.U){let a=s.W;if(a.ee===1)a.ee=0,s.ee=1,s===this.Y?this.Y=s.te():s.te();else if(a.W&&a.W.ee===1){a.ee=s.ee,s.ee=0,a.W.ee=0,s===this.Y?this.Y=s.te():s.te();return}else a.U&&a.U.ee===1?(a.ee=1,a.U.ee=0,a.se()):(a.ee=1,i=s)}else{let a=s.U;if(a.ee===1)a.ee=0,s.ee=1,s===this.Y?this.Y=s.se():s.se();else if(a.U&&a.U.ee===1){a.ee=s.ee,s.ee=0,a.U.ee=0,s===this.Y?this.Y=s.se():s.se();return}else a.W&&a.W.ee===1?(a.ee=1,a.W.ee=0,a.te()):(a.ee=1,i=s)}}}fe(i){if(this.i===1)return this.clear(),this.h;let s=i;for(;s.U||s.W;){if(s.W)for(s=s.W;s.U;)s=s.U;else s=s.U;[i.u,s.u]=[s.u,i.u],[i.l,s.l]=[s.l,i.l],i=s}this.h.U===s?this.h.U=s.tt:this.h.W===s&&(this.h.W=s.tt),this.ue(s);let a=s.tt;return s===a.U?a.U=void 0:a.W=void 0,this.i-=1,this.Y.ee=0,a}oe(i,s){return i===void 0?!1:this.oe(i.U,s)||s(i)?!0:this.oe(i.W,s)}he(i){for(;;){let s=i.tt;if(s.ee===0)return;let a=s.tt;if(s===a.U){let c=a.W;if(c&&c.ee===1){if(c.ee=s.ee=0,a===this.Y)return;a.ee=1,i=a;continue}else if(i===s.W){if(i.ee=0,i.U&&(i.U.tt=s),i.W&&(i.W.tt=a),s.W=i.U,a.U=i.W,i.U=s,i.W=a,a===this.Y)this.Y=i,this.h.tt=i;else{let u=a.tt;u.U===a?u.U=i:u.W=i}return i.tt=a.tt,s.tt=i,a.tt=i,a.ee=1,{parentNode:s,grandParent:a,curNode:i}}else s.ee=0,a===this.Y?this.Y=a.se():a.se(),a.ee=1}else{let c=a.U;if(c&&c.ee===1){if(c.ee=s.ee=0,a===this.Y)return;a.ee=1,i=a;continue}else if(i===s.U){if(i.ee=0,i.U&&(i.U.tt=a),i.W&&(i.W.tt=s),a.W=i.U,s.U=i.W,i.U=a,i.W=s,a===this.Y)this.Y=i,this.h.tt=i;else{let u=a.tt;u.U===a?u.U=i:u.W=i}return i.tt=a.tt,s.tt=i,a.tt=i,a.ee=1,{parentNode:s,grandParent:a,curNode:i}}else s.ee=0,a===this.Y?this.Y=a.te():a.te(),a.ee=1}return}}ne(i,s,a){if(this.Y===void 0){this.i+=1,this.Y=new this.re(i,s),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let c,u=this.h.U,d=this.v(u.u,i);if(d===0){u.l=s;return}else if(d>0)u.U=new this.re(i,s),u.U.tt=u,c=u.U,this.h.U=c;else{let m=this.h.W,b=this.v(m.u,i);if(b===0){m.l=s;return}else if(b<0)m.W=new this.re(i,s),m.W.tt=m,c=m.W,this.h.W=c;else{if(a!==void 0){let y=a.o;if(y!==this.h){let g=this.v(y.u,i);if(g===0){y.l=s;return}else if(g>0){let T=y.L(),k=this.v(T.u,i);if(k===0){T.l=s;return}else k<0&&(c=new this.re(i,s),T.W===void 0?(T.W=c,c.tt=T):(y.U=c,c.tt=y))}}}if(c===void 0)for(c=this.Y;;){let y=this.v(c.u,i);if(y>0){if(c.U===void 0){c.U=new this.re(i,s),c.U.tt=c,c=c.U;break}c=c.U}else if(y<0){if(c.W===void 0){c.W=new this.re(i,s),c.W.tt=c,c=c.W;break}c=c.W}else{c.l=s;return}}}}return this.i+=1,c}I(i,s){for(;i;){let a=this.v(i.u,s);if(a<0)i=i.W;else if(a>0)i=i.U;else return i}return i||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(i,s){let a=i.o;if(a===this.h&&(0,o.throwIteratorAccessError)(),this.i===1)return a.u=s,!0;if(a===this.h.U)return this.v(a.B().u,s)>0?(a.u=s,!0):!1;if(a===this.h.W)return this.v(a.L().u,s)<0?(a.u=s,!0):!1;let c=a.L().u;if(this.v(c,s)>=0)return!1;let u=a.B().u;return this.v(u,s)<=0?!1:(a.u=s,!0)}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s=0,a=this;return this.oe(this.Y,function(c){return i===s?(a.V(c),!0):(s+=1,!1)}),this.i}eraseElementByKey(i){if(this.i===0)return!1;let s=this.I(this.Y,i);return s===this.h?!1:(this.V(s),!0)}eraseElementByIterator(i){let s=i.o;s===this.h&&(0,o.throwIteratorAccessError)();let a=s.W===void 0;return i.iteratorType===0?a&&i.next():(!a||s.U===void 0)&&i.next(),this.V(s),i}forEach(i){let s=0;for(let a of this)i(a,s++,this)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s,a=0;for(let c of this){if(a===i){s=c;break}a+=1}return s}getHeight(){if(this.i===0)return 0;let i=function(s){return s?Math.max(i(s.U),i(s.W))+1:0};return i(this.Y)}},r=l;e.default=r}),ya=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=vt(),t=wt(),o=class extends n.ContainerIterator{constructor(r,i,s){super(s),this.o=r,this.h=i,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let r=this.o,i=this.h.tt;if(r===this.h)return i?i.rt-1:0;let s=0;for(r.U&&(s+=r.U.rt);r!==i;){let a=r.tt;r===a.W&&(s+=1,a.U&&(s+=a.U.rt)),r=a}return s}},l=o;e.default=l}),ou=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=l(ba()),t=l(ya()),o=wt();function l(a){return a&&a.t?a:{default:a}}var r=class Ta extends t.default{constructor(c,u,d,m){super(c,u,m),this.container=d}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new Ta(this.o,this.h,this.container,this.iteratorType)}},i=class extends n.default{constructor(a=[],c,u){super(c,u);let d=this;a.forEach(function(m){d.insert(m)})}*K(a){a!==void 0&&(yield*this.K(a.U),yield a.u,yield*this.K(a.W))}begin(){return new r(this.h.U||this.h,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this.h.W||this.h,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(a,c){return this.M(a,void 0,c)}find(a){let c=this.I(this.Y,a);return new r(c,this.h,this)}lowerBound(a){let c=this.X(this.Y,a);return new r(c,this.h,this)}upperBound(a){let c=this.Z(this.Y,a);return new r(c,this.h,this)}reverseLowerBound(a){let c=this.$(this.Y,a);return new r(c,this.h,this)}reverseUpperBound(a){let c=this.rr(this.Y,a);return new r(c,this.h,this)}union(a){let c=this;return a.forEach(function(u){c.insert(u)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=i;e.default=s}),su=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=l(ba()),t=l(ya()),o=wt();function l(a){return a&&a.t?a:{default:a}}var r=class _a extends t.default{constructor(c,u,d,m){super(c,u,m),this.container=d}get pointer(){this.o===this.h&&(0,o.throwIteratorAccessError)();let c=this;return new Proxy([],{get(u,d){if(d==="0")return c.o.u;if(d==="1")return c.o.l},set(u,d,m){if(d!=="1")throw new TypeError("props must be 1");return c.o.l=m,!0}})}copy(){return new _a(this.o,this.h,this.container,this.iteratorType)}},i=class extends n.default{constructor(a=[],c,u){super(c,u);let d=this;a.forEach(function(m){d.setElement(m[0],m[1])})}*K(a){a!==void 0&&(yield*this.K(a.U),yield[a.u,a.l],yield*this.K(a.W))}begin(){return new r(this.h.U||this.h,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this.h.W||this.h,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){if(this.i===0)return;let a=this.h.U;return[a.u,a.l]}back(){if(this.i===0)return;let a=this.h.W;return[a.u,a.l]}lowerBound(a){let c=this.X(this.Y,a);return new r(c,this.h,this)}upperBound(a){let c=this.Z(this.Y,a);return new r(c,this.h,this)}reverseLowerBound(a){let c=this.$(this.Y,a);return new r(c,this.h,this)}reverseUpperBound(a){let c=this.rr(this.Y,a);return new r(c,this.h,this)}setElement(a,c,u){return this.M(a,c,u)}find(a){let c=this.I(this.Y,a);return new r(c,this.h,this)}getElementByKey(a){return this.I(this.Y,a).l}union(a){let c=this;return a.forEach(function(u){c.setElement(u[0],u[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=i;e.default=s}),ka=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=n;function n(t){let o=typeof t;return o==="object"&&t!==null||o==="function"}}),va=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var n=vt(),t=l(ka()),o=wt();function l(s){return s&&s.t?s:{default:s}}var r=class extends n.ContainerIterator{constructor(s,a,c){super(c),this.o=s,this.h=a,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=r;var i=class extends n.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(s){let{L:a,B:c}=s;a.B=c,c.L=a,s===this.p&&(this.p=c),s===this._&&(this._=a),this.i-=1}M(s,a,c){c===void 0&&(c=(0,t.default)(s));let u;if(c){let d=s[this.HASH_TAG];if(d!==void 0)return this.H[d].l=a,this.i;Object.defineProperty(s,this.HASH_TAG,{value:this.H.length,configurable:!0}),u={u:s,l:a,L:this._,B:this.h},this.H.push(u)}else{let d=this.g[s];if(d)return d.l=a,this.i;u={u:s,l:a,L:this._,B:this.h},this.g[s]=u}return this.i===0?(this.p=u,this.h.B=u):this._.B=u,this._=u,this.h.L=u,++this.i}I(s,a){if(a===void 0&&(a=(0,t.default)(s)),a){let c=s[this.HASH_TAG];return c===void 0?this.h:this.H[c]}else return this.g[s]||this.h}clear(){let s=this.HASH_TAG;this.H.forEach(function(a){delete a.u[s]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(s,a){let c;if(a===void 0&&(a=(0,t.default)(s)),a){let u=s[this.HASH_TAG];if(u===void 0)return!1;delete s[this.HASH_TAG],c=this.H[u],delete this.H[u]}else{if(c=this.g[s],c===void 0)return!1;delete this.g[s]}return this.V(c),!0}eraseElementByIterator(s){let a=s.o;return a===this.h&&(0,o.throwIteratorAccessError)(),this.V(a),s.next()}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let a=this.p;for(;s--;)a=a.B;return this.V(a),this.i}};e.HashContainer=i}),au=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=va(),t=wt(),o=class wa extends n.HashContainerIterator{constructor(s,a,c,u){super(s,a,u),this.container=c}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new wa(this.o,this.h,this.container,this.iteratorType)}},l=class extends n.HashContainer{constructor(i=[]){super();let s=this;i.forEach(function(a){s.insert(a)})}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(i,s){return this.M(i,void 0,s)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s=this.p;for(;i--;)s=s.B;return s.u}find(i,s){let a=this.I(i,s);return new o(a,this.h,this)}forEach(i){let s=0,a=this.p;for(;a!==this.h;)i(a.u,s++,this),a=a.B}[Symbol.iterator](){return function*(){let i=this.p;for(;i!==this.h;)yield i.u,i=i.B}.bind(this)()}},r=l;e.default=r}),lu=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var n=va(),t=l(ka()),o=wt();function l(a){return a&&a.t?a:{default:a}}var r=class Sa extends n.HashContainerIterator{constructor(c,u,d,m){super(c,u,m),this.container=d}get pointer(){this.o===this.h&&(0,o.throwIteratorAccessError)();let c=this;return new Proxy([],{get(u,d){if(d==="0")return c.o.u;if(d==="1")return c.o.l},set(u,d,m){if(d!=="1")throw new TypeError("props must be 1");return c.o.l=m,!0}})}copy(){return new Sa(this.o,this.h,this.container,this.iteratorType)}},i=class extends n.HashContainer{constructor(a=[]){super();let c=this;a.forEach(function(u){c.setElement(u[0],u[1])})}begin(){return new r(this.p,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this._,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(a,c,u){return this.M(a,c,u)}getElementByKey(a,c){if(c===void 0&&(c=(0,t.default)(a)),c){let d=a[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let u=this.g[a];return u?u.l:void 0}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let c=this.p;for(;a--;)c=c.B;return[c.u,c.l]}find(a,c){let u=this.I(a,c);return new r(u,this.h,this)}forEach(a){let c=0,u=this.p;for(;u!==this.h;)a([u.u,u.l],c++,this),u=u.B}[Symbol.iterator](){return function*(){let a=this.p;for(;a!==this.h;)yield[a.u,a.l],a=a.B}.bind(this)()}},s=i;e.default=s}),cu=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return l.default}});var n=d(Xc()),t=d(Zc()),o=d(eu()),l=d(tu()),r=d(nu()),i=d(ru()),s=d(ou()),a=d(su()),c=d(au()),u=d(lu());function d(m){return m&&m.t?m:{default:m}}}),uu=de((e,n)=>{"use strict";re(),oe(),ie();var t=cu().OrderedSet,o=_t()("number-allocator:trace"),l=_t()("number-allocator:error");function r(s,a){this.low=s,this.high=a}r.prototype.equals=function(s){return this.low===s.low&&this.high===s.high},r.prototype.compare=function(s){return this.low<s.low&&this.high<s.low?-1:s.low<this.low&&s.high<this.low?1:0};function i(s,a){if(!(this instanceof i))return new i(s,a);this.min=s,this.max=a,this.ss=new t([],(c,u)=>c.compare(u)),o("Create"),this.clear()}i.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},i.prototype.alloc=function(){if(this.ss.size()===0)return o("alloc():empty"),null;let s=this.ss.begin(),a=s.pointer.low,c=s.pointer.high,u=a;return u+1<=c?this.ss.updateKeyByIterator(s,new r(a+1,c)):this.ss.eraseElementByPos(0),o("alloc():"+u),u},i.prototype.use=function(s){let a=new r(s,s),c=this.ss.lowerBound(a);if(!c.equals(this.ss.end())){let u=c.pointer.low,d=c.pointer.high;return c.pointer.equals(a)?(this.ss.eraseElementByIterator(c),o("use():"+s),!0):u>s?!1:u===s?(this.ss.updateKeyByIterator(c,new r(u+1,d)),o("use():"+s),!0):d===s?(this.ss.updateKeyByIterator(c,new r(u,d-1)),o("use():"+s),!0):(this.ss.updateKeyByIterator(c,new r(s+1,d)),this.ss.insert(new r(u,s-1)),o("use():"+s),!0)}return o("use():failed"),!1},i.prototype.free=function(s){if(s<this.min||s>this.max){l("free():"+s+" is out of range");return}let a=new r(s,s),c=this.ss.upperBound(a);if(c.equals(this.ss.end())){if(c.equals(this.ss.begin())){this.ss.insert(a);return}c.pre();let u=c.pointer.high;c.pointer.high+1===s?this.ss.updateKeyByIterator(c,new r(u,s)):this.ss.insert(a)}else if(c.equals(this.ss.begin()))if(s+1===c.pointer.low){let u=c.pointer.high;this.ss.updateKeyByIterator(c,new r(s,u))}else this.ss.insert(a);else{let u=c.pointer.low,d=c.pointer.high;c.pre();let m=c.pointer.low;c.pointer.high+1===s?s+1===u?(this.ss.eraseElementByIterator(c),this.ss.updateKeyByIterator(c,new r(m,d))):this.ss.updateKeyByIterator(c,new r(m,s)):s+1===u?(this.ss.eraseElementByIterator(c.next()),this.ss.insert(new r(s,d))):this.ss.insert(a)}o("free():"+s)},i.prototype.clear=function(){o("clear()"),this.ss.clear(),this.ss.insert(new r(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){console.log("length:"+this.ss.size());for(let s of this.ss)console.log(s)},n.exports=i}),Ea=de((e,n)=>{re(),oe(),ie();var t=uu();n.exports.NumberAllocator=t}),hu=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0});var n=Qc(),t=Ea(),o=class{constructor(l){l>0&&(this.aliasToTopic=new n.LRUCache({max:l}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,l),this.max=l,this.length=0)}put(l,r){if(r===0||r>this.max)return!1;let i=this.aliasToTopic.get(r);return i&&delete this.topicToAlias[i],this.aliasToTopic.set(r,l),this.topicToAlias[l]=r,this.numberAllocator.use(r),this.length=this.aliasToTopic.size,!0}getTopicByAlias(l){return this.aliasToTopic.get(l)}getAliasByTopic(l){let r=this.topicToAlias[l];return typeof r<"u"&&this.aliasToTopic.get(r),r}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=o}),du=de(e=>{"use strict";re(),oe(),ie();var n=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=Gn(),o=n(hu()),l=rn(),r=(i,s)=>{i.log("_handleConnack");let{options:a}=i,c=a.protocolVersion===5?s.reasonCode:s.returnCode;if(clearTimeout(i.connackTimer),delete i.topicAliasSend,s.properties){if(s.properties.topicAliasMaximum){if(s.properties.topicAliasMaximum>65535){i.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}s.properties.topicAliasMaximum>0&&(i.topicAliasSend=new o.default(s.properties.topicAliasMaximum))}s.properties.serverKeepAlive&&a.keepalive&&(a.keepalive=s.properties.serverKeepAlive),s.properties.maximumPacketSize&&(a.properties||(a.properties={}),a.properties.maximumPacketSize=s.properties.maximumPacketSize)}if(c===0)i.reconnecting=!1,i._onConnect(s);else if(c>0){let u=new l.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[c]}`,c);i.emit("error",u)}};e.default=r}),fu=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0});var n=(t,o,l)=>{t.log("handling pubrel packet");let r=typeof l<"u"?l:t.noop,{messageId:i}=o,s={cmd:"pubcomp",messageId:i};t.incomingStore.get(o,(a,c)=>{a?t._sendPacket(s,r):(t.emit("message",c.topic,c.payload,c),t.handleMessage(c,u=>{if(u)return r(u);t.incomingStore.del(c,t.noop),t._sendPacket(s,r)}))})};e.default=n}),pu=de(e=>{"use strict";re(),oe(),ie();var n=e&&e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var t=n(Jc()),o=n(Yc()),l=n(du()),r=n(Gn()),i=n(fu()),s=(a,c,u)=>{let{options:d}=a;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<c.length)return a.emit("error",new Error(`exceeding packets size ${c.cmd}`)),a.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),a;switch(a.log("_handlePacket :: emitting packetreceive"),a.emit("packetreceive",c),c.cmd){case"publish":(0,t.default)(a,c,u);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":a.reschedulePing(),(0,r.default)(a,c),u();break;case"pubrel":a.reschedulePing(),(0,i.default)(a,c,u);break;case"connack":(0,l.default)(a,c),u();break;case"auth":a.reschedulePing(),(0,o.default)(a,c),u();break;case"pingresp":a.log("_handlePacket :: received pingresp"),a.reschedulePing(!0),u();break;case"disconnect":a.emit("disconnect",c),u();break;default:a.log("_handlePacket :: unknown command"),u();break}};e.default=s}),mu=de(e=>{"use strict";re(),oe(),ie();var n=e&&e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var t=n((nn(),Ce(Jt))),o=rn(),l=class{};e.TypedEventEmitter=l,(0,o.applyMixin)(l,t.default)}),Kn=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var n=()=>{var r;return typeof window<"u"?typeof navigator<"u"&&((r=navigator.userAgent)===null||r===void 0?void 0:r.toLowerCase().indexOf(" electron/"))>-1&&we!=null&&we.versions?!Object.prototype.hasOwnProperty.call(we.versions,"electron"):typeof window.document<"u":!1},t=()=>{var r,i;return!!(typeof self=="object"&&!((i=(r=self?.constructor)===null||r===void 0?void 0:r.name)===null||i===void 0)&&i.includes("WorkerGlobalScope"))},o=()=>typeof navigator<"u"&&navigator.product==="ReactNative",l=n()||t()||o();e.isWebWorker=t(),e.isReactNativeBrowser=o(),e.default=l}),gu=de((e,n)=>{re(),oe(),ie(),function(t,o){typeof e=="object"&&typeof n<"u"?o(e):typeof define=="function"&&define.amd?define(["exports"],o):(t=typeof globalThis<"u"?globalThis:t||self,o(t.fastUniqueNumbers={}))}(e,function(t){"use strict";var o=function(b){return function(y){var g=b(y);return y.add(g),g}},l=function(b){return function(y,g){return b.set(y,g),g}},r=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,i=536870912,s=i*2,a=function(b,y){return function(g){var T=y.get(g),k=T===void 0?g.size:T<s?T+1:0;if(!g.has(k))return b(g,k);if(g.size<i){for(;g.has(k);)k=Math.floor(Math.random()*s);return b(g,k)}if(g.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;g.has(k);)k=Math.floor(Math.random()*r);return b(g,k)}},c=new WeakMap,u=l(c),d=a(u,c),m=o(d);t.addUniqueNumber=m,t.generateUniqueNumber=d})}),bu=de((e,n)=>{re(),oe(),ie(),function(t,o){typeof e=="object"&&typeof n<"u"?o(e,gu()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],o):(t=typeof globalThis<"u"?globalThis:t||self,o(t.workerTimersBroker={},t.fastUniqueNumbers))}(e,function(t,o){"use strict";var l=function(s){return s.method!==void 0&&s.method==="call"},r=function(s){return s.error===null&&typeof s.id=="number"},i=function(s){var a=new Map([[0,function(){}]]),c=new Map([[0,function(){}]]),u=new Map,d=new Worker(s);d.addEventListener("message",function(T){var k=T.data;if(l(k)){var v=k.params,_=v.timerId,A=v.timerType;if(A==="interval"){var L=a.get(_);if(typeof L=="number"){var S=u.get(L);if(S===void 0||S.timerId!==_||S.timerType!==A)throw new Error("The timer is in an undefined state.")}else if(typeof L<"u")L();else throw new Error("The timer is in an undefined state.")}else if(A==="timeout"){var R=c.get(_);if(typeof R=="number"){var N=u.get(R);if(N===void 0||N.timerId!==_||N.timerType!==A)throw new Error("The timer is in an undefined state.")}else if(typeof R<"u")R(),c.delete(_);else throw new Error("The timer is in an undefined state.")}}else if(r(k)){var q=k.id,G=u.get(q);if(G===void 0)throw new Error("The timer is in an undefined state.");var Q=G.timerId,C=G.timerType;u.delete(q),C==="interval"?a.delete(Q):c.delete(Q)}else{var W=k.error.message;throw new Error(W)}});var m=function(T){var k=o.generateUniqueNumber(u);u.set(k,{timerId:T,timerType:"interval"}),a.set(T,k),d.postMessage({id:k,method:"clear",params:{timerId:T,timerType:"interval"}})},b=function(T){var k=o.generateUniqueNumber(u);u.set(k,{timerId:T,timerType:"timeout"}),c.set(T,k),d.postMessage({id:k,method:"clear",params:{timerId:T,timerType:"timeout"}})},y=function(T){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=o.generateUniqueNumber(a);return a.set(v,function(){T(),typeof a.get(v)=="function"&&d.postMessage({id:null,method:"set",params:{delay:k,now:performance.now(),timerId:v,timerType:"interval"}})}),d.postMessage({id:null,method:"set",params:{delay:k,now:performance.now(),timerId:v,timerType:"interval"}}),v},g=function(T){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=o.generateUniqueNumber(c);return c.set(v,T),d.postMessage({id:null,method:"set",params:{delay:k,now:performance.now(),timerId:v,timerType:"timeout"}}),v};return{clearInterval:m,clearTimeout:b,setInterval:y,setTimeout:g}};t.load=i})}),yu=de((e,n)=>{re(),oe(),ie(),function(t,o){typeof e=="object"&&typeof n<"u"?o(e,bu()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],o):(t=typeof globalThis<"u"?globalThis:t||self,o(t.workerTimers={},t.workerTimersBroker))}(e,function(t,o){"use strict";var l=function(d,m){var b=null;return function(){if(b!==null)return b;var y=new Blob([m],{type:"application/javascript; charset=utf-8"}),g=URL.createObjectURL(y);return b=d(g),setTimeout(function(){return URL.revokeObjectURL(g)}),b}},r=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,i=l(o.load,r),s=function(d){return i().clearInterval(d)},a=function(d){return i().clearTimeout(d)},c=function(){var d;return(d=i()).setInterval.apply(d,arguments)},u=function(){var d;return(d=i()).setTimeout.apply(d,arguments)};t.clearInterval=s,t.clearTimeout=a,t.setInterval=c,t.setTimeout=u})}),Tu=de(e=>{"use strict";re(),oe(),ie();var n=e&&e.__createBinding||(Object.create?function(c,u,d,m){m===void 0&&(m=d);var b=Object.getOwnPropertyDescriptor(u,d);(!b||("get"in b?!u.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(c,m,b)}:function(c,u,d,m){m===void 0&&(m=d),c[m]=u[d]}),t=e&&e.__setModuleDefault||(Object.create?function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}:function(c,u){c.default=u}),o=e&&e.__importStar||function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var d in c)d!=="default"&&Object.prototype.hasOwnProperty.call(c,d)&&n(u,c,d);return t(u,c),u};Object.defineProperty(e,"__esModule",{value:!0});var l=o(Kn()),r=yu(),i={set:r.setInterval,clear:r.clearInterval},s={set:(c,u)=>setInterval(c,u),clear:c=>clearInterval(c)},a=c=>{switch(c){case"native":return s;case"worker":return i;case"auto":default:return l.default&&!l.isWebWorker&&!l.isReactNativeBrowser?i:s}};e.default=a}),Ia=de(e=>{"use strict";re(),oe(),ie();var n=e&&e.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var t=n(Tu()),o=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(l,r){this.destroyed=!1,this.client=l,this.timer=typeof r=="object"&&"set"in r&&"clear"in r?r:(0,t.default)(r),this.setKeepalive(l.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(l){if(l*=1e3,isNaN(l)||l<=0||l>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${l}`);this._keepalive=l,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${l}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let l=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+l,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};e.default=o}),Gi=de(e=>{"use strict";re(),oe(),ie();var n=e&&e.__createBinding||(Object.create?function(L,S,R,N){N===void 0&&(N=R);var q=Object.getOwnPropertyDescriptor(S,R);(!q||("get"in q?!S.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return S[R]}}),Object.defineProperty(L,N,q)}:function(L,S,R,N){N===void 0&&(N=R),L[N]=S[R]}),t=e&&e.__setModuleDefault||(Object.create?function(L,S){Object.defineProperty(L,"default",{enumerable:!0,value:S})}:function(L,S){L.default=S}),o=e&&e.__importStar||function(L){if(L&&L.__esModule)return L;var S={};if(L!=null)for(var R in L)R!=="default"&&Object.prototype.hasOwnProperty.call(L,R)&&n(S,L,R);return t(S,L),S},l=e&&e.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(e,"__esModule",{value:!0});var r=l(lc()),i=l($c()),s=l(ca()),a=zt(),c=l(Gc()),u=o(Kc()),d=l(_t()),m=l(ua()),b=l(pu()),y=rn(),g=mu(),T=l(Ia()),k=o(Kn()),v=globalThis.setImmediate||((...L)=>{let S=L.shift();(0,y.nextTick)(()=>{S(...L)})}),_={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},A=class Ki extends g.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(S,R){super(),this.options=R||{};for(let N in _)typeof this.options[N]>"u"?this.options[N]=_[N]:this.options[N]=R[N];this.log=this.options.log||(0,d.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",Ki.VERSION),k.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",k.default?"browser":"node"),this.log("MqttClient :: options.protocol",R.protocol),this.log("MqttClient :: options.protocolVersion",R.protocolVersion),this.log("MqttClient :: options.username",R.username),this.log("MqttClient :: options.keepalive",R.keepalive),this.log("MqttClient :: options.reconnectPeriod",R.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",R.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",R.properties?R.properties.topicAliasMaximum:void 0),this.options.clientId=typeof R.clientId=="string"?R.clientId:Ki.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=R.protocolVersion===5&&R.customHandleAcks?R.customHandleAcks:(...N)=>{N[3](null,0)},this.options.writeCache||(i.default.writeToStream.cacheNumbers=!1),this.streamBuilder=S,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new s.default:this.options.messageIdProvider,this.outgoingStore=R.outgoingStore||new m.default,this.incomingStore=R.incomingStore||new m.default,this.queueQoSZero=R.queueQoSZero===void 0?!0:R.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,R.properties&&R.properties.topicAliasMaximum>0&&(R.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new r.default(R.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:N}=this,q=()=>{let G=N.shift();this.log("deliver :: entry %o",G);let Q=null;if(!G){this._resubscribe();return}Q=G.packet,this.log("deliver :: call _sendPacket for %o",Q);let C=!0;Q.messageId&&Q.messageId!==0&&(this.messageIdProvider.register(Q.messageId)||(C=!1)),C?this._sendPacket(Q,W=>{G.cb&&G.cb(W),q()}):(this.log("messageId: %d has already used. The message is skipped and removed.",Q.messageId),q())};this.log("connect :: sending queued packets"),q()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(S,R){R()}handleMessage(S,R){R()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var S;let R=new a.Writable,N=i.default.parser(this.options),q=null,G=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new m.default,this.outgoingStore=this.options.outgoingStore||new m.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),N.on("packet",V=>{this.log("parser :: on packet push to packets array."),G.push(V)});let Q=()=>{this.log("work :: getting next packet in queue");let V=G.shift();if(V)this.log("work :: packet pulled from queue"),(0,b.default)(this,V,C);else{this.log("work :: no packets in queue");let ae=q;q=null,this.log("work :: done flag is %s",!!ae),ae&&ae()}},C=()=>{if(G.length)(0,y.nextTick)(Q);else{let V=q;q=null,V()}};R._write=(V,ae,ne)=>{q=ne,this.log("writable stream :: parsing buffer"),N.parse(V),Q()};let W=V=>{this.log("streamErrorHandler :: error",V.message),V.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",V)):this.noop(V)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(R),this.stream.on("error",W),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let Y={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(Y.will=Object.assign(Object.assign({},this.options.will),{payload:(S=this.options.will)===null||S===void 0?void 0:S.payload})),this.topicAliasRecv&&(Y.properties||(Y.properties={}),this.topicAliasRecv&&(Y.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(Y),N.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let V=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(V)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(S,R,N,q){this.log("publish :: message `%s` to topic `%s`",R,S);let{options:G}=this;typeof N=="function"&&(q=N,N=null),N=N||{},N=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),N);let{qos:Q,retain:C,dup:W,properties:Y,cbStorePut:V}=N;if(this._checkDisconnecting(q))return this;let ae=()=>{let ne=0;if((Q===1||Q===2)&&(ne=this._nextId(),ne===null))return this.log("No messageId left"),!1;let j={cmd:"publish",topic:S,payload:R,qos:Q,retain:C,messageId:ne,dup:W};switch(G.protocolVersion===5&&(j.properties=Y),this.log("publish :: qos",Q),Q){case 1:case 2:this.outgoing[j.messageId]={volatile:!1,cb:q||this.noop},this.log("MqttClient:publish: packet cmd: %s",j.cmd),this._sendPacket(j,void 0,V);break;default:this.log("MqttClient:publish: packet cmd: %s",j.cmd),this._sendPacket(j,q,V);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ae())&&this._storeProcessingQueue.push({invoke:ae,cbStorePut:N.cbStorePut,callback:q}),this}publishAsync(S,R,N){return new Promise((q,G)=>{this.publish(S,R,N,(Q,C)=>{Q?G(Q):q(C)})})}subscribe(S,R,N){let q=this.options.protocolVersion;typeof R=="function"&&(N=R),N=N||this.noop;let G=!1,Q=[];typeof S=="string"?(S=[S],Q=S):Array.isArray(S)?Q=S:typeof S=="object"&&(G=S.resubscribe,delete S.resubscribe,Q=Object.keys(S));let C=u.validateTopics(Q);if(C!==null)return v(N,new Error(`Invalid topic ${C}`)),this;if(this._checkDisconnecting(N))return this.log("subscribe: discconecting true"),this;let W={qos:0};q===5&&(W.nl=!1,W.rap=!1,W.rh=0),R=Object.assign(Object.assign({},W),R);let Y=R.properties,V=[],ae=(j,fe)=>{if(fe=fe||R,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,j)||this._resubscribeTopics[j].qos<fe.qos||G){let ee={topic:j,qos:fe.qos};q===5&&(ee.nl=fe.nl,ee.rap=fe.rap,ee.rh=fe.rh,ee.properties=Y),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",ee.topic,ee.qos),V.push(ee)}};if(Array.isArray(S)?S.forEach(j=>{this.log("subscribe: array topic %s",j),ae(j)}):Object.keys(S).forEach(j=>{this.log("subscribe: object topic %s, %o",j,S[j]),ae(j,S[j])}),!V.length)return N(null,[]),this;let ne=()=>{let j=this._nextId();if(j===null)return this.log("No messageId left"),!1;let fe={cmd:"subscribe",subscriptions:V,messageId:j};if(Y&&(fe.properties=Y),this.options.resubscribe){this.log("subscribe :: resubscribe true");let ee=[];V.forEach(ge=>{if(this.options.reconnectPeriod>0){let E={qos:ge.qos};q===5&&(E.nl=ge.nl||!1,E.rap=ge.rap||!1,E.rh=ge.rh||0,E.properties=ge.properties),this._resubscribeTopics[ge.topic]=E,ee.push(ge.topic)}}),this.messageIdToTopic[fe.messageId]=ee}return this.outgoing[fe.messageId]={volatile:!0,cb(ee,ge){if(!ee){let{granted:E}=ge;for(let H=0;H<E.length;H+=1)V[H].qos=E[H]}N(ee,V,ge)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(fe),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ne())&&this._storeProcessingQueue.push({invoke:ne,callback:N}),this}subscribeAsync(S,R){return new Promise((N,q)=>{this.subscribe(S,R,(G,Q)=>{G?q(G):N(Q)})})}unsubscribe(S,R,N){typeof S=="string"&&(S=[S]),typeof R=="function"&&(N=R),N=N||this.noop;let q=u.validateTopics(S);if(q!==null)return v(N,new Error(`Invalid topic ${q}`)),this;if(this._checkDisconnecting(N))return this;let G=()=>{let Q=this._nextId();if(Q===null)return this.log("No messageId left"),!1;let C={cmd:"unsubscribe",messageId:Q,unsubscriptions:[]};return typeof S=="string"?C.unsubscriptions=[S]:Array.isArray(S)&&(C.unsubscriptions=S),this.options.resubscribe&&C.unsubscriptions.forEach(W=>{delete this._resubscribeTopics[W]}),typeof R=="object"&&R.properties&&(C.properties=R.properties),this.outgoing[C.messageId]={volatile:!0,cb:N},this.log("unsubscribe: call _sendPacket"),this._sendPacket(C),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!G())&&this._storeProcessingQueue.push({invoke:G,callback:N}),this}unsubscribeAsync(S,R){return new Promise((N,q)=>{this.unsubscribe(S,R,(G,Q)=>{G?q(G):N(Q)})})}end(S,R,N){this.log("end :: (%s)",this.options.clientId),(S==null||typeof S!="boolean")&&(N=N||R,R=S,S=!1),typeof R!="object"&&(N=N||R,R=null),this.log("end :: cb? %s",!!N),(!N||typeof N!="function")&&(N=this.noop);let q=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(Q=>{this.outgoingStore.close(C=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),N){let W=Q||C;this.log("end :: closeStores: invoking callback with args"),N(W)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},G=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,S),this._cleanUp(S,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,y.nextTick)(q)},R)};return this.disconnecting?(N(),this):(this._clearReconnect(),this.disconnecting=!0,!S&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,G,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),G()),this)}endAsync(S,R){return new Promise((N,q)=>{this.end(S,R,G=>{G?q(G):N()})})}removeOutgoingMessage(S){if(this.outgoing[S]){let{cb:R}=this.outgoing[S];this._removeOutgoingAndStoreMessage(S,()=>{R(new Error("Message removed"))})}return this}reconnect(S){this.log("client reconnect");let R=()=>{S?(this.options.incomingStore=S.incomingStore,this.options.outgoingStore=S.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new m.default,this.outgoingStore=this.options.outgoingStore||new m.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=R:R(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(S=>{this.outgoing[S].volatile&&typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(S=>{typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_removeTopicAliasAndRecoverTopicName(S){let R;S.properties&&(R=S.properties.topicAlias);let N=S.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",R,N),N.length===0){if(typeof R>"u")return new Error("Unregistered Topic Alias");if(N=this.topicAliasSend.getTopicByAlias(R),typeof N>"u")return new Error("Unregistered Topic Alias");S.topic=N}R&&delete S.properties.topicAlias}_checkDisconnecting(S){return this.disconnecting&&(S&&S!==this.noop?S(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(S,R,N={}){if(R&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",R)),this.log("_cleanUp :: forced? %s",S),S)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let q=Object.assign({cmd:"disconnect"},N);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(q,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),v(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),R&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",R),R())}_storeAndSend(S,R,N){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",S.cmd);let q=S,G;if(q.cmd==="publish"&&(q=(0,c.default)(S),G=this._removeTopicAliasAndRecoverTopicName(q),G))return R&&R(G);this.outgoingStore.put(q,Q=>{if(Q)return R&&R(Q);N(),this._writePacket(S,R)})}_applyTopicAlias(S){if(this.options.protocolVersion===5&&S.cmd==="publish"){let R;S.properties&&(R=S.properties.topicAlias);let N=S.topic.toString();if(this.topicAliasSend)if(R){if(N.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",N,R),!this.topicAliasSend.put(N,R)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",N,R),new Error("Sending Topic Alias out of range")}else N.length!==0&&(this.options.autoAssignTopicAlias?(R=this.topicAliasSend.getAliasByTopic(N),R?(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:R}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",N,R)):(R=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(N,R),S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:R}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",N,R))):this.options.autoUseTopicAlias&&(R=this.topicAliasSend.getAliasByTopic(N),R&&(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:R}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",N,R))));else if(R)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",N,R),new Error("Sending Topic Alias out of range")}}_noop(S){this.log("noop ::",S)}_writePacket(S,R){this.log("_writePacket :: packet: %O",S),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",S),this.log("_writePacket :: writing to stream");let N=i.default.writeToStream(S,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",N),!N&&R&&R!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",R)):R&&(this.log("_writePacket :: invoking cb"),R())}_sendPacket(S,R,N,q){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),N=N||this.noop,R=R||this.noop;let G=this._applyTopicAlias(S);if(G){R(G);return}if(!this.connected){if(S.cmd==="auth"){this._writePacket(S,R);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(S,R,N);return}if(q){this._writePacket(S,R);return}switch(S.cmd){case"publish":break;case"pubrel":this._storeAndSend(S,R,N);return;default:this._writePacket(S,R);return}switch(S.qos){case 2:case 1:this._storeAndSend(S,R,N);break;case 0:default:this._writePacket(S,R);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(S,R,N){this.log("_storePacket :: packet: %o",S),this.log("_storePacket :: cb? %s",!!R),N=N||this.noop;let q=S;if(q.cmd==="publish"){q=(0,c.default)(S);let Q=this._removeTopicAliasAndRecoverTopicName(q);if(Q)return R&&R(Q)}let G=q.qos||0;G===0&&this.queueQoSZero||q.cmd!=="publish"?this.queue.push({packet:q,cb:R}):G>0?(R=this.outgoing[q.messageId]?this.outgoing[q.messageId].cb:null,this.outgoingStore.put(q,Q=>{if(Q)return R&&R(Q);N()})):R&&R(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new T.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(S=!1){this.keepaliveManager&&this.options.keepalive&&(S||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let S=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&S.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let R=0;R<S.length;R++){let N={};N[S[R]]=this._resubscribeTopics[S[R]],N.resubscribe=!0,this.subscribe(N,{properties:N[S[R]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(S){if(this.disconnected){this.emit("connect",S);return}this.connackPacket=S,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let R=()=>{let N=this.outgoingStore.createStream(),q=()=>{N.destroy(),N=null,this._flushStoreProcessingQueue(),G()},G=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",q),N.on("error",C=>{G(),this._flushStoreProcessingQueue(),this.removeListener("close",q),this.emit("error",C)});let Q=()=>{if(!N)return;let C=N.read(1),W;if(!C){N.once("readable",Q);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[C.messageId]){Q();return}!this.disconnecting&&!this.reconnectTimer?(W=this.outgoing[C.messageId]?this.outgoing[C.messageId].cb:null,this.outgoing[C.messageId]={volatile:!1,cb(Y,V){W&&W(Y,V),Q()}},this._packetIdsDuringStoreProcessing[C.messageId]=!0,this.messageIdProvider.register(C.messageId)?this._sendPacket(C,void 0,void 0,!0):this.log("messageId: %d has already used.",C.messageId)):N.destroy&&N.destroy()};N.on("end",()=>{let C=!0;for(let W in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[W]){C=!1;break}this.removeListener("close",q),C?(G(),this._invokeAllStoreProcessingQueue(),this.emit("connect",S)):R()}),Q()};R()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let S=this._storeProcessingQueue[0];if(S&&S.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let S of this._storeProcessingQueue)S.cbStorePut&&S.cbStorePut(new Error("Connection closed")),S.callback&&S.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(S,R){delete this.outgoing[S],this.outgoingStore.del({messageId:S},(N,q)=>{R(N,q),this.messageIdProvider.deallocate(S),this._invokeStoreProcessingQueue()})}};A.VERSION=y.MQTTJS_VERSION,e.default=A}),_u=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0});var n=Ea(),t=class{constructor(){this.numberAllocator=new n.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(o){return this.numberAllocator.use(o)}deallocate(o){this.numberAllocator.free(o)}clear(){this.numberAllocator.clear()}};e.default=t});function Bt(e){throw new RangeError(Ra[e])}function es(e,n){let t=e.split("@"),o="";t.length>1&&(o=t[0]+"@",e=t[1]);let l=function(r,i){let s=[],a=r.length;for(;a--;)s[a]=i(r[a]);return s}((e=e.replace(Aa,".")).split("."),n).join(".");return o+l}function ts(e){let n=[],t=0,o=e.length;for(;t<o;){let l=e.charCodeAt(t++);if(l>=55296&&l<=56319&&t<o){let r=e.charCodeAt(t++);(64512&r)==56320?n.push(((1023&l)<<10)+(1023&r)+65536):(n.push(l),t--)}else n.push(l)}return n}var ns,rs,Aa,Ra,Qe,In,Cr,Pr,Or,Mr,Rt,ku=je(()=>{re(),oe(),ie(),ns=/^xn--/,rs=/[^\0-\x7E]/,Aa=/[\x2E\u3002\uFF0E\uFF61]/g,Ra={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Qe=Math.floor,In=String.fromCharCode,Cr=function(e,n){return e+22+75*(e<26)-((n!=0)<<5)},Pr=function(e,n,t){let o=0;for(e=t?Qe(e/700):e>>1,e+=Qe(e/n);e>455;o+=36)e=Qe(e/35);return Qe(o+36*e/(e+38))},Or=function(e){let n=[],t=e.length,o=0,l=128,r=72,i=e.lastIndexOf("-");i<0&&(i=0);for(let a=0;a<i;++a)e.charCodeAt(a)>=128&&Bt("not-basic"),n.push(e.charCodeAt(a));for(let a=i>0?i+1:0;a<t;){let c=o;for(let d=1,m=36;;m+=36){a>=t&&Bt("invalid-input");let b=(s=e.charCodeAt(a++))-48<10?s-22:s-65<26?s-65:s-97<26?s-97:36;(b>=36||b>Qe((2147483647-o)/d))&&Bt("overflow"),o+=b*d;let y=m<=r?1:m>=r+26?26:m-r;if(b<y)break;let g=36-y;d>Qe(2147483647/g)&&Bt("overflow"),d*=g}let u=n.length+1;r=Pr(o-c,u,c==0),Qe(o/u)>2147483647-l&&Bt("overflow"),l+=Qe(o/u),o%=u,n.splice(o++,0,l)}var s;return String.fromCodePoint(...n)},Mr=function(e){let n=[],t=(e=ts(e)).length,o=128,l=0,r=72;for(let a of e)a<128&&n.push(In(a));let i=n.length,s=i;for(i&&n.push("-");s<t;){let a=2147483647;for(let u of e)u>=o&&u<a&&(a=u);let c=s+1;a-o>Qe((2147483647-l)/c)&&Bt("overflow"),l+=(a-o)*c,o=a;for(let u of e)if(u<o&&++l>2147483647&&Bt("overflow"),u==o){let d=l;for(let m=36;;m+=36){let b=m<=r?1:m>=r+26?26:m-r;if(d<b)break;let y=d-b,g=36-b;n.push(In(Cr(b+y%g,0))),d=Qe(y/g)}n.push(In(Cr(d,0))),r=Pr(l,c,s==i),l=0,++s}++l,++o}return n.join("")},Rt={version:"2.1.0",ucs2:{decode:ts,encode:e=>String.fromCodePoint(...e)},decode:Or,encode:Mr,toASCII:function(e){return es(e,function(n){return rs.test(n)?"xn--"+Mr(n):n})},toUnicode:function(e){return es(e,function(n){return ns.test(n)?Or(n.slice(4).toLowerCase()):n})}},Rt.decode,Rt.encode,Rt.toASCII,Rt.toUnicode,Rt.ucs2,Rt.version});function vu(e,n){return Object.prototype.hasOwnProperty.call(e,n)}var is,Xt,os,it,wu=je(()=>{re(),oe(),ie(),is=function(e,n,t,o){n=n||"&",t=t||"=";var l={};if(typeof e!="string"||e.length===0)return l;var r=/\+/g;e=e.split(n);var i=1e3;o&&typeof o.maxKeys=="number"&&(i=o.maxKeys);var s=e.length;i>0&&s>i&&(s=i);for(var a=0;a<s;++a){var c,u,d,m,b=e[a].replace(r,"%20"),y=b.indexOf(t);y>=0?(c=b.substr(0,y),u=b.substr(y+1)):(c=b,u=""),d=decodeURIComponent(c),m=decodeURIComponent(u),vu(l,d)?Array.isArray(l[d])?l[d].push(m):l[d]=[l[d],m]:l[d]=m}return l},Xt=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},os=function(e,n,t,o){return n=n||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(l){var r=encodeURIComponent(Xt(l))+t;return Array.isArray(e[l])?e[l].map(function(i){return r+encodeURIComponent(Xt(i))}).join(n):r+encodeURIComponent(Xt(e[l]))}).join(n):o?encodeURIComponent(Xt(o))+t+encodeURIComponent(Xt(e)):""},it={},it.decode=it.parse=is,it.encode=it.stringify=os,it.decode,it.encode,it.parse,it.stringify});function Ji(){throw new Error("setTimeout has not been defined")}function zi(){throw new Error("clearTimeout has not been defined")}function Ca(e){if(ft===setTimeout)return setTimeout(e,0);if((ft===Ji||!ft)&&setTimeout)return ft=setTimeout,setTimeout(e,0);try{return ft(e,0)}catch{try{return ft.call(null,e,0)}catch{return ft.call(this||$t,e,0)}}}function Su(){Ht&&qt&&(Ht=!1,qt.length?st=qt.concat(st):bn=-1,st.length&&Pa())}function Pa(){if(!Ht){var e=Ca(Su);Ht=!0;for(var n=st.length;n;){for(qt=st,st=[];++bn<n;)qt&&qt[bn].run();bn=-1,n=st.length}qt=null,Ht=!1,function(t){if(pt===clearTimeout)return clearTimeout(t);if((pt===zi||!pt)&&clearTimeout)return pt=clearTimeout,clearTimeout(t);try{pt(t)}catch{try{return pt.call(null,t)}catch{return pt.call(this||$t,t)}}}(e)}}function ss(e,n){(this||$t).fun=e,(this||$t).array=n}function ut(){}var as,ft,pt,$t,Le,qt,st,Ht,bn,Ue,Eu=je(()=>{re(),oe(),ie(),$t=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Le=as={},function(){try{ft=typeof setTimeout=="function"?setTimeout:Ji}catch{ft=Ji}try{pt=typeof clearTimeout=="function"?clearTimeout:zi}catch{pt=zi}}(),st=[],Ht=!1,bn=-1,Le.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];st.push(new ss(e,n)),st.length!==1||Ht||Ca(Pa)},ss.prototype.run=function(){(this||$t).fun.apply(null,(this||$t).array)},Le.title="browser",Le.browser=!0,Le.env={},Le.argv=[],Le.version="",Le.versions={},Le.on=ut,Le.addListener=ut,Le.once=ut,Le.off=ut,Le.removeListener=ut,Le.removeAllListeners=ut,Le.emit=ut,Le.prependListener=ut,Le.prependOnceListener=ut,Le.listeners=function(e){return[]},Le.binding=function(e){throw new Error("process.binding is not supported")},Le.cwd=function(){return"/"},Le.chdir=function(e){throw new Error("process.chdir is not supported")},Le.umask=function(){return 0},Ue=as,Ue.addListener,Ue.argv,Ue.binding,Ue.browser,Ue.chdir,Ue.cwd,Ue.emit,Ue.env,Ue.listeners,Ue.nextTick,Ue.off,Ue.on,Ue.once,Ue.prependListener,Ue.prependOnceListener,Ue.removeAllListeners,Ue.removeListener,Ue.title,Ue.umask,Ue.version,Ue.versions});function Iu(){if(Yi)return Un;Yi=!0;var e=Un={},n,t;function o(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=o}catch{n=o}try{typeof clearTimeout=="function"?t=clearTimeout:t=l}catch{t=l}})();function r(g){if(n===setTimeout)return setTimeout(g,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(g,0);try{return n(g,0)}catch{try{return n.call(null,g,0)}catch{return n.call(this||Ft,g,0)}}}function i(g){if(t===clearTimeout)return clearTimeout(g);if((t===l||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(g);try{return t(g)}catch{try{return t.call(null,g)}catch{return t.call(this||Ft,g)}}}var s=[],a=!1,c,u=-1;function d(){!a||!c||(a=!1,c.length?s=c.concat(s):u=-1,s.length&&m())}function m(){if(!a){var g=r(d);a=!0;for(var T=s.length;T;){for(c=s,s=[];++u<T;)c&&c[u].run();u=-1,T=s.length}c=null,a=!1,i(g)}}e.nextTick=function(g){var T=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)T[k-1]=arguments[k];s.push(new b(g,T)),s.length===1&&!a&&r(m)};function b(g,T){(this||Ft).fun=g,(this||Ft).array=T}b.prototype.run=function(){(this||Ft).fun.apply(null,(this||Ft).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function y(){}return e.on=y,e.addListener=y,e.once=y,e.off=y,e.removeListener=y,e.removeAllListeners=y,e.emit=y,e.prependListener=y,e.prependOnceListener=y,e.listeners=function(g){return[]},e.binding=function(g){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(g){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Un}var Un,Yi,Ft,Oe,Oa=je(()=>{re(),oe(),ie(),Un={},Yi=!1,Ft=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Oe=Iu(),Oe.platform="browser",Oe.addListener,Oe.argv,Oe.binding,Oe.browser,Oe.chdir,Oe.cwd,Oe.emit,Oe.env,Oe.listeners,Oe.nextTick,Oe.off,Oe.on,Oe.once,Oe.prependListener,Oe.prependOnceListener,Oe.removeAllListeners,Oe.removeListener,Oe.title,Oe.umask,Oe.version,Oe.versions});function Au(){if(Qi)return Ln;Qi=!0;var e=Oe;function n(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function t(r,i){for(var s="",a=0,c=-1,u=0,d,m=0;m<=r.length;++m){if(m<r.length)d=r.charCodeAt(m);else{if(d===47)break;d=47}if(d===47){if(!(c===m-1||u===1))if(c!==m-1&&u===2){if(s.length<2||a!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var b=s.lastIndexOf("/");if(b!==s.length-1){b===-1?(s="",a=0):(s=s.slice(0,b),a=s.length-1-s.lastIndexOf("/")),c=m,u=0;continue}}else if(s.length===2||s.length===1){s="",a=0,c=m,u=0;continue}}i&&(s.length>0?s+="/..":s="..",a=2)}else s.length>0?s+="/"+r.slice(c+1,m):s=r.slice(c+1,m),a=m-c-1;c=m,u=0}else d===46&&u!==-1?++u:u=-1}return s}function o(r,i){var s=i.dir||i.root,a=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+a:s+r+a:a}var l={resolve:function(){for(var r="",i=!1,s,a=arguments.length-1;a>=-1&&!i;a--){var c;a>=0?c=arguments[a]:(s===void 0&&(s=e.cwd()),c=s),n(c),c.length!==0&&(r=c+"/"+r,i=c.charCodeAt(0)===47)}return r=t(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(r){if(n(r),r.length===0)return".";var i=r.charCodeAt(0)===47,s=r.charCodeAt(r.length-1)===47;return r=t(r,!i),r.length===0&&!i&&(r="."),r.length>0&&s&&(r+="/"),i?"/"+r:r},isAbsolute:function(r){return n(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,i=0;i<arguments.length;++i){var s=arguments[i];n(s),s.length>0&&(r===void 0?r=s:r+="/"+s)}return r===void 0?".":l.normalize(r)},relative:function(r,i){if(n(r),n(i),r===i||(r=l.resolve(r),i=l.resolve(i),r===i))return"";for(var s=1;s<r.length&&r.charCodeAt(s)===47;++s);for(var a=r.length,c=a-s,u=1;u<i.length&&i.charCodeAt(u)===47;++u);for(var d=i.length,m=d-u,b=c<m?c:m,y=-1,g=0;g<=b;++g){if(g===b){if(m>b){if(i.charCodeAt(u+g)===47)return i.slice(u+g+1);if(g===0)return i.slice(u+g)}else c>b&&(r.charCodeAt(s+g)===47?y=g:g===0&&(y=0));break}var T=r.charCodeAt(s+g),k=i.charCodeAt(u+g);if(T!==k)break;T===47&&(y=g)}var v="";for(g=s+y+1;g<=a;++g)(g===a||r.charCodeAt(g)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+i.slice(u+y):(u+=y,i.charCodeAt(u)===47&&++u,i.slice(u))},_makeLong:function(r){return r},dirname:function(r){if(n(r),r.length===0)return".";for(var i=r.charCodeAt(0),s=i===47,a=-1,c=!0,u=r.length-1;u>=1;--u)if(i=r.charCodeAt(u),i===47){if(!c){a=u;break}}else c=!1;return a===-1?s?"/":".":s&&a===1?"//":r.slice(0,a)},basename:function(r,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');n(r);var s=0,a=-1,c=!0,u;if(i!==void 0&&i.length>0&&i.length<=r.length){if(i.length===r.length&&i===r)return"";var d=i.length-1,m=-1;for(u=r.length-1;u>=0;--u){var b=r.charCodeAt(u);if(b===47){if(!c){s=u+1;break}}else m===-1&&(c=!1,m=u+1),d>=0&&(b===i.charCodeAt(d)?--d===-1&&(a=u):(d=-1,a=m))}return s===a?a=m:a===-1&&(a=r.length),r.slice(s,a)}else{for(u=r.length-1;u>=0;--u)if(r.charCodeAt(u)===47){if(!c){s=u+1;break}}else a===-1&&(c=!1,a=u+1);return a===-1?"":r.slice(s,a)}},extname:function(r){n(r);for(var i=-1,s=0,a=-1,c=!0,u=0,d=r.length-1;d>=0;--d){var m=r.charCodeAt(d);if(m===47){if(!c){s=d+1;break}continue}a===-1&&(c=!1,a=d+1),m===46?i===-1?i=d:u!==1&&(u=1):i!==-1&&(u=-1)}return i===-1||a===-1||u===0||u===1&&i===a-1&&i===s+1?"":r.slice(i,a)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return o("/",r)},parse:function(r){n(r);var i={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return i;var s=r.charCodeAt(0),a=s===47,c;a?(i.root="/",c=1):c=0;for(var u=-1,d=0,m=-1,b=!0,y=r.length-1,g=0;y>=c;--y){if(s=r.charCodeAt(y),s===47){if(!b){d=y+1;break}continue}m===-1&&(b=!1,m=y+1),s===46?u===-1?u=y:g!==1&&(g=1):u!==-1&&(g=-1)}return u===-1||m===-1||g===0||g===1&&u===m-1&&u===d+1?m!==-1&&(d===0&&a?i.base=i.name=r.slice(1,m):i.base=i.name=r.slice(d,m)):(d===0&&a?(i.name=r.slice(1,u),i.base=r.slice(1,m)):(i.name=r.slice(d,u),i.base=r.slice(d,m)),i.ext=r.slice(u,m)),d>0?i.dir=r.slice(0,d-1):a&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return l.posix=l,Ln=l,Ln}var Ln,Qi,Xi,Ru=je(()=>{re(),oe(),ie(),Oa(),Ln={},Qi=!1,Xi=Au()}),Ma={};Gt(Ma,{URL:()=>Ya,Url:()=>Ha,default:()=>Ee,fileURLToPath:()=>Na,format:()=>Ga,parse:()=>za,pathToFileURL:()=>Ua,resolve:()=>Ka,resolveObject:()=>Ja});function ze(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function dn(e,n,t){if(e&&Ze.isObject(e)&&e instanceof ze)return e;var o=new ze;return o.parse(e,n,t),o}function Cu(){if(Zi)return xn;Zi=!0;var e=Ue;function n(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function t(r,i){for(var s="",a=0,c=-1,u=0,d,m=0;m<=r.length;++m){if(m<r.length)d=r.charCodeAt(m);else{if(d===47)break;d=47}if(d===47){if(!(c===m-1||u===1))if(c!==m-1&&u===2){if(s.length<2||a!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var b=s.lastIndexOf("/");if(b!==s.length-1){b===-1?(s="",a=0):(s=s.slice(0,b),a=s.length-1-s.lastIndexOf("/")),c=m,u=0;continue}}else if(s.length===2||s.length===1){s="",a=0,c=m,u=0;continue}}i&&(s.length>0?s+="/..":s="..",a=2)}else s.length>0?s+="/"+r.slice(c+1,m):s=r.slice(c+1,m),a=m-c-1;c=m,u=0}else d===46&&u!==-1?++u:u=-1}return s}function o(r,i){var s=i.dir||i.root,a=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+a:s+r+a:a}var l={resolve:function(){for(var r="",i=!1,s,a=arguments.length-1;a>=-1&&!i;a--){var c;a>=0?c=arguments[a]:(s===void 0&&(s=e.cwd()),c=s),n(c),c.length!==0&&(r=c+"/"+r,i=c.charCodeAt(0)===47)}return r=t(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(r){if(n(r),r.length===0)return".";var i=r.charCodeAt(0)===47,s=r.charCodeAt(r.length-1)===47;return r=t(r,!i),r.length===0&&!i&&(r="."),r.length>0&&s&&(r+="/"),i?"/"+r:r},isAbsolute:function(r){return n(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,i=0;i<arguments.length;++i){var s=arguments[i];n(s),s.length>0&&(r===void 0?r=s:r+="/"+s)}return r===void 0?".":l.normalize(r)},relative:function(r,i){if(n(r),n(i),r===i||(r=l.resolve(r),i=l.resolve(i),r===i))return"";for(var s=1;s<r.length&&r.charCodeAt(s)===47;++s);for(var a=r.length,c=a-s,u=1;u<i.length&&i.charCodeAt(u)===47;++u);for(var d=i.length,m=d-u,b=c<m?c:m,y=-1,g=0;g<=b;++g){if(g===b){if(m>b){if(i.charCodeAt(u+g)===47)return i.slice(u+g+1);if(g===0)return i.slice(u+g)}else c>b&&(r.charCodeAt(s+g)===47?y=g:g===0&&(y=0));break}var T=r.charCodeAt(s+g),k=i.charCodeAt(u+g);if(T!==k)break;T===47&&(y=g)}var v="";for(g=s+y+1;g<=a;++g)(g===a||r.charCodeAt(g)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+i.slice(u+y):(u+=y,i.charCodeAt(u)===47&&++u,i.slice(u))},_makeLong:function(r){return r},dirname:function(r){if(n(r),r.length===0)return".";for(var i=r.charCodeAt(0),s=i===47,a=-1,c=!0,u=r.length-1;u>=1;--u)if(i=r.charCodeAt(u),i===47){if(!c){a=u;break}}else c=!1;return a===-1?s?"/":".":s&&a===1?"//":r.slice(0,a)},basename:function(r,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');n(r);var s=0,a=-1,c=!0,u;if(i!==void 0&&i.length>0&&i.length<=r.length){if(i.length===r.length&&i===r)return"";var d=i.length-1,m=-1;for(u=r.length-1;u>=0;--u){var b=r.charCodeAt(u);if(b===47){if(!c){s=u+1;break}}else m===-1&&(c=!1,m=u+1),d>=0&&(b===i.charCodeAt(d)?--d===-1&&(a=u):(d=-1,a=m))}return s===a?a=m:a===-1&&(a=r.length),r.slice(s,a)}else{for(u=r.length-1;u>=0;--u)if(r.charCodeAt(u)===47){if(!c){s=u+1;break}}else a===-1&&(c=!1,a=u+1);return a===-1?"":r.slice(s,a)}},extname:function(r){n(r);for(var i=-1,s=0,a=-1,c=!0,u=0,d=r.length-1;d>=0;--d){var m=r.charCodeAt(d);if(m===47){if(!c){s=d+1;break}continue}a===-1&&(c=!1,a=d+1),m===46?i===-1?i=d:u!==1&&(u=1):i!==-1&&(u=-1)}return i===-1||a===-1||u===0||u===1&&i===a-1&&i===s+1?"":r.slice(i,a)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return o("/",r)},parse:function(r){n(r);var i={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return i;var s=r.charCodeAt(0),a=s===47,c;a?(i.root="/",c=1):c=0;for(var u=-1,d=0,m=-1,b=!0,y=r.length-1,g=0;y>=c;--y){if(s=r.charCodeAt(y),s===47){if(!b){d=y+1;break}continue}m===-1&&(b=!1,m=y+1),s===46?u===-1?u=y:g!==1&&(g=1):u!==-1&&(g=-1)}return u===-1||m===-1||g===0||g===1&&u===m-1&&u===d+1?m!==-1&&(d===0&&a?i.base=i.name=r.slice(1,m):i.base=i.name=r.slice(d,m)):(d===0&&a?(i.name=r.slice(1,u),i.base=r.slice(1,m)):(i.name=r.slice(d,u),i.base=r.slice(d,m)),i.ext=r.slice(u,m)),d>0?i.dir=r.slice(0,d-1):a&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return l.posix=l,xn=l,xn}function Pu(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return jn?Ou(e):Mu(e)}function Ou(e){let n=e.hostname,t=e.pathname;for(let o=0;o<t.length;o++)if(t[o]==="%"){let l=t.codePointAt(o+2)||32;if(t[o+1]==="2"&&l===102||t[o+1]==="5"&&l===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(Fa,"\\"),t=decodeURIComponent(t),n!=="")return`\\\\${n}${t}`;{let o=t.codePointAt(1)|32,l=t[2];if(o<Ba||o>Da||l!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Mu(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let n=e.pathname;for(let t=0;t<n.length;t++)if(n[t]==="%"){let o=n.codePointAt(t+2)||32;if(n[t+1]==="2"&&o===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(n)}function Nu(e){let n=eo.resolve(e),t=e.charCodeAt(e.length-1);(t===xa||jn&&t===La)&&n[n.length-1]!==eo.sep&&(n+="/");let o=new URL("file://");return n.includes("%")&&(n=n.replace(ja,"%25")),!jn&&n.includes("\\")&&(n=n.replace(Wa,"%5C")),n.includes(`
`)&&(n=n.replace(qa,"%0A")),n.includes("\r")&&(n=n.replace(Va,"%0D")),n.includes("	")&&(n=n.replace($a,"%09")),o.pathname=n,o}function Na(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Wn?Uu(e):Lu(e)}function Uu(e){let n=e.hostname,t=e.pathname;for(let o=0;o<t.length;o++)if(t[o]==="%"){let l=t.codePointAt(o+2)||32;if(t[o+1]==="2"&&l===102||t[o+1]==="5"&&l===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(tl,"\\"),t=decodeURIComponent(t),n!=="")return`\\\\${n}${t}`;{let o=t.codePointAt(1)|32,l=t[2];if(o<Za||o>el||l!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Lu(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let n=e.pathname;for(let t=0;t<n.length;t++)if(n[t]==="%"){let o=n.codePointAt(t+2)||32;if(n[t+1]==="2"&&o===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(n)}function Ua(e){let n=Xi.resolve(e),t=e.charCodeAt(e.length-1);(t===Xa||Wn&&t===Qa)&&n[n.length-1]!==Xi.sep&&(n+="/");let o=new URL("file://");return n.includes("%")&&(n=n.replace(nl,"%25")),!Wn&&n.includes("\\")&&(n=n.replace(rl,"%5C")),n.includes(`
`)&&(n=n.replace(il,"%0A")),n.includes("\r")&&(n=n.replace(ol,"%0D")),n.includes("	")&&(n=n.replace(sl,"%09")),o.pathname=n,o}var Ee,ls,Ze,cs,us,hs,ds,An,Nr,Ur,Lr,fs,ps,Rn,Dt,Cn,xn,Zi,eo,ms,La,xa,Ba,Da,jn,Fa,ja,Wa,qa,Va,$a,gs,Ha,Ga,Ka,Ja,za,Ya,Qa,Xa,Za,el,Wn,tl,nl,rl,il,ol,sl,xu=je(()=>{re(),oe(),ie(),ku(),wu(),Eu(),Ru(),Oa(),Ee={},ls=Rt,Ze={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Ee.parse=dn,Ee.resolve=function(e,n){return dn(e,!1,!0).resolve(n)},Ee.resolveObject=function(e,n){return e?dn(e,!1,!0).resolveObject(n):n},Ee.format=function(e){return Ze.isString(e)&&(e=dn(e)),e instanceof ze?e.format():ze.prototype.format.call(e)},Ee.Url=ze,cs=/^([a-z0-9.+-]+:)/i,us=/:[0-9]*$/,hs=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ds=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),An=["'"].concat(ds),Nr=["%","/","?",";","#"].concat(An),Ur=["/","?","#"],Lr=/^[+a-z0-9A-Z_-]{0,63}$/,fs=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ps={javascript:!0,"javascript:":!0},Rn={javascript:!0,"javascript:":!0},Dt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Cn=it,ze.prototype.parse=function(e,n,t){if(!Ze.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),l=o!==-1&&o<e.indexOf("#")?"?":"#",r=e.split(l);r[0]=r[0].replace(/\\/g,"/");var i=e=r.join(l);if(i=i.trim(),!t&&e.split("#").length===1){var s=hs.exec(i);if(s)return this.path=i,this.href=i,this.pathname=s[1],s[2]?(this.search=s[2],this.query=n?Cn.parse(this.search.substr(1)):this.search.substr(1)):n&&(this.search="",this.query={}),this}var a=cs.exec(i);if(a){var c=(a=a[0]).toLowerCase();this.protocol=c,i=i.substr(a.length)}if(t||a||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var u=i.substr(0,2)==="//";!u||a&&Rn[a]||(i=i.substr(2),this.slashes=!0)}if(!Rn[a]&&(u||a&&!Dt[a])){for(var d,m,b=-1,y=0;y<Ur.length;y++)(g=i.indexOf(Ur[y]))!==-1&&(b===-1||g<b)&&(b=g);for((m=b===-1?i.lastIndexOf("@"):i.lastIndexOf("@",b))!==-1&&(d=i.slice(0,m),i=i.slice(m+1),this.auth=decodeURIComponent(d)),b=-1,y=0;y<Nr.length;y++){var g;(g=i.indexOf(Nr[y]))!==-1&&(b===-1||g<b)&&(b=g)}b===-1&&(b=i.length),this.host=i.slice(0,b),i=i.slice(b),this.parseHost(),this.hostname=this.hostname||"";var T=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!T)for(var k=this.hostname.split(/\./),v=(y=0,k.length);y<v;y++){var _=k[y];if(_&&!_.match(Lr)){for(var A="",L=0,S=_.length;L<S;L++)_.charCodeAt(L)>127?A+="x":A+=_[L];if(!A.match(Lr)){var R=k.slice(0,y),N=k.slice(y+1),q=_.match(fs);q&&(R.push(q[1]),N.unshift(q[2])),N.length&&(i="/"+N.join(".")+i),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=ls.toASCII(this.hostname));var G=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+G,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),i[0]!=="/"&&(i="/"+i))}if(!ps[c])for(y=0,v=An.length;y<v;y++){var C=An[y];if(i.indexOf(C)!==-1){var W=encodeURIComponent(C);W===C&&(W=escape(C)),i=i.split(C).join(W)}}var Y=i.indexOf("#");Y!==-1&&(this.hash=i.substr(Y),i=i.slice(0,Y));var V=i.indexOf("?");if(V!==-1?(this.search=i.substr(V),this.query=i.substr(V+1),n&&(this.query=Cn.parse(this.query)),i=i.slice(0,V)):n&&(this.search="",this.query={}),i&&(this.pathname=i),Dt[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var ae=this.search||"";this.path=G+ae}return this.href=this.format(),this},ze.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var n=this.protocol||"",t=this.pathname||"",o=this.hash||"",l=!1,r="";this.host?l=e+this.host:this.hostname&&(l=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(l+=":"+this.port)),this.query&&Ze.isObject(this.query)&&Object.keys(this.query).length&&(r=Cn.stringify(this.query));var i=this.search||r&&"?"+r||"";return n&&n.substr(-1)!==":"&&(n+=":"),this.slashes||(!n||Dt[n])&&l!==!1?(l="//"+(l||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):l||(l=""),o&&o.charAt(0)!=="#"&&(o="#"+o),i&&i.charAt(0)!=="?"&&(i="?"+i),n+l+(t=t.replace(/[?#]/g,function(s){return encodeURIComponent(s)}))+(i=i.replace("#","%23"))+o},ze.prototype.resolve=function(e){return this.resolveObject(dn(e,!1,!0)).format()},ze.prototype.resolveObject=function(e){if(Ze.isString(e)){var n=new ze;n.parse(e,!1,!0),e=n}for(var t=new ze,o=Object.keys(this),l=0;l<o.length;l++){var r=o[l];t[r]=this[r]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var i=Object.keys(e),s=0;s<i.length;s++){var a=i[s];a!=="protocol"&&(t[a]=e[a])}return Dt[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!Dt[e.protocol]){for(var c=Object.keys(e),u=0;u<c.length;u++){var d=c[u];t[d]=e[d]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||Rn[e.protocol])t.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),m[0]!==""&&m.unshift(""),m.length<2&&m.unshift(""),t.pathname=m.join("/")}if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var b=t.pathname||"",y=t.search||"";t.path=b+y}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var g=t.pathname&&t.pathname.charAt(0)==="/",T=e.host||e.pathname&&e.pathname.charAt(0)==="/",k=T||g||t.host&&e.pathname,v=k,_=t.pathname&&t.pathname.split("/")||[],A=(m=e.pathname&&e.pathname.split("/")||[],t.protocol&&!Dt[t.protocol]);if(A&&(t.hostname="",t.port=null,t.host&&(_[0]===""?_[0]=t.host:_.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(m[0]===""?m[0]=e.host:m.unshift(e.host)),e.host=null),k=k&&(m[0]===""||_[0]==="")),T)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,_=m;else if(m.length)_||(_=[]),_.pop(),_=_.concat(m),t.search=e.search,t.query=e.query;else if(!Ze.isNullOrUndefined(e.search))return A&&(t.hostname=t.host=_.shift(),(q=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=q.shift(),t.host=t.hostname=q.shift())),t.search=e.search,t.query=e.query,Ze.isNull(t.pathname)&&Ze.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!_.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var L=_.slice(-1)[0],S=(t.host||e.host||_.length>1)&&(L==="."||L==="..")||L==="",R=0,N=_.length;N>=0;N--)(L=_[N])==="."?_.splice(N,1):L===".."?(_.splice(N,1),R++):R&&(_.splice(N,1),R--);if(!k&&!v)for(;R--;R)_.unshift("..");!k||_[0]===""||_[0]&&_[0].charAt(0)==="/"||_.unshift(""),S&&_.join("/").substr(-1)!=="/"&&_.push("");var q,G=_[0]===""||_[0]&&_[0].charAt(0)==="/";return A&&(t.hostname=t.host=G?"":_.length?_.shift():"",(q=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=q.shift(),t.host=t.hostname=q.shift())),(k=k||t.host&&_.length)&&!G&&_.unshift(""),_.length?t.pathname=_.join("/"):(t.pathname=null,t.path=null),Ze.isNull(t.pathname)&&Ze.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},ze.prototype.parseHost=function(){var e=this.host,n=us.exec(e);n&&((n=n[0])!==":"&&(this.port=n.substr(1)),e=e.substr(0,e.length-n.length)),e&&(this.hostname=e)},Ee.Url,Ee.format,Ee.resolve,Ee.resolveObject,xn={},Zi=!1,eo=Cu(),ms=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ee.URL=typeof URL<"u"?URL:null,Ee.pathToFileURL=Nu,Ee.fileURLToPath=Pu,Ee.Url,Ee.format,Ee.resolve,Ee.resolveObject,Ee.URL,La=92,xa=47,Ba=97,Da=122,jn=ms==="win32",Fa=/\//g,ja=/%/g,Wa=/\\/g,qa=/\n/g,Va=/\r/g,$a=/\t/g,gs=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ee.URL=typeof URL<"u"?URL:null,Ee.pathToFileURL=Ua,Ee.fileURLToPath=Na,Ha=Ee.Url,Ga=Ee.format,Ka=Ee.resolve,Ja=Ee.resolveObject,za=Ee.parse,Ya=Ee.URL,Qa=92,Xa=47,Za=97,el=122,Wn=gs==="win32",tl=/\//g,nl=/%/g,rl=/\\/g,il=/\n/g,ol=/\r/g,sl=/\t/g}),Bu=de((e,n)=>{"use strict";re(),oe(),ie(),n.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),ho=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var n=zt(),t=(qe(),Ce(We));function o(r,i){let s=new Array(r.length);for(let a=0;a<r.length;a++)typeof r[a].chunk=="string"?s[a]=t.Buffer.from(r[a].chunk,"utf8"):s[a]=r[a].chunk;this._write(t.Buffer.concat(s),"binary",i)}e.writev=o;var l=class extends n.Duplex{constructor(r,i,s){super({objectMode:!0}),this.proxy=i,this.socket=s,this.writeQueue=[],r.objectMode||(this._writev=o.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",a=>{this.destroyed||this.push(a)})}_read(r){this.proxy.read(r)}_write(r,i,s){this.isSocketOpen?this.writeToProxy(r,i,s):this.writeQueue.push({chunk:r,encoding:i,cb:s})}_final(r){this.writeQueue=[],this.proxy.end(r)}_destroy(r,i){this.writeQueue=[],this.proxy.destroy(),i(r)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(r,i,s){this.proxy.write(r,i)===!1?this.proxy.once("drain",s):s()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:r,encoding:i,cb:s}=this.writeQueue.shift();this.writeToProxy(r,i,s)}}};e.BufferedDuplex=l}),Pn=de(e=>{"use strict";re(),oe(),ie();var n=e&&e.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;var t=(qe(),Ce(We)),o=n(Bu()),l=n(_t()),r=zt(),i=n(Kn()),s=ho(),a=(0,l.default)("mqttjs:ws"),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function u(k,v){let _=`${k.protocol}://${k.hostname}:${k.port}${k.path}`;return typeof k.transformWsUrl=="function"&&(_=k.transformWsUrl(_,k,v)),_}function d(k){let v=k;return k.port||(k.protocol==="wss"?v.port=443:v.port=80),k.path||(v.path="/"),k.wsOptions||(v.wsOptions={}),!i.default&&!k.forceNativeWebSocket&&k.protocol==="wss"&&c.forEach(_=>{Object.prototype.hasOwnProperty.call(k,_)&&!Object.prototype.hasOwnProperty.call(k.wsOptions,_)&&(v.wsOptions[_]=k[_])}),v}function m(k){let v=d(k);if(v.hostname||(v.hostname=v.host),!v.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let _=new URL(document.URL);v.hostname=_.hostname,v.port||(v.port=Number(_.port))}return v.objectMode===void 0&&(v.objectMode=!(v.binary===!0||v.binary===void 0)),v}function b(k,v,_){a("createWebSocket"),a(`protocol: ${_.protocolId} ${_.protocolVersion}`);let A=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";a(`creating new Websocket for url: ${v} and protocol: ${A}`);let L;return _.createWebsocket?L=_.createWebsocket(v,[A],_):L=new o.default(v,[A],_.wsOptions),L}function y(k,v){let _=v.protocolId==="MQIsdp"&&v.protocolVersion===3?"mqttv3.1":"mqtt",A=u(v,k),L;return v.createWebsocket?L=v.createWebsocket(A,[_],v):L=new WebSocket(A,[_]),L.binaryType="arraybuffer",L}var g=(k,v)=>{a("streamBuilder");let _=d(v);_.hostname=_.hostname||_.host||"localhost";let A=u(_,k),L=b(k,A,_),S=o.default.createWebSocketStream(L,_.wsOptions);return S.url=A,L.on("close",()=>{S.destroy()}),S};e.streamBuilder=g;var T=(k,v)=>{a("browserStreamBuilder");let _,A=m(v).browserBufferSize||1024*512,L=v.browserBufferTimeout||1e3,S=!v.objectMode,R=y(k,v),N=G(v,V,ae);v.objectMode||(N._writev=s.writev.bind(N)),N.on("close",()=>{R.close()});let q=typeof R.addEventListener<"u";R.readyState===R.OPEN?(_=N,_.socket=R):(_=new s.BufferedDuplex(v,N,R),q?R.addEventListener("open",Q):R.onopen=Q),q?(R.addEventListener("close",C),R.addEventListener("error",W),R.addEventListener("message",Y)):(R.onclose=C,R.onerror=W,R.onmessage=Y);function G(ne,j,fe){let ee=new r.Transform({objectMode:ne.objectMode});return ee._write=j,ee._flush=fe,ee}function Q(){a("WebSocket onOpen"),_ instanceof s.BufferedDuplex&&_.socketReady()}function C(ne){a("WebSocket onClose",ne),_.end(),_.destroy()}function W(ne){a("WebSocket onError",ne);let j=new Error("WebSocket error");j.event=ne,_.destroy(j)}async function Y(ne){let{data:j}=ne;j instanceof ArrayBuffer?j=t.Buffer.from(j):j instanceof Blob?j=t.Buffer.from(await new Response(j).arrayBuffer()):j=t.Buffer.from(j,"utf8"),N&&!N.destroyed&&N.push(j)}function V(ne,j,fe){if(R.bufferedAmount>A){setTimeout(V,L,ne,j,fe);return}S&&typeof ne=="string"&&(ne=t.Buffer.from(ne,"utf8"));try{R.send(ne)}catch(ee){return fe(ee)}fe()}function ae(ne){R.close(),ne()}return _};e.browserStreamBuilder=T}),fo={};Gt(fo,{Server:()=>Me,Socket:()=>Me,Stream:()=>Me,_createServerHandle:()=>Me,_normalizeArgs:()=>Me,_setSimultaneousAccepts:()=>Me,connect:()=>Me,createConnection:()=>Me,createServer:()=>Me,default:()=>al,isIP:()=>Me,isIPv4:()=>Me,isIPv6:()=>Me});function Me(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var al,ll=je(()=>{re(),oe(),ie(),al={_createServerHandle:Me,_normalizeArgs:Me,_setSimultaneousAccepts:Me,connect:Me,createConnection:Me,createServer:Me,isIP:Me,isIPv4:Me,isIPv6:Me,Server:Me,Socket:Me,Stream:Me}}),bs=de(e=>{"use strict";re(),oe(),ie();var n=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=n((ll(),Ce(fo))),o=n(_t()),l=(0,o.default)("mqttjs:tcp"),r=(i,s)=>{s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";let{port:a,path:c}=s,u=s.hostname;return l("port %d and host %s",a,u),t.default.createConnection({port:a,host:u,path:c})};e.default=r}),cl={};Gt(cl,{default:()=>ul});var ul,Du=je(()=>{re(),oe(),ie(),ul={}}),ys=de(e=>{"use strict";re(),oe(),ie();var n=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var t=n((Du(),Ce(cl))),o=n((ll(),Ce(fo))),l=n(_t()),r=(0,l.default)("mqttjs:tls"),i=(s,a)=>{a.port=a.port||8883,a.host=a.hostname||a.host||"localhost",o.default.isIP(a.host)===0&&(a.servername=a.host),a.rejectUnauthorized=a.rejectUnauthorized!==!1,delete a.path,r("port %d host %s rejectUnauthorized %b",a.port,a.host,a.rejectUnauthorized);let c=t.default.connect(a);c.on("secureConnect",()=>{a.rejectUnauthorized&&!c.authorized?c.emit("error",new Error("TLS not authorized")):c.removeListener("error",u)});function u(d){a.rejectUnauthorized&&s.emit("error",d),c.end()}return c.on("error",u),c};e.default=i}),Ts=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0});var n=(qe(),Ce(We)),t=zt(),o=ho(),l,r,i;function s(){let m=new t.Transform;return m._write=(b,y,g)=>{l.send({data:b.buffer,success(){g()},fail(T){g(new Error(T))}})},m._flush=b=>{l.close({success(){b()}})},m}function a(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})}function c(m,b){let y=m.protocol==="wxs"?"wss":"ws",g=`${y}://${m.hostname}${m.path}`;return m.port&&m.port!==80&&m.port!==443&&(g=`${y}://${m.hostname}:${m.port}${m.path}`),typeof m.transformWsUrl=="function"&&(g=m.transformWsUrl(g,m,b)),g}function u(){l.onOpen(()=>{i.socketReady()}),l.onMessage(m=>{let{data:b}=m;b instanceof ArrayBuffer?b=n.Buffer.from(b):b=n.Buffer.from(b,"utf8"),r.push(b)}),l.onClose(()=>{i.emit("close"),i.end(),i.destroy()}),l.onError(m=>{let b=new Error(m.errMsg);i.destroy(b)})}var d=(m,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let y=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";a(b);let g=c(b,m);l=wx.connectSocket({url:g,protocols:[y]}),r=s(),i=new o.BufferedDuplex(b,r,l),i._destroy=(k,v)=>{l.close({success(){v&&v(k)}})};let T=i.destroy;return i.destroy=(k,v)=>(i.destroy=T,setTimeout(()=>{l.close({fail(){i._destroy(k,v)}})},0),i),u(),i};e.default=d}),_s=de(e=>{"use strict";re(),oe(),ie(),Object.defineProperty(e,"__esModule",{value:!0});var n=(qe(),Ce(We)),t=zt(),o=ho(),l,r,i,s=!1;function a(){let b=new t.Transform;return b._write=(y,g,T)=>{l.sendSocketMessage({data:y.buffer,success(){T()},fail(){T(new Error)}})},b._flush=y=>{l.closeSocket({success(){y()}})},b}function c(b){b.hostname||(b.hostname="localhost"),b.path||(b.path="/"),b.wsOptions||(b.wsOptions={})}function u(b,y){let g=b.protocol==="alis"?"wss":"ws",T=`${g}://${b.hostname}${b.path}`;return b.port&&b.port!==80&&b.port!==443&&(T=`${g}://${b.hostname}:${b.port}${b.path}`),typeof b.transformWsUrl=="function"&&(T=b.transformWsUrl(T,b,y)),T}function d(){s||(s=!0,l.onSocketOpen(()=>{i.socketReady()}),l.onSocketMessage(b=>{if(typeof b.data=="string"){let y=n.Buffer.from(b.data,"base64");r.push(y)}else{let y=new FileReader;y.addEventListener("load",()=>{let g=y.result;g instanceof ArrayBuffer?g=n.Buffer.from(g):g=n.Buffer.from(g,"utf8"),r.push(g)}),y.readAsArrayBuffer(b.data)}}),l.onSocketClose(()=>{i.end(),i.destroy()}),l.onSocketError(b=>{i.destroy(b)}))}var m=(b,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");let g=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";c(y);let T=u(y,b);return l=y.my,l.connectSocket({url:T,protocols:g}),r=a(),i=new o.BufferedDuplex(y,r,l),d(),i};e.default=m}),Fu=de(e=>{"use strict";re(),oe(),ie();var n=e&&e.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var t=n(_t()),o=n((xu(),Ce(Ma))),l=n(Gi()),r=n(Kn());typeof we?.nextTick!="function"&&(we.nextTick=setImmediate);var i=(0,t.default)("mqttjs"),s=null;function a(d){let m;d.auth&&(m=d.auth.match(/^(.+):(.+)$/),m?(d.username=m[1],d.password=m[2]):d.username=d.auth)}function c(d,m){var b,y,g,T;if(i("connecting to an MQTT broker..."),typeof d=="object"&&!m&&(m=d,d=""),m=m||{},d&&typeof d=="string"){let _=o.default.parse(d,!0),A={};if(_.port!=null&&(A.port=Number(_.port)),A.host=_.hostname,A.query=_.query,A.auth=_.auth,A.protocol=_.protocol,A.path=_.path,A.protocol=(b=A.protocol)===null||b===void 0?void 0:b.replace(/:$/,""),m=Object.assign(Object.assign({},A),m),!m.protocol)throw new Error("Missing protocol")}if(m.unixSocket=m.unixSocket||((y=m.protocol)===null||y===void 0?void 0:y.includes("+unix")),m.unixSocket?m.protocol=m.protocol.replace("+unix",""):!(!((g=m.protocol)===null||g===void 0)&&g.startsWith("ws"))&&!(!((T=m.protocol)===null||T===void 0)&&T.startsWith("wx"))&&delete m.path,a(m),m.query&&typeof m.query.clientId=="string"&&(m.clientId=m.query.clientId),m.cert&&m.key)if(m.protocol){if(["mqtts","wss","wxs","alis"].indexOf(m.protocol)===-1)switch(m.protocol){case"mqtt":m.protocol="mqtts";break;case"ws":m.protocol="wss";break;case"wx":m.protocol="wxs";break;case"ali":m.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${m.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(s||(s={},!r.default&&!m.forceNativeWebSocket?(s.ws=Pn().streamBuilder,s.wss=Pn().streamBuilder,s.mqtt=bs().default,s.tcp=bs().default,s.ssl=ys().default,s.tls=s.ssl,s.mqtts=ys().default):(s.ws=Pn().browserStreamBuilder,s.wss=Pn().browserStreamBuilder,s.wx=Ts().default,s.wxs=Ts().default,s.ali=_s().default,s.alis=_s().default)),!s[m.protocol]){let _=["mqtts","wss"].indexOf(m.protocol)!==-1;m.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((A,L)=>_&&L%2===0?!1:typeof s[A]=="function")[0]}if(m.clean===!1&&!m.clientId)throw new Error("Missing clientId for unclean clients");m.protocol&&(m.defaultProtocol=m.protocol);function k(_){return m.servers&&((!_._reconnectCount||_._reconnectCount===m.servers.length)&&(_._reconnectCount=0),m.host=m.servers[_._reconnectCount].host,m.port=m.servers[_._reconnectCount].port,m.protocol=m.servers[_._reconnectCount].protocol?m.servers[_._reconnectCount].protocol:m.defaultProtocol,m.hostname=m.host,_._reconnectCount++),i("calling streambuilder for",m.protocol),s[m.protocol](_,m)}let v=new l.default(k,m);return v.on("error",()=>{}),v}function u(d,m,b=!0){return new Promise((y,g)=>{let T=c(d,m),k={connect:_=>{v(),y(T)},end:()=>{v(),y(T)},error:_=>{v(),T.end(),g(_)}};b===!1&&(k.close=()=>{k.error(new Error("Couldn't connect to server"))});function v(){Object.keys(k).forEach(_=>{T.off(_,k[_])})}Object.keys(k).forEach(_=>{T.on(_,k[_])})})}e.connectAsync=u,e.default=c}),ks=de(e=>{"use strict";re(),oe(),ie();var n=e&&e.__createBinding||(Object.create?function(b,y,g,T){T===void 0&&(T=g);var k=Object.getOwnPropertyDescriptor(y,g);(!k||("get"in k?!y.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return y[g]}}),Object.defineProperty(b,T,k)}:function(b,y,g,T){T===void 0&&(T=g),b[T]=y[g]}),t=e&&e.__setModuleDefault||(Object.create?function(b,y){Object.defineProperty(b,"default",{enumerable:!0,value:y})}:function(b,y){b.default=y}),o=e&&e.__importStar||function(b){if(b&&b.__esModule)return b;var y={};if(b!=null)for(var g in b)g!=="default"&&Object.prototype.hasOwnProperty.call(b,g)&&n(y,b,g);return t(y,b),y},l=e&&e.__exportStar||function(b,y){for(var g in b)g!=="default"&&!Object.prototype.hasOwnProperty.call(y,g)&&n(y,b,g)},r=e&&e.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var i=r(Gi());e.MqttClient=i.default;var s=r(ca());e.DefaultMessageIdProvider=s.default;var a=r(_u());e.UniqueMessageIdProvider=a.default;var c=r(ua());e.Store=c.default;var u=o(Fu());e.connect=u.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return u.connectAsync}});var d=r(Ia());e.KeepaliveManager=d.default,e.Client=i.default,l(Gi(),e),l(rn(),e);var m=Gn();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return m.ReasonCodes}})}),ju=de(e=>{re(),oe(),ie();var n=e&&e.__createBinding||(Object.create?function(i,s,a,c){c===void 0&&(c=a);var u=Object.getOwnPropertyDescriptor(s,a);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,c,u)}:function(i,s,a,c){c===void 0&&(c=a),i[c]=s[a]}),t=e&&e.__setModuleDefault||(Object.create?function(i,s){Object.defineProperty(i,"default",{enumerable:!0,value:s})}:function(i,s){i.default=s}),o=e&&e.__importStar||function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var a in i)a!=="default"&&Object.prototype.hasOwnProperty.call(i,a)&&n(s,i,a);return t(s,i),s},l=e&&e.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&n(s,i,a)};Object.defineProperty(e,"__esModule",{value:!0});var r=o(ks());e.default=r,l(ks(),e)}),hl=ju();var Jn=class{constructor(n){this.connect=()=>{this.client.on("connect",()=>{console.debug(`MQTT connection "${this.options.deviceUid}"(${this.clientId}) established.`),this.onConnect?.(this)}),this.client.on("message",(n,t)=>this.handleMessage(n,t.toString())),this.client.connect()};this.send=(n,t)=>{if(!this.isConnected()){console.warn("Publish failed: client is not connected.");return}let o=`${this.getFullTopic(n)}/offer`;this.client.publish(o,t)};this.disconnect=()=>{this.client.disconnected||(console.debug(`Terminating "${this.options.deviceUid}" MQTT connection.`),this.client.unsubscribe(this.getFullTopic("sdp")),this.client.unsubscribe(this.getFullTopic("ice")),this.client.end(!0))};this.isConnected=()=>this.client.connected??!1;this.options=n,this.clientId=crypto.randomUUID();let t={host:this.options.mqttHost,port:this.options.mqttPort,path:this.options.mqttPath,clientId:this.clientId,username:this.options.mqttUsername,password:this.options.mqttPassword,protocol:this.options.mqttProtocol,keepalive:20,protocolVersion:5,clean:!0,manualConnect:!0,reconnectPeriod:0};this.client=hl.connect(t),this.client.subscribe(this.getFullTopic("sdp"),{qos:2}),this.client.subscribe(this.getFullTopic("ice"),{qos:2})}handleMessage(n,t){switch(console.debug(`Received message on topic :"${n}"`,t),n){case this.getFullTopic("ice"):let o=JSON.parse(t);this.onIceCandidate?.(o);break;case this.getFullTopic("sdp"):let l=JSON.parse(t);this.onAnswer?.(l);break;default:console.warn(`Unknown topic: ${n}`);return}}getFullTopic(n){return`${this.options.deviceUid}/${n}/${this.clientId}`}};var po=class e{constructor(n){this.target=n.target,this.candidateInit=n.candidateInit}static fromJson(n){let t=JSON.parse(n);return typeof t.candidateInit=="string"&&(t.candidateInit=JSON.parse(t.candidateInit)),new e(t)}},zn=class{constructor(n){this.connect=()=>{let n=new URLSearchParams({apiKey:this.apiKey,userId:this.userId,roomId:this.roomId});this.client=new WebSocket(`${this.url}/rtc?${n.toString()}`),this.client.onopen=()=>{console.log("WebSocket Connected"),this.onConnect?.(this)},this.client.onmessage=t=>{this.handleMessage(t)},this.client.onclose=()=>{console.log("WebSocket Disconnected"),this.clearPingInterval()},this.client.onerror=t=>{console.error("WebSocket Error:",t)}};this.send=(n,t="")=>{if(!this.isConnected()){console.warn("Publish failed: client is not connected.");return}let o={action:n,message:t};this.client?.send(JSON.stringify(o))};this.disconnect=()=>{this.client&&(this.send("leave"),console.debug("Terminating websocket connection."),this.client.close())};this.isConnected=()=>this.client?.readyState===WebSocket.OPEN;this.url=n.websocketUrl,this.apiKey=n.apiKey??"",this.userId=n.userId??crypto.randomUUID(),this.roomId=n.roomId??""}handleMessage(n){let{action:t,message:o}=JSON.parse(n.data);if(t==="join")this.startPingInterval(),this.onJoin?.(JSON.parse(o));else if(t==="offer"){let l={type:"offer",sdp:o};this.onOffer?.(l)}else if(t==="answer"){let l={type:"answer",sdp:o};this.onAnswer?.(l)}else if(t==="trickle"){let l=po.fromJson(o);l.target==="PUBLISHER"?this.onPublisherIce?.(l.candidateInit):l.target==="SUBSCRIBER"&&this.onSubscriberIce?.(l.candidateInit)}else t==="trackPublished"?this.onTrackPublished?.():t==="roomInfo"?this.onRoomInfo?.(JSON.parse(o)):t==="quality"?this.onQuility?.(JSON.parse(o)):t==="speaking"?this.onSpeaking?.(JSON.parse(o)):t==="participant"?this.onParticipant?.(JSON.parse(o)):t==="leave"&&(this.clearPingInterval(),this.onLeave?.())}startPingInterval(){this.clearPingInterval(),console.debug("start ping interval"),this.pingInterval=setInterval(()=>{this.send("ping")},5e3)}clearPingInterval(){console.debug("clearing ping interval"),this.pingInterval&&clearInterval(this.pingInterval)}};var Yn=class extends It{constructor(t){super(t);this.close=()=>{if(this.cmdChannel.readyState==="open"){let t=new Ye(0,"false");this.cmdChannel.send(t.ToString())}this.cmdChannel.close(),this.ipcChannel?.close(),super.close(),console.debug("CommanderPeer is closed.")};this.createDataChannel=t=>{let o={id:t,ordered:!0,negotiated:!0};t===1&&(o.maxRetransmits=0);let l=super.createDataChannel(t,o);return l.binaryType="arraybuffer",l.onopen=()=>this.onDatachannel?.(t),l.onmessage=r=>{this.onDataChannelMessage(Sn[t],r)},this.createReceivers(Sn[t]),l};this.getRecordingMetadata=t=>{if(this.cmdChannel.readyState==="open"&&this.onMetadata){let o;if(t===void 0)o=new Yt(0,"");else if(typeof t=="string")o=new Yt(1,t);else{let r=`${t.getFullYear()}${Qt(t.getMonth()+1)}${Qt(t.getDate())}_${Qt(t.getHours())}${Qt(t.getMinutes())}${Qt(t.getSeconds())}`;o=new Yt(2,r)}let l=new Ye(2,o.ToString());this.cmdChannel.send(l.ToString())}};this.fetchRecordedVideo=t=>{if(this.onVideoDownloaded&&this.cmdChannel.readyState==="open"){let o=new Ye(3,t);this.cmdChannel.send(o.ToString())}};this.setCameraProperty=(t,o)=>{if(this.cmdChannel.readyState==="open"){let l=new vn(t,o),r=new Ye(4,JSON.stringify(l));this.cmdChannel.send(r.ToString())}};this.snapshot=(t=30)=>{if(this.onSnapshot&&this.cmdChannel.readyState==="open"){t=Math.max(0,Math.min(t,100));let o=new Ye(1,String(t));this.cmdChannel.send(o.ToString())}};this.sendMessage=t=>{let o=new Ye(6,t);this.ipcChannel?.send(o.ToString())};this.options.datachannelOnly||(console.debug("Create CommanderPeer with video/audio transceiver."),this.createlocalAudioStream(),this.peer.addTransceiver("video",{direction:"recvonly"}),this.peer.addTransceiver("audio",{direction:"sendrecv"})),this.cmdChannel=this.createDataChannel(0);let o=t.options.ipcMode==="lossy"?1:2;this.ipcChannel=this.createDataChannel(o),console.debug("CommanderPeer is created.")}};function Ae(e,n){if(!e)throw new Error(n)}var Wu=34028234663852886e22,qu=-34028234663852886e22,Vu=4294967295,$u=2147483647,Hu=-2147483648;function on(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>$u||e<Hu)throw new Error("invalid int 32: "+e)}function yn(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>Vu||e<0)throw new Error("invalid uint 32: "+e)}function Qn(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>Wu||e<qu))throw new Error("invalid float 32: "+e)}var dl=Symbol("@bufbuild/protobuf/enum-type");function fl(e){let n=e[dl];return Ae(n,"missing enum type on enum object"),n}function mo(e,n,t,o){e[dl]=go(n,t.map(l=>({no:l.no,name:l.name,localName:e[l.no]})),o)}function go(e,n,t){let o=Object.create(null),l=Object.create(null),r=[];for(let i of n){let s=ml(i);r.push(s),o[i.name]=s,l[i.no]=s}return{typeName:e,values:r,findName(i){return o[i]},findNumber(i){return l[i]}}}function pl(e,n,t){let o={};for(let l of n){let r=ml(l);o[r.localName]=r.no,o[r.no]=r.localName}return mo(o,e,n,t),o}function ml(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}var Pt=class{equals(n){return this.getType().runtime.util.equals(this.getType(),this,n)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(n,t){let o=this.getType(),l=o.runtime.bin,r=l.makeReadOptions(t);return l.readMessage(this,r.readerFactory(n),n.byteLength,r),this}fromJson(n,t){let o=this.getType(),l=o.runtime.json,r=l.makeReadOptions(t);return l.readMessage(o,n,r,this),this}fromJsonString(n,t){let o;try{o=JSON.parse(n)}catch(l){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${l instanceof Error?l.message:String(l)}`)}return this.fromJson(o,t)}toBinary(n){let t=this.getType(),o=t.runtime.bin,l=o.makeWriteOptions(n),r=l.writerFactory();return o.writeMessage(this,r,l),r.finish()}toJson(n){let t=this.getType(),o=t.runtime.json,l=o.makeWriteOptions(n);return o.writeMessage(this,l)}toJsonString(n){var t;let o=this.toJson(n);return JSON.stringify(o,null,(t=n?.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}};function gl(e,n,t,o){var l;let r=(l=o?.localName)!==null&&l!==void 0?l:n.substring(n.lastIndexOf(".")+1),i={[r]:function(s){e.util.initFields(this),e.util.initPartial(s,this)}}[r];return Object.setPrototypeOf(i.prototype,new Pt),Object.assign(i,{runtime:e,typeName:n,fields:e.util.newFieldList(t),fromBinary(s,a){return new i().fromBinary(s,a)},fromJson(s,a){return new i().fromJson(s,a)},fromJsonString(s,a){return new i().fromJsonString(s,a)},equals(s,a){return e.util.equals(i,s,a)}}),i}function yl(){let e=0,n=0;for(let o=0;o<28;o+=7){let l=this.buf[this.pos++];if(e|=(l&127)<<o,(l&128)==0)return this.assertBounds(),[e,n]}let t=this.buf[this.pos++];if(e|=(t&15)<<28,n=(t&112)>>4,(t&128)==0)return this.assertBounds(),[e,n];for(let o=3;o<=31;o+=7){let l=this.buf[this.pos++];if(n|=(l&127)<<o,(l&128)==0)return this.assertBounds(),[e,n]}throw new Error("invalid varint")}function Zn(e,n,t){for(let r=0;r<28;r=r+7){let i=e>>>r,s=!(!(i>>>7)&&n==0),a=(s?i|128:i)&255;if(t.push(a),!s)return}let o=e>>>28&15|(n&7)<<4,l=n>>3!=0;if(t.push((l?o|128:o)&255),!!l){for(let r=3;r<31;r=r+7){let i=n>>>r,s=!!(i>>>7),a=(s?i|128:i)&255;if(t.push(a),!s)return}t.push(n>>>31&1)}}var Xn=4294967296;function bo(e){let n=e[0]==="-";n&&(e=e.slice(1));let t=1e6,o=0,l=0;function r(i,s){let a=Number(e.slice(i,s));l*=t,o=o*t+a,o>=Xn&&(l=l+(o/Xn|0),o=o%Xn)}return r(-24,-18),r(-18,-12),r(-12,-6),r(-6),n?_l(o,l):To(o,l)}function Tl(e,n){let t=To(e,n),o=t.hi&2147483648;o&&(t=_l(t.lo,t.hi));let l=yo(t.lo,t.hi);return o?"-"+l:l}function yo(e,n){if({lo:e,hi:n}=Gu(e,n),n<=2097151)return String(Xn*n+e);let t=e&16777215,o=(e>>>24|n<<8)&16777215,l=n>>16&65535,r=t+o*6777216+l*6710656,i=o+l*8147497,s=l*2,a=1e7;return r>=a&&(i+=Math.floor(r/a),r%=a),i>=a&&(s+=Math.floor(i/a),i%=a),s.toString()+bl(i)+bl(r)}function Gu(e,n){return{lo:e>>>0,hi:n>>>0}}function To(e,n){return{lo:e|0,hi:n|0}}function _l(e,n){return n=~n,e?e=~e+1:n+=1,To(e,n)}var bl=e=>{let n=String(e);return"0000000".slice(n.length)+n};function _o(e,n){if(e>=0){for(;e>127;)n.push(e&127|128),e=e>>>7;n.push(e)}else{for(let t=0;t<9;t++)n.push(e&127|128),e=e>>7;n.push(1)}}function kl(){let e=this.buf[this.pos++],n=e&127;if((e&128)==0)return this.assertBounds(),n;if(e=this.buf[this.pos++],n|=(e&127)<<7,(e&128)==0)return this.assertBounds(),n;if(e=this.buf[this.pos++],n|=(e&127)<<14,(e&128)==0)return this.assertBounds(),n;if(e=this.buf[this.pos++],n|=(e&127)<<21,(e&128)==0)return this.assertBounds(),n;e=this.buf[this.pos++],n|=(e&15)<<28;for(let t=5;(e&128)!==0&&t<10;t++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),n>>>0}function Ku(){let e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.BUF_BIGINT_DISABLE!=="1")){let l=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),i=BigInt("0"),s=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(a){let c=typeof a=="bigint"?a:BigInt(a);if(c>r||c<l)throw new Error(`int64 invalid: ${a}`);return c},uParse(a){let c=typeof a=="bigint"?a:BigInt(a);if(c>s||c<i)throw new Error(`uint64 invalid: ${a}`);return c},enc(a){return e.setBigInt64(0,this.parse(a),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(a){return e.setBigInt64(0,this.uParse(a),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(a,c){return e.setInt32(0,a,!0),e.setInt32(4,c,!0),e.getBigInt64(0,!0)},uDec(a,c){return e.setInt32(0,a,!0),e.setInt32(4,c,!0),e.getBigUint64(0,!0)}}}let t=l=>Ae(/^-?[0-9]+$/.test(l),`int64 invalid: ${l}`),o=l=>Ae(/^[0-9]+$/.test(l),`uint64 invalid: ${l}`);return{zero:"0",supported:!1,parse(l){return typeof l!="string"&&(l=l.toString()),t(l),l},uParse(l){return typeof l!="string"&&(l=l.toString()),o(l),l},enc(l){return typeof l!="string"&&(l=l.toString()),t(l),bo(l)},uEnc(l){return typeof l!="string"&&(l=l.toString()),o(l),bo(l)},dec(l,r){return Tl(l,r)},uDec(l,r){return yo(l,r)}}}var Be=Ku();var Z;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(Z||(Z={}));var tt;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(tt||(tt={}));function St(e,n,t){if(n===t)return!0;if(e==Z.BYTES){if(!(n instanceof Uint8Array)||!(t instanceof Uint8Array)||n.length!==t.length)return!1;for(let o=0;o<n.length;o++)if(n[o]!==t[o])return!1;return!0}switch(e){case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return n==t}return!1}function nt(e,n){switch(e){case Z.BOOL:return!1;case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return n==0?Be.zero:"0";case Z.DOUBLE:case Z.FLOAT:return 0;case Z.BYTES:return new Uint8Array(0);case Z.STRING:return"";default:return 0}}function er(e,n){switch(e){case Z.BOOL:return n===!1;case Z.STRING:return n==="";case Z.BYTES:return n instanceof Uint8Array&&!n.byteLength;default:return n==0}}var xe;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(xe||(xe={}));var tr=class{constructor(n){this.stack=[],this.textEncoder=n??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let n=0;for(let l=0;l<this.chunks.length;l++)n+=this.chunks[l].length;let t=new Uint8Array(n),o=0;for(let l=0;l<this.chunks.length;l++)t.set(this.chunks[l],o),o+=this.chunks[l].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let n=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(n.byteLength),this.raw(n)}tag(n,t){return this.uint32((n<<3|t)>>>0)}raw(n){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(n),this}uint32(n){for(yn(n);n>127;)this.buf.push(n&127|128),n=n>>>7;return this.buf.push(n),this}int32(n){return on(n),_o(n,this.buf),this}bool(n){return this.buf.push(n?1:0),this}bytes(n){return this.uint32(n.byteLength),this.raw(n)}string(n){let t=this.textEncoder.encode(n);return this.uint32(t.byteLength),this.raw(t)}float(n){Qn(n);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,n,!0),this.raw(t)}double(n){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,n,!0),this.raw(t)}fixed32(n){yn(n);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,n,!0),this.raw(t)}sfixed32(n){on(n);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,n,!0),this.raw(t)}sint32(n){return on(n),n=(n<<1^n>>31)>>>0,_o(n,this.buf),this}sfixed64(n){let t=new Uint8Array(8),o=new DataView(t.buffer),l=Be.enc(n);return o.setInt32(0,l.lo,!0),o.setInt32(4,l.hi,!0),this.raw(t)}fixed64(n){let t=new Uint8Array(8),o=new DataView(t.buffer),l=Be.uEnc(n);return o.setInt32(0,l.lo,!0),o.setInt32(4,l.hi,!0),this.raw(t)}int64(n){let t=Be.enc(n);return Zn(t.lo,t.hi,this.buf),this}sint64(n){let t=Be.enc(n),o=t.hi>>31,l=t.lo<<1^o,r=(t.hi<<1|t.lo>>>31)^o;return Zn(l,r,this.buf),this}uint64(n){let t=Be.uEnc(n);return Zn(t.lo,t.hi,this.buf),this}},nr=class{constructor(n,t){this.varint64=yl,this.uint32=kl,this.buf=n,this.len=n.length,this.pos=0,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.textDecoder=t??new TextDecoder}tag(){let n=this.uint32(),t=n>>>3,o=n&7;if(t<=0||o<0||o>5)throw new Error("illegal tag: field no "+t+" wire type "+o);return[t,o]}skip(n,t){let o=this.pos;switch(n){case xe.Varint:for(;this.buf[this.pos++]&128;);break;case xe.Bit64:this.pos+=4;case xe.Bit32:this.pos+=4;break;case xe.LengthDelimited:let l=this.uint32();this.pos+=l;break;case xe.StartGroup:for(;;){let[r,i]=this.tag();if(i===xe.EndGroup){if(t!==void 0&&r!==t)throw new Error("invalid end group tag");break}this.skip(i,r)}break;default:throw new Error("cant skip wire type "+n)}return this.assertBounds(),this.buf.subarray(o,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let n=this.uint32();return n>>>1^-(n&1)}int64(){return Be.dec(...this.varint64())}uint64(){return Be.uDec(...this.varint64())}sint64(){let[n,t]=this.varint64(),o=-(n&1);return n=(n>>>1|(t&1)<<31)^o,t=t>>>1^o,Be.dec(n,t)}bool(){let[n,t]=this.varint64();return n!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Be.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Be.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let n=this.uint32(),t=this.pos;return this.pos+=n,this.assertBounds(),this.buf.subarray(t,t+n)}string(){return this.textDecoder.decode(this.bytes())}};function vl(e,n,t,o){let l;return{typeName:n,extendee:t,get field(){if(!l){let r=typeof o=="function"?o():o;r.name=n.split(".").pop(),r.jsonName=`[${n}]`,l=e.util.newFieldList([r]).list()[0]}return l},runtime:e}}function rr(e){let n=e.field.localName,t=Object.create(null);return t[n]=Ju(e),[t,()=>t[n]]}function Ju(e){let n=e.field;if(n.repeated)return[];if(n.default!==void 0)return n.default;switch(n.kind){case"enum":return n.T.values[0].no;case"scalar":return nt(n.T,n.L);case"message":let t=n.T,o=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(o):o;case"map":throw"map fields are not allowed to be extensions"}}function wl(e,n){if(!n.repeated&&(n.kind=="enum"||n.kind=="scalar")){for(let t=e.length-1;t>=0;--t)if(e[t].no==n.no)return[e[t]];return[]}return e.filter(t=>t.no===n.no)}var Et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),ir=[];for(let e=0;e<Et.length;e++)ir[Et[e].charCodeAt(0)]=e;ir[45]=Et.indexOf("+");ir[95]=Et.indexOf("/");var ko={dec(e){let n=e.length*3/4;e[e.length-2]=="="?n-=2:e[e.length-1]=="="&&(n-=1);let t=new Uint8Array(n),o=0,l=0,r,i=0;for(let s=0;s<e.length;s++){if(r=ir[e.charCodeAt(s)],r===void 0)switch(e[s]){case"=":l=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(l){case 0:i=r,l=1;break;case 1:t[o++]=i<<2|(r&48)>>4,i=r,l=2;break;case 2:t[o++]=(i&15)<<4|(r&60)>>2,i=r,l=3;break;case 3:t[o++]=(i&3)<<6|r,l=0;break}}if(l==1)throw Error("invalid base64 string.");return t.subarray(0,o)},enc(e){let n="",t=0,o,l=0;for(let r=0;r<e.length;r++)switch(o=e[r],t){case 0:n+=Et[o>>2],l=(o&3)<<4,t=1;break;case 1:n+=Et[l|o>>4],l=(o&15)<<2,t=2;break;case 2:n+=Et[l|o>>6],n+=Et[o&63],t=0;break}return t&&(n+=Et[l],n+="=",t==1&&(n+="=")),n}};function Sl(e,n,t){Il(n,e);let o=n.runtime.bin.makeReadOptions(t),l=wl(e.getType().runtime.bin.listUnknownFields(e),n.field),[r,i]=rr(n);for(let s of l)n.runtime.bin.readField(r,o.readerFactory(s.data),n.field,s.wireType,o);return i()}function El(e,n,t,o){Il(n,e);let l=n.runtime.bin.makeReadOptions(o),r=n.runtime.bin.makeWriteOptions(o);if(vo(e,n)){let c=e.getType().runtime.bin.listUnknownFields(e).filter(u=>u.no!=n.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(let u of c)e.getType().runtime.bin.onUnknownField(e,u.no,u.wireType,u.data)}let i=r.writerFactory(),s=n.field;!s.opt&&!s.repeated&&(s.kind=="enum"||s.kind=="scalar")&&(s=Object.assign(Object.assign({},n.field),{opt:!0})),n.runtime.bin.writeField(s,t,i,r);let a=l.readerFactory(i.finish());for(;a.pos<a.len;){let[c,u]=a.tag(),d=a.skip(u,c);e.getType().runtime.bin.onUnknownField(e,c,u,d)}}function vo(e,n){let t=e.getType();return n.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(e).find(o=>o.no==n.field.no)}function Il(e,n){Ae(e.extendee.typeName==n.getType().typeName,`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}function or(e,n){let t=e.localName;if(e.repeated)return n[t].length>0;if(e.oneof)return n[e.oneof.localName].case===t;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?n[t]!==void 0:e.kind=="enum"?n[t]!==e.T.values[0].no:!er(e.T,n[t]);case"message":return n[t]!==void 0;case"map":return Object.keys(n[t]).length>0}}function wo(e,n){let t=e.localName,o=!e.opt&&!e.req;if(e.repeated)n[t]=[];else if(e.oneof)n[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":n[t]={};break;case"enum":n[t]=o?e.T.values[0].no:void 0;break;case"scalar":n[t]=o?nt(e.T,e.L):void 0;break;case"message":n[t]=void 0;break}}function Je(e,n){if(e===null||typeof e!="object"||!Object.getOwnPropertyNames(Pt.prototype).every(o=>o in e&&typeof e[o]=="function"))return!1;let t=e.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:n===void 0?!0:t.typeName==n.typeName}function sr(e,n){return Je(n)||!e.fieldWrapper?n:e.fieldWrapper.wrapField(n)}var yf={"google.protobuf.DoubleValue":Z.DOUBLE,"google.protobuf.FloatValue":Z.FLOAT,"google.protobuf.Int64Value":Z.INT64,"google.protobuf.UInt64Value":Z.UINT64,"google.protobuf.Int32Value":Z.INT32,"google.protobuf.UInt32Value":Z.UINT32,"google.protobuf.BoolValue":Z.BOOL,"google.protobuf.StringValue":Z.STRING,"google.protobuf.BytesValue":Z.BYTES};var Al={ignoreUnknownFields:!1},Rl={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function zu(e){return e?Object.assign(Object.assign({},Al),e):Al}function Yu(e){return e?Object.assign(Object.assign({},Rl),e):Rl}var cr=Symbol(),ar=Symbol();function Ol(){return{makeReadOptions:zu,makeWriteOptions:Yu,readMessage(e,n,t,o){if(n==null||Array.isArray(n)||typeof n!="object")throw new Error(`cannot decode message ${e.typeName} from JSON: ${at(n)}`);o=o??new e;let l=new Map,r=t.typeRegistry;for(let[i,s]of Object.entries(n)){let a=e.fields.findJsonName(i);if(a){if(a.oneof){if(s===null&&a.kind=="scalar")continue;let c=l.get(a.oneof);if(c!==void 0)throw new Error(`cannot decode message ${e.typeName} from JSON: multiple keys for oneof "${a.oneof.name}" present: "${c}", "${i}"`);l.set(a.oneof,i)}Cl(o,s,a,t,e)}else{let c=!1;if(r?.findExtension&&i.startsWith("[")&&i.endsWith("]")){let u=r.findExtension(i.substring(1,i.length-1));if(u&&u.extendee.typeName==e.typeName){c=!0;let[d,m]=rr(u);Cl(d,s,u.field,t,u),El(o,u,m(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${e.typeName} from JSON: key "${i}" is unknown`)}}return o},writeMessage(e,n){let t=e.getType(),o={},l;try{for(l of t.fields.byNumber()){if(!or(l,e)){if(l.req)throw"required field not set";if(!n.emitDefaultValues||!Xu(l))continue}let i=l.oneof?e[l.oneof.localName].value:e[l.localName],s=Pl(l,i,n);s!==void 0&&(o[n.useProtoFieldName?l.name:l.jsonName]=s)}let r=n.typeRegistry;if(r?.findExtensionFor)for(let i of t.runtime.bin.listUnknownFields(e)){let s=r.findExtensionFor(t.typeName,i.no);if(s&&vo(e,s)){let a=Sl(e,s,n),c=Pl(s.field,a,n);c!==void 0&&(o[s.field.jsonName]=c)}}}catch(r){let i=l?`cannot encode field ${t.typeName}.${l.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,s=r instanceof Error?r.message:String(r);throw new Error(i+(s.length>0?`: ${s}`:""))}return o},readScalar(e,n,t){return Tn(e,n,t??tt.BIGINT,!0)},writeScalar(e,n,t){if(n!==void 0&&(t||er(e,n)))return lr(e,n)},debug:at}}function at(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return String(e)}}function Cl(e,n,t,o,l){let r=t.localName;if(t.repeated){if(Ae(t.kind!="map"),n===null)return;if(!Array.isArray(n))throw new Error(`cannot decode field ${l.typeName}.${t.name} from JSON: ${at(n)}`);let i=e[r];for(let s of n){if(s===null)throw new Error(`cannot decode field ${l.typeName}.${t.name} from JSON: ${at(s)}`);switch(t.kind){case"message":i.push(t.T.fromJson(s,o));break;case"enum":let a=So(t.T,s,o.ignoreUnknownFields,!0);a!==ar&&i.push(a);break;case"scalar":try{i.push(Tn(t.T,s,t.L,!0))}catch(c){let u=`cannot decode field ${l.typeName}.${t.name} from JSON: ${at(s)}`;throw c instanceof Error&&c.message.length>0&&(u+=`: ${c.message}`),new Error(u)}break}}}else if(t.kind=="map"){if(n===null)return;if(typeof n!="object"||Array.isArray(n))throw new Error(`cannot decode field ${l.typeName}.${t.name} from JSON: ${at(n)}`);let i=e[r];for(let[s,a]of Object.entries(n)){if(a===null)throw new Error(`cannot decode field ${l.typeName}.${t.name} from JSON: map value null`);let c;try{c=Qu(t.K,s)}catch(u){let d=`cannot decode map key for field ${l.typeName}.${t.name} from JSON: ${at(n)}`;throw u instanceof Error&&u.message.length>0&&(d+=`: ${u.message}`),new Error(d)}switch(t.V.kind){case"message":i[c]=t.V.T.fromJson(a,o);break;case"enum":let u=So(t.V.T,a,o.ignoreUnknownFields,!0);u!==ar&&(i[c]=u);break;case"scalar":try{i[c]=Tn(t.V.T,a,tt.BIGINT,!0)}catch(d){let m=`cannot decode map value for field ${l.typeName}.${t.name} from JSON: ${at(n)}`;throw d instanceof Error&&d.message.length>0&&(m+=`: ${d.message}`),new Error(m)}break}}}else switch(t.oneof&&(e=e[t.oneof.localName]={case:r},r="value"),t.kind){case"message":let i=t.T;if(n===null&&i.typeName!="google.protobuf.Value")return;let s=e[r];Je(s)?s.fromJson(n,o):(e[r]=s=i.fromJson(n,o),i.fieldWrapper&&!t.oneof&&(e[r]=i.fieldWrapper.unwrapField(s)));break;case"enum":let a=So(t.T,n,o.ignoreUnknownFields,!1);switch(a){case cr:wo(t,e);break;case ar:break;default:e[r]=a;break}break;case"scalar":try{let c=Tn(t.T,n,t.L,!1);switch(c){case cr:wo(t,e);break;default:e[r]=c;break}}catch(c){let u=`cannot decode field ${l.typeName}.${t.name} from JSON: ${at(n)}`;throw c instanceof Error&&c.message.length>0&&(u+=`: ${c.message}`),new Error(u)}break}}function Qu(e,n){if(e===Z.BOOL)switch(n){case"true":n=!0;break;case"false":n=!1;break}return Tn(e,n,tt.BIGINT,!0).toString()}function Tn(e,n,t,o){if(n===null)return o?nt(e,t):cr;switch(e){case Z.DOUBLE:case Z.FLOAT:if(n==="NaN")return Number.NaN;if(n==="Infinity")return Number.POSITIVE_INFINITY;if(n==="-Infinity")return Number.NEGATIVE_INFINITY;if(n===""||typeof n=="string"&&n.trim().length!==n.length||typeof n!="string"&&typeof n!="number")break;let l=Number(n);if(Number.isNaN(l)||!Number.isFinite(l))break;return e==Z.FLOAT&&Qn(l),l;case Z.INT32:case Z.FIXED32:case Z.SFIXED32:case Z.SINT32:case Z.UINT32:let r;if(typeof n=="number"?r=n:typeof n=="string"&&n.length>0&&n.trim().length===n.length&&(r=Number(n)),r===void 0)break;return e==Z.UINT32||e==Z.FIXED32?yn(r):on(r),r;case Z.INT64:case Z.SFIXED64:case Z.SINT64:if(typeof n!="number"&&typeof n!="string")break;let i=Be.parse(n);return t?i.toString():i;case Z.FIXED64:case Z.UINT64:if(typeof n!="number"&&typeof n!="string")break;let s=Be.uParse(n);return t?s.toString():s;case Z.BOOL:if(typeof n!="boolean")break;return n;case Z.STRING:if(typeof n!="string")break;try{encodeURIComponent(n)}catch{throw new Error("invalid UTF8")}return n;case Z.BYTES:if(n==="")return new Uint8Array(0);if(typeof n!="string")break;return ko.dec(n)}throw new Error}function So(e,n,t,o){if(n===null)return e.typeName=="google.protobuf.NullValue"?0:o?e.values[0].no:cr;switch(typeof n){case"number":if(Number.isInteger(n))return n;break;case"string":let l=e.findName(n);if(l!==void 0)return l.no;if(t)return ar;break}throw new Error(`cannot decode enum ${e.typeName} from JSON: ${at(n)}`)}function Xu(e){return e.repeated||e.kind=="map"?!0:!(e.oneof||e.kind=="message"||e.opt||e.req)}function Pl(e,n,t){if(e.kind=="map"){Ae(typeof n=="object"&&n!=null);let o={},l=Object.entries(n);switch(e.V.kind){case"scalar":for(let[i,s]of l)o[i.toString()]=lr(e.V.T,s);break;case"message":for(let[i,s]of l)o[i.toString()]=s.toJson(t);break;case"enum":let r=e.V.T;for(let[i,s]of l)o[i.toString()]=Eo(r,s,t.enumAsInteger);break}return t.emitDefaultValues||l.length>0?o:void 0}if(e.repeated){Ae(Array.isArray(n));let o=[];switch(e.kind){case"scalar":for(let l=0;l<n.length;l++)o.push(lr(e.T,n[l]));break;case"enum":for(let l=0;l<n.length;l++)o.push(Eo(e.T,n[l],t.enumAsInteger));break;case"message":for(let l=0;l<n.length;l++)o.push(n[l].toJson(t));break}return t.emitDefaultValues||o.length>0?o:void 0}switch(e.kind){case"scalar":return lr(e.T,n);case"enum":return Eo(e.T,n,t.enumAsInteger);case"message":return sr(e.T,n).toJson(t)}}function Eo(e,n,t){var o;if(Ae(typeof n=="number"),e.typeName=="google.protobuf.NullValue")return null;if(t)return n;let l=e.findNumber(n);return(o=l?.name)!==null&&o!==void 0?o:n}function lr(e,n){switch(e){case Z.INT32:case Z.SFIXED32:case Z.SINT32:case Z.FIXED32:case Z.UINT32:return Ae(typeof n=="number"),n;case Z.FLOAT:case Z.DOUBLE:return Ae(typeof n=="number"),Number.isNaN(n)?"NaN":n===Number.POSITIVE_INFINITY?"Infinity":n===Number.NEGATIVE_INFINITY?"-Infinity":n;case Z.STRING:return Ae(typeof n=="string"),n;case Z.BOOL:return Ae(typeof n=="boolean"),n;case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return Ae(typeof n=="bigint"||typeof n=="string"||typeof n=="number"),n.toString();case Z.BYTES:return Ae(n instanceof Uint8Array),ko.enc(n)}}var sn=Symbol("@bufbuild/protobuf/unknown-fields"),Ml={readUnknownFields:!0,readerFactory:e=>new nr(e)},Nl={writeUnknownFields:!0,writerFactory:()=>new tr};function Zu(e){return e?Object.assign(Object.assign({},Ml),e):Ml}function eh(e){return e?Object.assign(Object.assign({},Nl),e):Nl}function Bl(){return{makeReadOptions:Zu,makeWriteOptions:eh,listUnknownFields(e){var n;return(n=e[sn])!==null&&n!==void 0?n:[]},discardUnknownFields(e){delete e[sn]},writeUnknownFields(e,n){let o=e[sn];if(o)for(let l of o)n.tag(l.no,l.wireType).raw(l.data)},onUnknownField(e,n,t,o){let l=e;Array.isArray(l[sn])||(l[sn]=[]),l[sn].push({no:n,wireType:t,data:o})},readMessage(e,n,t,o,l){let r=e.getType(),i=l?n.len:n.pos+t,s,a;for(;n.pos<i&&([s,a]=n.tag(),!(l===!0&&a==xe.EndGroup));){let c=r.fields.find(s);if(!c){let u=n.skip(a,s);o.readUnknownFields&&this.onUnknownField(e,s,a,u);continue}Ul(e,n,c,a,o)}if(l&&(a!=xe.EndGroup||s!==t))throw new Error("invalid end group tag")},readField:Ul,writeMessage(e,n,t){let o=e.getType();for(let l of o.fields.byNumber()){if(!or(l,e)){if(l.req)throw new Error(`cannot encode field ${o.typeName}.${l.name} to binary: required field not set`);continue}let r=l.oneof?e[l.oneof.localName].value:e[l.localName];Ll(l,r,n,t)}return t.writeUnknownFields&&this.writeUnknownFields(e,n),n},writeField(e,n,t,o){n!==void 0&&Ll(e,n,t,o)}}}function Ul(e,n,t,o,l){let{repeated:r,localName:i}=t;switch(t.oneof&&(e=e[t.oneof.localName],e.case!=i&&delete e.value,e.case=i,i="value"),t.kind){case"scalar":case"enum":let s=t.kind=="enum"?Z.INT32:t.T,a=hr;if(t.kind=="scalar"&&t.L>0&&(a=nh),r){let m=e[i];if(o==xe.LengthDelimited&&s!=Z.STRING&&s!=Z.BYTES){let y=n.uint32()+n.pos;for(;n.pos<y;)m.push(a(n,s))}else m.push(a(n,s))}else e[i]=a(n,s);break;case"message":let c=t.T;r?e[i].push(ur(n,new c,l,t)):Je(e[i])?ur(n,e[i],l,t):(e[i]=ur(n,new c,l,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(e[i]=c.fieldWrapper.unwrapField(e[i])));break;case"map":let[u,d]=th(t,n,l);e[i][u]=d;break}}function ur(e,n,t,o){let l=n.getType().runtime.bin,r=o?.delimited;return l.readMessage(n,e,r?o.no:e.uint32(),t,r),n}function th(e,n,t){let o=n.uint32(),l=n.pos+o,r,i;for(;n.pos<l;){let[s]=n.tag();switch(s){case 1:r=hr(n,e.K);break;case 2:switch(e.V.kind){case"scalar":i=hr(n,e.V.T);break;case"enum":i=n.int32();break;case"message":i=ur(n,new e.V.T,t,void 0);break}break}}if(r===void 0&&(r=nt(e.K,tt.BIGINT)),typeof r!="string"&&typeof r!="number"&&(r=r.toString()),i===void 0)switch(e.V.kind){case"scalar":i=nt(e.V.T,tt.BIGINT);break;case"enum":i=e.V.T.values[0].no;break;case"message":i=new e.V.T;break}return[r,i]}function nh(e,n){let t=hr(e,n);return typeof t=="bigint"?t.toString():t}function hr(e,n){switch(n){case Z.STRING:return e.string();case Z.BOOL:return e.bool();case Z.DOUBLE:return e.double();case Z.FLOAT:return e.float();case Z.INT32:return e.int32();case Z.INT64:return e.int64();case Z.UINT64:return e.uint64();case Z.FIXED64:return e.fixed64();case Z.BYTES:return e.bytes();case Z.FIXED32:return e.fixed32();case Z.SFIXED32:return e.sfixed32();case Z.SFIXED64:return e.sfixed64();case Z.SINT64:return e.sint64();case Z.UINT32:return e.uint32();case Z.SINT32:return e.sint32()}}function Ll(e,n,t,o){Ae(n!==void 0);let l=e.repeated;switch(e.kind){case"scalar":case"enum":let r=e.kind=="enum"?Z.INT32:e.T;if(l)if(Ae(Array.isArray(n)),e.packed)ih(t,r,e.no,n);else for(let i of n)_n(t,r,e.no,i);else _n(t,r,e.no,n);break;case"message":if(l){Ae(Array.isArray(n));for(let i of n)xl(t,o,e,i)}else xl(t,o,e,n);break;case"map":Ae(typeof n=="object"&&n!=null);for(let[i,s]of Object.entries(n))rh(t,o,e,i,s);break}}function rh(e,n,t,o,l){e.tag(t.no,xe.LengthDelimited),e.fork();let r=o;switch(t.K){case Z.INT32:case Z.FIXED32:case Z.UINT32:case Z.SFIXED32:case Z.SINT32:r=Number.parseInt(o);break;case Z.BOOL:Ae(o=="true"||o=="false"),r=o=="true";break}switch(_n(e,t.K,1,r),t.V.kind){case"scalar":_n(e,t.V.T,2,l);break;case"enum":_n(e,Z.INT32,2,l);break;case"message":Ae(l!==void 0),e.tag(2,xe.LengthDelimited).bytes(l.toBinary(n));break}e.join()}function xl(e,n,t,o){let l=sr(t.T,o);t.delimited?e.tag(t.no,xe.StartGroup).raw(l.toBinary(n)).tag(t.no,xe.EndGroup):e.tag(t.no,xe.LengthDelimited).bytes(l.toBinary(n))}function _n(e,n,t,o){Ae(o!==void 0);let[l,r]=Dl(n);e.tag(t,l)[r](o)}function ih(e,n,t,o){if(!o.length)return;e.tag(t,xe.LengthDelimited).fork();let[,l]=Dl(n);for(let r=0;r<o.length;r++)e[l](o[r]);e.join()}function Dl(e){let n=xe.Varint;switch(e){case Z.BYTES:case Z.STRING:n=xe.LengthDelimited;break;case Z.DOUBLE:case Z.FIXED64:case Z.SFIXED64:n=xe.Bit64;break;case Z.FIXED32:case Z.SFIXED32:case Z.FLOAT:n=xe.Bit32;break}let t=Z[e].toLowerCase();return[n,t]}function Fl(){return{setEnumType:mo,initPartial(e,n){if(e===void 0)return;let t=n.getType();for(let o of t.fields.byMember()){let l=o.localName,r=n,i=e;if(i[l]!=null)switch(o.kind){case"oneof":let s=i[l].case;if(s===void 0)continue;let a=o.findField(s),c=i[l].value;a&&a.kind=="message"&&!Je(c,a.T)?c=new a.T(c):a&&a.kind==="scalar"&&a.T===Z.BYTES&&(c=kn(c)),r[l]={case:s,value:c};break;case"scalar":case"enum":let u=i[l];o.T===Z.BYTES&&(u=o.repeated?u.map(kn):kn(u)),r[l]=u;break;case"map":switch(o.V.kind){case"scalar":case"enum":if(o.V.T===Z.BYTES)for(let[b,y]of Object.entries(i[l]))r[l][b]=kn(y);else Object.assign(r[l],i[l]);break;case"message":let m=o.V.T;for(let b of Object.keys(i[l])){let y=i[l][b];m.fieldWrapper||(y=new m(y)),r[l][b]=y}break}break;case"message":let d=o.T;if(o.repeated)r[l]=i[l].map(m=>Je(m,d)?m:new d(m));else{let m=i[l];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?r[l]=kn(m):r[l]=m:r[l]=Je(m,d)?m:new d(m)}break}}},equals(e,n,t){return n===t?!0:!n||!t?!1:e.fields.byMember().every(o=>{let l=n[o.localName],r=t[o.localName];if(o.repeated){if(l.length!==r.length)return!1;switch(o.kind){case"message":return l.every((i,s)=>o.T.equals(i,r[s]));case"scalar":return l.every((i,s)=>St(o.T,i,r[s]));case"enum":return l.every((i,s)=>St(Z.INT32,i,r[s]))}throw new Error(`repeated cannot contain ${o.kind}`)}switch(o.kind){case"message":let i=l,s=r;return o.T.fieldWrapper&&(i!==void 0&&!Je(i)&&(i=o.T.fieldWrapper.wrapField(i)),s!==void 0&&!Je(s)&&(s=o.T.fieldWrapper.wrapField(s))),o.T.equals(i,s);case"enum":return St(Z.INT32,l,r);case"scalar":return St(o.T,l,r);case"oneof":if(l.case!==r.case)return!1;let a=o.findField(l.case);if(a===void 0)return!0;switch(a.kind){case"message":return a.T.equals(l.value,r.value);case"enum":return St(Z.INT32,l.value,r.value);case"scalar":return St(a.T,l.value,r.value)}throw new Error(`oneof cannot contain ${a.kind}`);case"map":let c=Object.keys(l).concat(Object.keys(r));switch(o.V.kind){case"message":let u=o.V.T;return c.every(m=>u.equals(l[m],r[m]));case"enum":return c.every(m=>St(Z.INT32,l[m],r[m]));case"scalar":let d=o.V.T;return c.every(m=>St(d,l[m],r[m]))}break}})},clone(e){let n=e.getType(),t=new n,o=t;for(let l of n.fields.byMember()){let r=e[l.localName],i;if(l.repeated)i=r.map(dr);else if(l.kind=="map"){i=o[l.localName];for(let[s,a]of Object.entries(r))i[s]=dr(a)}else l.kind=="oneof"?i=l.findField(r.case)?{case:r.case,value:dr(r.value)}:{case:void 0}:i=dr(r);o[l.localName]=i}for(let l of n.runtime.bin.listUnknownFields(e))n.runtime.bin.onUnknownField(o,l.no,l.wireType,l.data);return t}}}function dr(e){if(e===void 0)return e;if(Je(e))return e.clone();if(e instanceof Uint8Array){let n=new Uint8Array(e.byteLength);return n.set(e),n}return e}function kn(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function jl(e,n,t){return{syntax:e,json:Ol(),bin:Bl(),util:Object.assign(Object.assign({},Fl()),{newFieldList:n,initFields:t}),makeMessageType(o,l,r){return gl(this,o,l,r)},makeEnum:pl,makeEnumType:go,getEnumType:fl,makeExtension(o,l,r){return vl(this,o,l,r)}}}var fr=class{constructor(n,t){this._fields=n,this._normalizer=t}findJsonName(n){if(!this.jsonNames){let t={};for(let o of this.list())t[o.jsonName]=t[o.name]=o;this.jsonNames=t}return this.jsonNames[n]}find(n){if(!this.numbers){let t={};for(let o of this.list())t[o.no]=o;this.numbers=t}return this.numbers[n]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((n,t)=>n.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];let n=this.members,t;for(let o of this.list())o.oneof?o.oneof!==t&&(t=o.oneof,n.push(t)):n.push(o)}return this.members}};function Io(e,n){let t=Vl(e);return n?t:lh(ah(t))}function Wl(e){return Io(e,!1)}var ql=Vl;function Vl(e){let n=!1,t=[];for(let o=0;o<e.length;o++){let l=e.charAt(o);switch(l){case"_":n=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(l),n=!1;break;default:n&&(n=!1,l=l.toUpperCase()),t.push(l);break}}return t.join("")}var oh=new Set(["constructor","toString","toJSON","valueOf"]),sh=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),$l=e=>`${e}$`,ah=e=>sh.has(e)?$l(e):e,lh=e=>oh.has(e)?$l(e):e;var pr=class{constructor(n){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=n,this.localName=Wl(n)}addField(n){Ae(n.oneof===this,`field ${n.name} not one of ${this.name}`),this.fields.push(n)}findField(n){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[n]}};function Hl(e,n){var t,o,l,r,i,s;let a=[],c;for(let u of typeof e=="function"?e():e){let d=u;if(d.localName=Io(u.name,u.oneof!==void 0),d.jsonName=(t=u.jsonName)!==null&&t!==void 0?t:ql(u.name),d.repeated=(o=u.repeated)!==null&&o!==void 0?o:!1,u.kind=="scalar"&&(d.L=(l=u.L)!==null&&l!==void 0?l:tt.BIGINT),d.delimited=(r=u.delimited)!==null&&r!==void 0?r:!1,d.req=(i=u.req)!==null&&i!==void 0?i:!1,d.opt=(s=u.opt)!==null&&s!==void 0?s:!1,u.packed===void 0&&(n?d.packed=u.kind=="enum"||u.kind=="scalar"&&u.T!=Z.BYTES&&u.T!=Z.STRING:d.packed=!1),u.oneof!==void 0){let m=typeof u.oneof=="string"?u.oneof:u.oneof.name;(!c||c.name!=m)&&(c=new pr(m)),d.oneof=c,c.addField(d)}a.push(d)}return a}var ve=jl("proto3",e=>new fr(e,n=>Hl(n,!0)),e=>{for(let n of e.getType().fields.byMember()){if(n.opt)continue;let t=n.localName,o=e;if(n.repeated){o[t]=[];continue}switch(n.kind){case"oneof":o[t]={case:void 0};break;case"enum":o[t]=0;break;case"map":o[t]={};break;case"scalar":o[t]=nt(n.T,n.L);break;case"message":break}}});var lt=class e extends Pt{constructor(n){super(),this.seconds=Be.zero,this.nanos=0,ve.util.initPartial(n,this)}fromJson(n,t){if(typeof n!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${ve.json.debug(n)}`);let o=n.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!o)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");let l=Date.parse(o[1]+"-"+o[2]+"-"+o[3]+"T"+o[4]+":"+o[5]+":"+o[6]+(o[8]?o[8]:"Z"));if(Number.isNaN(l))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(l<Date.parse("0001-01-01T00:00:00Z")||l>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Be.parse(l/1e3),this.nanos=0,o[7]&&(this.nanos=parseInt("1"+o[7]+"0".repeat(9-o[7].length))-1e9),this}toJson(n){let t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let o="Z";if(this.nanos>0){let l=(this.nanos+1e9).toString().substring(1);l.substring(3)==="000000"?o="."+l.substring(0,3)+"Z":l.substring(6)==="000"?o="."+l.substring(0,6)+"Z":o="."+l+"Z"}return new Date(t).toISOString().replace(".000Z",o)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return e.fromDate(new Date)}static fromDate(n){let t=n.getTime();return new e({seconds:Be.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(n,t){return new e().fromBinary(n,t)}static fromJson(n,t){return new e().fromJson(n,t)}static fromJsonString(n,t){return new e().fromJsonString(n,t)}static equals(n,t){return ve.util.equals(e,n,t)}};lt.runtime=ve;lt.typeName="google.protobuf.Timestamp";lt.fields=ve.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var ch=ve.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:lt},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:uh,repeated:!0},{no:5,name:"events",kind:"message",T:dh,repeated:!0}]),uh=ve.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:hh,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),hh=ve.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:lt},{no:3,name:"value",kind:"scalar",T:2}]),dh=ve.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:lt},{no:7,name:"normalized_end_timestamp",kind:"message",T:lt,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]);var fh=ve.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]);var mr=ve.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:ve.getEnumType(gr)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:Ao,oneof:"value"},{no:3,name:"speaker",kind:"message",T:ph,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:gh,oneof:"value"},{no:7,name:"transcription",kind:"message",T:bh,oneof:"value"},{no:8,name:"metrics",kind:"message",T:ch,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Th,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:_h,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:kh,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:vh,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Ah,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:Rh,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Ch,oneof:"value"}]),gr=ve.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),ph=ve.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:mh,repeated:!0}]),mh=ve.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),Ao=ve.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),gh=ve.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),bh=ve.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:yh,repeated:!0}]),yh=ve.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Th=ve.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),_h=ve.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),kh=ve.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),vh=ve.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:wh,oneof:"value"}]),wh=ve.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]);var Sh=ve.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),Eh=ve.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:ve.getEnumType(Sh)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),Ih=ve.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Ah=ve.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:ve.getEnumType(fh)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:Eh,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:Ih,oneof:"content_header"}],{localName:"DataStream_Header"}),Rh=ve.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Ch=ve.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"});var br=class extends It{constructor(n){super(n),console.debug("SubscriberPeer created.")}async onDataChannelMessage(n,t){let o;if(t.data instanceof ArrayBuffer)o=t.data;else if(t.data instanceof Blob)o=await t.data.arrayBuffer();else{console.error("unsupported data type",t.data);return}let l=mr.fromBinary(new Uint8Array(o));l.value?.case==="user"&&super.dispatchPayload(n,l.value.value.payload)}};var yr=class extends It{constructor(t){super(t);this.sendMessage=t=>{let o=new Ye(6,t),l=new TextEncoder().encode(o.ToString()),i=new mr({kind:this.options.ipcMode==="lossy"?gr.LOSSY:gr.RELIABLE,value:{case:"user",value:new Ao({payload:l,topic:"ipc_topic"})}}).toBinary();this.options.ipcMode==="lossy"?this.pubLossyChannel.readyState==="open"&&this.pubLossyChannel.send(i):this.pubReliableChannel.readyState==="open"&&this.pubReliableChannel.send(i)};this.pubReliableChannel=super.createDataChannel(2,{ordered:!0}),this.pubLossyChannel=super.createDataChannel(1,{ordered:!0,maxRetransmits:0}),this.pubReliableChannel.onopen=()=>{this.onDatachannel?.(2)},this.pubLossyChannel.onopen=()=>{this.onDatachannel?.(1)},console.debug("PublisherPeer created.")}};var Gl={SIGNALING_TIMEOUT:1e4};var Ro=class{constructor(n){this.connect=()=>{this.client.connect(),this.options.timeout!==0&&(this.rtcTimer=setTimeout(()=>{this.cmdPeer?.connectionState==="connected"||this.subPeer?.connectionState==="connected"||this.pubPeer?.connectionState==="connected"||(this.onTimeout&&this.onTimeout(),console.warn("RTC connection timeout."),this.terminate())},this.options.timeout))};this.terminate=()=>{clearTimeout(this.rtcTimer),this.cmdPeer?.close(),this.subPeer?.close(),this.pubPeer?.close(),this.client.disconnect(),this.onConnectionState?.("closed"),console.debug("PiCamera connections had been terminated.")};this.getStatus=()=>this.cmdPeer?this.cmdPeer.connectionState:"new";this.setCameraProperty=(n,t)=>{this.cmdPeer?.setCameraProperty(n,t)};this.snapshot=(n=30)=>{this.cmdPeer?.snapshot(n)};this.sendMessage=n=>{this.cmdPeer?.sendMessage(n),this.pubPeer?.sendMessage(n)};this.toggleMic=(n=!this.options.isMicOn)=>{this.cmdPeer?.toggleMic(n),this.pubPeer?.toggleMic(n),this.subPeer?.toggleMic(n)};this.toggleSpeaker=(n=!this.options.isSpeakerOn)=>{this.cmdPeer?.toggleSpeaker(n),this.pubPeer?.toggleSpeaker(n),this.subPeer?.toggleSpeaker(n)};this.getRtcConfig=n=>{let t={};return t.iceServers=[],t.iceCandidatePoolSize=10,n.stunUrls&&n.stunUrls.length>0&&t.iceServers.push({urls:n.stunUrls}),n.turnUrl&&n.turnUsername&&n.turnPassword&&t.iceServers.push({urls:n.turnUrl,username:n.turnUsername,credential:n.turnPassword}),t};this.CreateCmdPeer=async n=>{this.cmdPeer=new Yn({options:this.options,...this.getRtcConfig(this.options)}),this.cmdPeer.onStream=t=>this.onStream?.(t),this.cmdPeer.onSfuStream=(t,o)=>this.onSfuStream?.(t,o),this.cmdPeer.onIceCandidate=t=>n.send("ice",JSON.stringify(t.candidate)),this.cmdPeer.onConnectionStateChange=t=>{this.onConnectionState?.(t),t==="connected"&&this.client?.isConnected()?this.client.disconnect():t==="failed"&&this.terminate()},this.cmdPeer.onSnapshot=t=>this.onSnapshot?.(t),this.cmdPeer.onMetadata=t=>this.onMetadata?.(t),this.cmdPeer.onProgress=(t,o,l)=>this.onProgress?.(t,o,l),this.cmdPeer.onVideoDownloaded=t=>this.onVideoDownloaded?.(t),this.cmdPeer.onDatachannel=t=>this.onDatachannel?.(t),this.cmdPeer.onMessage=t=>this.onMessage?.(t),n.onIceCandidate=t=>this.cmdPeer?.addIceCandidate(t),n.onAnswer=t=>this.cmdPeer?.setRemoteDescription(t)};this.mqttOnConnect=async n=>{console.debug("Mqtt connected!");let t=await this.cmdPeer?.createOffer();this.options.codec&&t?.sdp&&(t.sdp=Oo(t.sdp,this.options.codec)),t&&n.send("sdp",JSON.stringify(t))};if(this.options=this.initializeOptions(n),this.options.signaling==="mqtt")this.client=new Jn(this.options),this.CreateCmdPeer(this.client),this.client.onConnect=t=>this.mqttOnConnect(t);else if(this.options.signaling==="websocket")this.client=new zn(this.options),this.setSfuServerEvent(this.client);else throw"unknow signaling method."}getRecordingMetadata(n){this.onMetadata&&this.cmdPeer?.getRecordingMetadata(n)}fetchRecordedVideo(n){this.onVideoDownloaded&&this.cmdPeer?.fetchRecordedVideo(n)}initializeOptions(n){return{...{signaling:"mqtt",mqttProtocol:"wss",mqttPath:"",timeout:Gl.SIGNALING_TIMEOUT,datachannelOnly:!1,isMicOn:!0,isSpeakerOn:!0,credits:!0},...n}}setSfuServerEvent(n){n.onConnect=()=>{},n.onJoin=async t=>{let o={options:this.options};o.iceServers=[t],this.pubPeer=new yr(o),this.pubPeer.onDatachannel=r=>this.onDatachannel?.(r),this.pubPeer.onIceCandidate=r=>{r.candidate?.candidate&&n.send("tricklePublisher",r.candidate?.candidate)},this.subPeer=new br(o),this.subPeer.onMessage=r=>this.onMessage?.(r),this.subPeer.onStream=r=>this.onStream?.(r),this.subPeer.onSfuStream=(r,i)=>this.onSfuStream?.(r,i),this.subPeer.onIceCandidate=r=>{r.candidate?.candidate&&n.send("trickleSubscriber",r.candidate?.candidate)};let l=await this.pubPeer.createOffer();n.send("offer",l.sdp)},n.onOffer=async t=>{let o=await this.subPeer?.createAnswer(t);o&&n.send("answer",o.sdp)},n.onAnswer=async t=>this.pubPeer?.setRemoteDescription(t),n.onPublisherIce=async t=>this.pubPeer?.addIceCandidate(t),n.onSubscriberIce=async t=>this.subPeer?.addIceCandidate(t),n.onTrackPublished=()=>{},n.onParticipant=t=>this.onParticipant?.(t),n.onRoomInfo=t=>this.onRoomInfo?.(t),n.onQuility=t=>this.onQuility?.(t),n.onSpeaking=t=>this.onSpeaking?.(t),n.onLeave=async()=>n.disconnect()}};export{Kl as CameraKeyLabels,Po as CameraPropertyKey,Jl as CameraValueLables,wn as ChannelId,Ro as PiCamera};
/*! Bundled license information:

mqtt/dist/mqtt.esm.js:
  (*! Bundled license information:
  
  @jspm/core/nodelibs/browser/buffer.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  *)
*/
